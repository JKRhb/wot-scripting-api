<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.1.8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;color:#fff;font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste:is(:focus:hover,.selected:focus){border-color:#51a7e8}
.respec-button-copy-paste:is(:hover,:active,.zeroclipboard-is-hover,.zeroclipboard-is-active){text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste:is(:active,.selected,.zeroclipboard-is-active){background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste:is(:disabled,:disabled:hover,.disabled,.disabled:hover){color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
<title>Web of Things (WoT) Scripting API</title>
    
    
    
<script>
      document.addEventListener("DOMContentLoaded", () => {
        // Add example button selection logic
        for (const button of document.querySelectorAll(".ds-selector-tabs .selectors button")) {
          button.onclick = () => {
            const ex = button.closest(".ds-selector-tabs");
            ex.querySelector("button.selected").classList.remove("selected");
            ex.querySelector(".selected").classList.remove("selected");
            button.classList.add('selected');
            ex.querySelector("." + button.dataset.selects).classList.add("selected");
          }
        }
      });
    </script>
    
<style>

    /* example tab selection */
  .ds-selector-tabs {
    padding-bottom: 2em;
  }
  .ds-selector-tabs .selectors {
    padding: 0;
    border-bottom: 1px solid #ccc;
    height: 28px;
  }
  .ds-selector-tabs .selectors button {
    display: inline-block;
    min-width: 54px;
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    height: 27px;
    padding: 0 8px;
    line-height: 27px;
    transition: all,0.218s;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    color: #666;
    border: 1px solid transparent;
  }
  .ds-selector-tabs .selectors button:first-child {
    margin-left: 2px;
  }
  .ds-selector-tabs .selectors button.selected {
    color: #202020 !important;
    border: 1px solid #ccc;
    border-bottom: 1px solid #fff !important;
  }
  .ds-selector-tabs .selectors button:hover {
    background-color: transparent;
    color: #202020;
    cursor: pointer;
  }
  .ds-selector-tabs pre:not(.preserve), .ds-selector-tabs table:not(.preserve) {
    display: none;
  }
  .ds-selector-tabs pre.selected, .ds-selector-tabs table.selected {
    display: block;
  }
    
</style>
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="description" content="The Web of Things is made of entities (Things) that can describe their capabilities in a machine-interpretable Thing Description (TD) and expose these capabilities through the WoT Interface, that is, network interactions modeled as Properties (for reading and writing values), Actions (to execute remote procedures with or without return values) and Events (for signaling notifications).">
<link rel="canonical" href="https://www.w3.org/TR/wot-scripting-api/">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "NOTE",
  "publishDate": "2023-09-28",
  "processVersion": 2023,
  "shortName": "wot-scripting-api",
  "copyrightStart": 2017,
  "group": "wg/wot",
  "noRecTrack": true,
  "noLegacyStyle": true,
  "wgPublicList": "public-wot-wg",
  "edDraftURI": "https://w3c.github.io/wot-scripting-api/",
  "github": "https://github.com/w3c/wot-scripting-api/",
  "issueBase": "https://www.github.com/w3c/wot-scripting-api/issues/",
  "crEnd": "",
  "inlineCSS": true,
  "noIDLIn": true,
  "editors": [
    {
      "name": "Zoltan Kis",
      "w3cid": "57789",
      "company": "Intel",
      "companyURL": "https://www.intel.com/"
    },
    {
      "name": "Daniel Peintner",
      "w3cid": "39497",
      "company": "Siemens AG",
      "companyURL": "https://www.siemens.com/"
    },
    {
      "name": "Cristiano Aguzzi",
      "w3cid": "105495",
      "company": "Invited Expert",
      "companyURL": "https://github.com/relu91"
    },
    {
      "name": "Johannes Hund",
      "w3cid": "74472",
      "note": "Former Editor, when at Siemens AG"
    },
    {
      "name": "Kazuaki Nimura",
      "w3cid": "59208",
      "note": "Former Editor, at Fujitsu Ltd."
    }
  ],
  "otherLinks": [
    {
      "key": "Repository",
      "data": [
        {
          "value": "On GitHub",
          "href": "https://github.com/w3c/wot-scripting-api"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/wot-scripting-api/issues"
        }
      ]
    },
    {
      "key": "Contributors",
      "data": [
        {
          "value": "Contributors on GitHub",
          "href": "https://github.com/w3c/wot-scripting-api/graphs/contributors"
        }
      ]
    }
  ],
  "xref": [
    "web-platform",
    "HTML",
    "INFRA",
    "URL",
    "WEBIDL",
    "DOM",
    "FETCH",
    "ecmascript",
    "streams",
    "wot-architecture",
    "wot-thing-description",
    "wot-binding-templates"
  ],
  "localBiblio": {
    "WOT-ARCHITECTURE": {
      "href": "https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/",
      "title": "Web of Things (WoT) Architecture 1.1",
      "publisher": "W3C",
      "date": "19 January 2023",
      "id": "wot-architecture"
    },
    "WOT-TD": {
      "href": "https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/",
      "title": "Web of Things (WoT) Thing Description 1.1",
      "publisher": "W3C",
      "date": "19 January 2023",
      "id": "wot-td"
    },
    "WOT-DISCOVERY": {
      "href": "https://www.w3.org/TR/2023/CR-wot-discovery-20230119/",
      "title": "Web of Things (WoT) Discovery",
      "publisher": "W3C",
      "date": "19 January 2023",
      "id": "wot-discovery"
    },
    "WOT-PROTOCOL-BINDINGS": {
      "href": "https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/",
      "title": "Web of Things (WoT) Binding Templates",
      "publisher": "W3C",
      "date": "30 January 2020",
      "id": "wot-protocol-bindings"
    },
    "WOT-SECURITY": {
      "href": "https://www.w3.org/TR/2019/NOTE-wot-security-20191106/",
      "title": "Web of Things (WoT) Security and Privacy Guidelines",
      "publisher": "W3C",
      "date": "6 November 2019",
      "id": "wot-security"
    },
    "WOT-USE-CASES": {
      "href": "https://www.w3.org/TR/2022/NOTE-wot-usecases-20220307/",
      "title": "Web of Things (WoT): Use Cases and Requirements",
      "publisher": "W3C",
      "date": " 7 March 2022",
      "id": "wot-use-cases"
    },
    "TYPESCRIPT": {
      "href": "https://www.typescriptlang.org/docs/handbook/intro.html",
      "title": "TypeScript Language Specification",
      "publisher": "Microsoft",
      "date": "1 October 2012",
      "id": "typescript"
    },
    "WEBAPPSEC": {
      "href": "https://w3c.github.io/webappsec/specs/powerfulfeatures",
      "title": "Secure Contexts",
      "publisher": "W3C",
      "date": "18 September 2021"
    }
  },
  "publishISODate": "2023-09-28T00:00:00.000Z",
  "generatedSubtitle": "W3C Group Note 28 September 2023"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-NOTE"></head>
  <body class="h-entry toc-inline" data-cite="web-platform HTML INFRA URL WEBIDL DOM FETCH ecmascript streams wot-architecture wot-thing-description wot-binding-templates"><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">Web of Things (WoT) Scripting API</h1> 
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#NOTE">W3C Group Note</a> <time class="dt-published" datetime="2023-09-28">28 September 2023</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2023/NOTE-wot-scripting-api-20230928/">https://www.w3.org/TR/2023/NOTE-wot-scripting-api-20230928/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/wot-scripting-api/">https://www.w3.org/TR/wot-scripting-api/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/wot-scripting-api/">https://w3c.github.io/wot-scripting-api/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/wot-scripting-api/">https://www.w3.org/standards/history/wot-scripting-api/</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/wot-scripting-api/commits/">Commit history</a>
                  </dd>
        
        
        
        
        
        <dt>Editors:</dt><dd class="editor p-author h-card vcard" data-editor-id="57789">
    <span class="p-name fn">Zoltan Kis</span> (<a class="p-org org h-org" href="https://www.intel.com/">Intel</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="39497">
    <span class="p-name fn">Daniel Peintner</span> (<a class="p-org org h-org" href="https://www.siemens.com/">Siemens AG</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="105495">
    <span class="p-name fn">Cristiano Aguzzi</span> (<a class="p-org org h-org" href="https://github.com/relu91">Invited Expert</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="74472">
    <span class="p-name fn">Johannes Hund</span> (Former Editor, when at Siemens AG)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="59208">
    <span class="p-name fn">Kazuaki Nimura</span> (Former Editor, at Fujitsu Ltd.)
  </dd>
        
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/wot-scripting-api/">GitHub w3c/wot-scripting-api</a>
        (<a href="https://github.com/w3c/wot-scripting-api/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/wot-scripting-api/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/wot-scripting-api/issues/">open issues</a>)
      </dd><dd><a href="mailto:public-wot-wg@w3.org?subject=%5Bwot-scripting-api%5D%20YOUR%20TOPIC%20HERE">public-wot-wg@w3.org</a> with subject line <kbd>[wot-scripting-api] <em>… message topic …</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-wot-wg">archives</a>)</dd>
        
        <dt>Repository</dt><dd>
    <a href="https://github.com/w3c/wot-scripting-api">On GitHub</a>
  </dd><dd>
    <a href="https://github.com/w3c/wot-scripting-api/issues">File a bug</a>
  </dd><dt>Contributors</dt><dd>
    <a href="https://github.com/w3c/wot-scripting-api/graphs/contributors">Contributors on GitHub</a>
  </dd>
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2017-2023
    
    <a href="https://www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/Consortium/Legal/2023/software-license" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>

  <section id="abstract" class="introductory"><h2>Abstract</h2>
    <p>
      The Web of Things is made of entities (<a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-1">Thing</a>s) that can describe their capabilities in a machine-interpretable <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-1">Thing Description</a> (TD) and expose these capabilities through the <a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interface-1">WoT Interface</a>, that is, network interactions modeled as <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-1">Properties</a> (for reading and writing values), <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-1">Action</a>s (to execute remote procedures with or without return values) and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-1">Event</a>s (for signaling notifications).
    </p>
    <p>
      The main <a href="#dfn-web-of-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-web-of-things-1">Web of Things</a> (WoT) concepts are described in the <cite><a data-matched-text="[[[WOT-ARCHITECTURE]]]" href="https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/">Web of Things (WoT) Architecture 1.1</a></cite> specification.
    </p>
    <p>
      Scripting is an optional building block in WoT and it is typically used in gateways or browsers that are able to run a <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-1">WoT Runtime</a> and
      <a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/script-manager">script management</a>, providing a convenient way to extend WoT support to new types of endpoints and implement WoT applications such as <a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/thing-directory">TD Directory</a>.
    </p>
    <p>
      This specification describes an application programming interface (API) representing the <a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interface-2">WoT Interface</a> that allows scripts to discover, operate <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-2">Thing</a>s and to expose locally defined <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-3">Thing</a>s characterized by <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-1"> WoT Interactions</a> specified by a script.
    </p>
    <p>
      The APIs defined in this document deliberately follow the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification closely. It is possible to implement more abstract APIs on top of them, or implementing directly the WoT network facing interface (i.e. the <a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interface-3">WoT Interface</a>).
    </p>
    <div class="note" id="issue-container-generatedID"><div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3"><span>Editor's note</span></div><p class="">
      This specification is implemented at least by the <a href="http://www.thingweb.io/">Eclipse Thingweb</a>
      project also known as <a href="https://github.com/eclipse/thingweb.node-wot">node-wot</a>, which is considered the reference open source implementation at the moment. Check its <a href="https://github.com/eclipse/thingweb.node-wot"> source code</a>, including <a href="https://github.com/eclipse/thingweb.node-wot/tree/master/examples">examples</a>.
    </p></div>
  </section>

  <section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
    <p>
      Implementers need to be aware that this specification is considered unstable. Vendors interested in implementing this specification before it eventually reaches the Candidate Recommendation phase should subscribe to the <a href="https://github.com/w3c/wot-scripting-api">repository</a> and take part in the discussions.
    </p>
    <div class="note" id="issue-container-generatedID-0"><div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="3"><span>Editor's note</span><span class="issue-label">: The W3C WoT WG is asking for feedback</span></div><p class="">
      Please contribute to this draft using the <a href="https://github.com/w3c/wot-scripting-api/issues">GitHub Issues</a> page of the <a href="https://github.com/w3c/wot-scripting-api/">WoT Scripting API</a> repository.
      For feedback on security and privacy considerations, please use the <a href="https://github.com/w3c/wot-security/issues">WoT Security and Privacy</a> Issues.
    </p></div>
  <p>
    This document was published by the <a href="https://www.w3.org/groups/wg/wot">Web of Things Working Group</a> as
    a Group Note using the
        <a href="https://www.w3.org/2023/Process-20230612/#recs-and-notes">Note track</a>. 
  </p><p>This Group Note is endorsed by
        the <a href="https://www.w3.org/groups/wg/wot">Web of Things Working Group</a>, but is not endorsed by
        <abbr title="World Wide Web Consortium">W3C</abbr> itself nor its
        Members. </p><p>
    This is a draft document and may be updated, replaced or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than work in progress.
    
  </p><p data-deliverer="95969">
    
        The
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>
        does not carry any licensing requirements or commitments on this
        document.
      
    
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20230612/">12 June 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#use-case-scenarios"><bdi class="secno">2. </bdi>Use Case Scenarios</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#consuming-a-thing"><bdi class="secno">2.1 </bdi>Consuming a Thing</a></li><li class="tocline"><a class="tocxref" href="#exposing-a-thing"><bdi class="secno">2.2 </bdi>Exposing a Thing</a></li><li class="tocline"><a class="tocxref" href="#discovery"><bdi class="secno">2.3 </bdi>Discovery</a></li></ol></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">3. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#terminology-and-conventions"><bdi class="secno">4. </bdi>Terminology and conventions</a></li><li class="tocline"><a class="tocxref" href="#the-thingdescription-type"><bdi class="secno">5. </bdi>The <span data-export="" data-dfn-type="typedef" data-idl="typedef" data-title="ThingDescription" data-dfn-for=""><code>ThingDescription</code></span> type</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#fetching-a-thing-description"><bdi class="secno">5.1 </bdi> Fetching a Thing Description</a></li><li class="tocline"><a class="tocxref" href="#expanding-a-thing-description"><bdi class="secno">5.2 </bdi>Expanding a Thing Description</a></li><li class="tocline"><a class="tocxref" href="#validating-a-thing-description"><bdi class="secno">5.3 </bdi>Validating a Thing Description</a></li></ol></li><li class="tocline"><a class="tocxref" href="#the-wot-namespace"><bdi class="secno">6. </bdi>The <span data-export="" data-dfn-type="namespace" data-idl="namespace" data-title="WOT" data-dfn-for=""><code>WOT</code></span> namespace</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-consume-method"><bdi class="secno">6.1 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="consume()" data-dfn-for="WOT" data-type="Promise" data-lt="consume()|consume(td)" data-local-lt="WOT.consume|WOT.consume()|consume"><code>consume()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-produce-method"><bdi class="secno">6.2 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="produce()" data-dfn-for="WOT" data-type="Promise" data-lt="produce()|produce(init)" data-local-lt="WOT.produce|WOT.produce()|produce"><code>produce()</code></span> method</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#expand-an-exposedthinginit"><bdi class="secno">6.2.1 </bdi>Expand an ExposedThingInit</a></li><li class="tocline"><a class="tocxref" href="#validating-an-exposedthinginit"><bdi class="secno">6.2.2 </bdi>Validating an ExposedThingInit</a></li></ol></li><li class="tocline"><a class="tocxref" href="#the-discover-method"><bdi class="secno">6.3 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="discover()" data-dfn-for="WOT" data-type="Promise" data-lt="discover()|discover(filter)" data-local-lt="WOT.discover|WOT.discover()|discover"><code>discover()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-exploredirectory-method"><bdi class="secno">6.4 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="exploreDirectory()" data-dfn-for="WOT" data-type="Promise" data-lt="exploreDirectory()|exploreDirectory(url)|exploreDirectory(url, filter)" data-local-lt="WOT.exploreDirectory|WOT.exploreDirectory()|exploreDirectory"><code>exploreDirectory()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-requestthingdescription-method"><bdi class="secno">6.5 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="requestThingDescription()" data-dfn-for="WOT" data-type="Promise" data-lt="requestThingDescription()|requestThingDescription(url)" data-local-lt="WOT.requestThingDescription|WOT.requestThingDescription()|requestThingDescription"><code>requestThingDescription()</code></span> method</a></li></ol></li><li class="tocline"><a class="tocxref" href="#handling-interaction-data"><bdi class="secno">7. </bdi>Handling interaction data</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-interactioninput-type"><bdi class="secno">7.1 </bdi>The <span data-export="" data-dfn-type="typedef" data-idl="typedef" data-title="InteractionInput" data-dfn-for=""><code>InteractionInput</code></span> type</a></li><li class="tocline"><a class="tocxref" href="#the-interactionoutput-interface"><bdi class="secno">7.2 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="InteractionOutput" data-dfn-for=""><code>InteractionOutput</code></span> interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-value-function"><bdi class="secno">7.2.1 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="value()" data-dfn-for="InteractionOutput" data-type="Promise" data-lt="value()" data-local-lt="InteractionOutput.value|InteractionOutput.value()|value"><code>value()</code></span> function</a></li><li class="tocline"><a class="tocxref" href="#the-arraybuffer-function"><bdi class="secno">7.2.2 </bdi>The  <span data-export="" data-dfn-type="method" data-idl="operation" data-title="arrayBuffer()" data-dfn-for="InteractionOutput" data-type="Promise" data-lt="arrayBuffer()" data-local-lt="InteractionOutput.arrayBuffer|InteractionOutput.arrayBuffer()|arrayBuffer"><code>arrayBuffer()</code></span> function</a></li><li class="tocline"><a class="tocxref" href="#the-check-data-schema-algorithm"><bdi class="secno">7.2.3 </bdi>The <span>check data schema</span> algorithm</a></li><li class="tocline"><a class="tocxref" href="#the-create-interaction-request-algorithm"><bdi class="secno">7.2.4 </bdi>The <span>create interaction request</span> algorithm</a></li><li class="tocline"><a class="tocxref" href="#the-parse-interaction-response-algorithm"><bdi class="secno">7.2.5 </bdi>The <span>parse interaction response</span> algorithm</a></li></ol></li><li class="tocline"><a class="tocxref" href="#using-interactioninput-and-interactionoutput"><bdi class="secno">7.3 </bdi>Using <span data-xref-type="_IDL_" data-link-type="idl" data-lt="InteractionInput" class="formerLink"><code>InteractionInput</code></span> and <span data-xref-type="_IDL_" data-link-type="idl" data-lt="InteractionOutput" class="formerLink"><code>InteractionOutput</code></span></a></li><li class="tocline"><a class="tocxref" href="#error-handling"><bdi class="secno">7.4 </bdi>Error handling</a></li></ol></li><li class="tocline"><a class="tocxref" href="#the-consumedthing-interface"><bdi class="secno">8. </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="ConsumedThing" data-dfn-for=""><code>ConsumedThing</code></span> interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#internal-slots-for-consumedthing"><bdi class="secno">8.1 </bdi>Internal slots for <span data-xref-type="_IDL_" data-link-type="idl" data-lt="ConsumedThing" class="formerLink"><code>ConsumedThing</code></span></a></li><li class="tocline"><a class="tocxref" href="#constructing-consumedthing"><bdi class="secno">8.2 </bdi>Constructing <code>ConsumedThing</code></a></li><li class="tocline"><a class="tocxref" href="#the-getthingdescription-method"><bdi class="secno">8.3 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="getThingDescription()" data-dfn-for="ConsumedThing" data-type="ThingDescription" data-lt="getThingDescription()" data-local-lt="ConsumedThing.getThingDescription|ConsumedThing.getThingDescription()|getThingDescription"><code>getThingDescription()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-readproperty-method"><bdi class="secno">8.4 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="readProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readProperty()|readProperty(propertyName)|readProperty(propertyName, options)" data-local-lt="ConsumedThing.readProperty|ConsumedThing.readProperty()|readProperty"><code>readProperty()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-readmultipleproperties-method"><bdi class="secno">8.5 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="readMultipleProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readMultipleProperties()|readMultipleProperties(propertyNames)|readMultipleProperties(propertyNames, options)" data-local-lt="ConsumedThing.readMultipleProperties|ConsumedThing.readMultipleProperties()|readMultipleProperties"><code>readMultipleProperties()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-readallproperties-method"><bdi class="secno">8.6 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="readAllProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readAllProperties()|readAllProperties(options)" data-local-lt="ConsumedThing.readAllProperties|ConsumedThing.readAllProperties()|readAllProperties"><code>readAllProperties()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-writeproperty-method"><bdi class="secno">8.7 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="writeProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="writeProperty()|writeProperty(propertyName, value)|writeProperty(propertyName, value, options)" data-local-lt="ConsumedThing.writeProperty|ConsumedThing.writeProperty()|writeProperty"><code>writeProperty()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-writemultipleproperties-method"><bdi class="secno">8.8 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="writeMultipleProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="writeMultipleProperties()|writeMultipleProperties(valueMap)|writeMultipleProperties(valueMap, options)" data-local-lt="ConsumedThing.writeMultipleProperties|ConsumedThing.writeMultipleProperties()|writeMultipleProperties"><code>writeMultipleProperties()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-observeproperty-method"><bdi class="secno">8.9 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="observeProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="observeProperty()|observeProperty(name, listener)|observeProperty(name, listener, onerror)|observeProperty(name, listener, onerror, options)" data-local-lt="ConsumedThing.observeProperty|ConsumedThing.observeProperty()|observeProperty"><code>observeProperty()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-invokeaction-method"><bdi class="secno">8.10 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="invokeAction()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="invokeAction()|invokeAction(actionName)|invokeAction(actionName, params)|invokeAction(actionName, params, options)" data-local-lt="ConsumedThing.invokeAction|ConsumedThing.invokeAction()|invokeAction"><code>invokeAction()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-subscribeevent-method"><bdi class="secno">8.11 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="subscribeEvent()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="subscribeEvent()|subscribeEvent(name, listener)|subscribeEvent(name, listener, onerror)|subscribeEvent(name, listener, onerror, options)" data-local-lt="ConsumedThing.subscribeEvent|ConsumedThing.subscribeEvent()|subscribeEvent"><code>subscribeEvent()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-interactionoptions-dictionary"><bdi class="secno">8.12 </bdi>
        The <span data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="InteractionOptions" data-dfn-for=""><code>InteractionOptions</code></span> dictionary
      </a></li><li class="tocline"><a class="tocxref" href="#the-propertyreadmap-type"><bdi class="secno">8.13 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PropertyReadMap" data-dfn-for=""><code>PropertyReadMap</code></span> type</a></li><li class="tocline"><a class="tocxref" href="#the-propertywritemap-type"><bdi class="secno">8.14 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PropertyWriteMap" data-dfn-for=""><code>PropertyWriteMap</code></span> type</a></li><li class="tocline"><a class="tocxref" href="#the-interactionlistener-callback"><bdi class="secno">8.15 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="InteractionListener" data-dfn-for=""><code>InteractionListener</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-errorlistener-callback"><bdi class="secno">8.16 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="ErrorListener" data-dfn-for=""><code>ErrorListener</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-subscription-interface"><bdi class="secno">8.17 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="Subscription" data-dfn-for=""><code>Subscription</code></span> interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#internal-slots-for-subscription"><bdi class="secno">8.17.1 </bdi>Internal slots for <span data-xref-type="_IDL_" data-link-type="idl" data-lt="Subscription" class="formerLink"><code>Subscription</code></span></a></li><li class="tocline"><a class="tocxref" href="#the-stop-method"><bdi class="secno">8.17.2 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="stop()" data-dfn-for="Subscription" data-type="Promise" data-lt="stop()|stop(options)" data-local-lt="Subscription.stop|Subscription.stop()|stop"><code>stop()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#finding-an-unsubscribe-form"><bdi class="secno">8.17.3 </bdi>Finding an unsubscribe <span class="formerLink" data-link-type="dfn">Form</span></a></li></ol></li><li class="tocline"><a class="tocxref" href="#consumedthing-examples"><bdi class="secno">8.18 </bdi>ConsumedThing Examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#the-exposedthing-interface"><bdi class="secno">9. </bdi>The <span data-plurals="exposedthings" data-export="" data-dfn-type="interface" data-idl="interface" data-title="ExposedThing" data-dfn-for=""><code>ExposedThing</code></span> interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#internal-slots-for-exposedthing"><bdi class="secno">9.1 </bdi>Internal slots for ExposedThing</a></li><li class="tocline"><a class="tocxref" href="#constructing-exposedthing"><bdi class="secno">9.2 </bdi>Constructing <span data-xref-type="_IDL_" data-link-type="idl" data-lt="ExposedThing" class="formerLink"><code>ExposedThing</code></span></a></li><li class="tocline"><a class="tocxref" href="#the-getthingdescription-method-0"><bdi class="secno">9.3 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="getThingDescription()" data-dfn-for="ExposedThing" data-type="ThingDescription" data-lt="getThingDescription()" data-local-lt="ExposedThing.getThingDescription|ExposedThing.getThingDescription()|getThingDescription"><code>getThingDescription()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-propertyreadhandler-callback"><bdi class="secno">9.4 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="PropertyReadHandler" data-dfn-for=""><code>PropertyReadHandler</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-setpropertyreadhandler-method"><bdi class="secno">9.5 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setPropertyReadHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyReadHandler()|setPropertyReadHandler(name, handler)" data-local-lt="ExposedThing.setPropertyReadHandler|ExposedThing.setPropertyReadHandler()|setPropertyReadHandler"><code>setPropertyReadHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-requests-for-reading-a-property"><bdi class="secno">9.6 </bdi>Handling requests for reading a Property</a></li><li class="tocline"><a class="tocxref" href="#handling-requests-for-reading-multiple-properties"><bdi class="secno">9.7 </bdi>Handling requests for reading multiple Properties</a></li><li class="tocline"><a class="tocxref" href="#handling-requests-for-reading-all-properties"><bdi class="secno">9.8 </bdi>Handling requests for reading all Properties</a></li><li class="tocline"><a class="tocxref" href="#the-setpropertyobservehandler-method"><bdi class="secno">9.9 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setPropertyObserveHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyObserveHandler()|setPropertyObserveHandler(name, handler)" data-local-lt="ExposedThing.setPropertyObserveHandler|ExposedThing.setPropertyObserveHandler()|setPropertyObserveHandler"><code>setPropertyObserveHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-property-observe-requests"><bdi class="secno">9.10 </bdi>Handling <span class="formerLink" data-link-type="dfn">Property</span> observe requests</a></li><li class="tocline"><a class="tocxref" href="#the-setpropertyunobservehandler-method"><bdi class="secno">9.11 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setPropertyUnobserveHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyUnobserveHandler()|setPropertyUnobserveHandler(name, handler)" data-local-lt="ExposedThing.setPropertyUnobserveHandler|ExposedThing.setPropertyUnobserveHandler()|setPropertyUnobserveHandler"><code>setPropertyUnobserveHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-property-unobserve-requests"><bdi class="secno">9.12 </bdi>Handling <span class="formerLink" data-link-type="dfn">Property</span> unobserve requests</a></li><li class="tocline"><a class="tocxref" href="#the-emitpropertychange-method"><bdi class="secno">9.13 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="emitPropertyChange()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="emitPropertyChange()|emitPropertyChange(name)|emitPropertyChange(name, data)" data-local-lt="ExposedThing.emitPropertyChange|ExposedThing.emitPropertyChange()|emitPropertyChange"><code>emitPropertyChange()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-propertywritehandler-callback"><bdi class="secno">9.14 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="PropertyWriteHandler" data-dfn-for=""><code>PropertyWriteHandler</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-setpropertywritehandler-method"><bdi class="secno">9.15 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setPropertyWriteHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyWriteHandler()|setPropertyWriteHandler(name, handler)" data-local-lt="ExposedThing.setPropertyWriteHandler|ExposedThing.setPropertyWriteHandler()|setPropertyWriteHandler"><code>setPropertyWriteHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-requests-for-writing-a-property"><bdi class="secno">9.16 </bdi>Handling requests for writing a Property</a></li><li class="tocline"><a class="tocxref" href="#handling-requests-for-writing-multiple-properties"><bdi class="secno">9.17 </bdi>Handling requests for writing multiple Properties</a></li><li class="tocline"><a class="tocxref" href="#the-actionhandler-callback"><bdi class="secno">9.18 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="ActionHandler" data-dfn-for=""><code>ActionHandler</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-setactionhandler-method"><bdi class="secno">9.19 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setActionHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setActionHandler()|setActionHandler(name, action)" data-local-lt="ExposedThing.setActionHandler|ExposedThing.setActionHandler()|setActionHandler"><code>setActionHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-action-requests"><bdi class="secno">9.20 </bdi>Handling <span class="formerLink" data-link-type="dfn">Action</span> requests</a></li><li class="tocline"><a class="tocxref" href="#the-eventsubscriptionhandler-callback"><bdi class="secno">9.21 </bdi>The <span data-export="" data-dfn-type="callback" data-idl="callback" data-title="EventSubscriptionHandler" data-dfn-for=""><code>EventSubscriptionHandler</code></span> callback</a></li><li class="tocline"><a class="tocxref" href="#the-seteventsubscribehandler-method"><bdi class="secno">9.22 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setEventSubscribeHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setEventSubscribeHandler()|setEventSubscribeHandler(name, handler)" data-local-lt="ExposedThing.setEventSubscribeHandler|ExposedThing.setEventSubscribeHandler()|setEventSubscribeHandler"><code>setEventSubscribeHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-event-subscribe-requests"><bdi class="secno">9.23 </bdi>Handling <span class="formerLink" data-link-type="dfn">Event</span> subscribe requests</a></li><li class="tocline"><a class="tocxref" href="#the-seteventunsubscribehandler-method"><bdi class="secno">9.24 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setEventUnsubscribeHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setEventUnsubscribeHandler()|setEventUnsubscribeHandler(name, handler)" data-local-lt="ExposedThing.setEventUnsubscribeHandler|ExposedThing.setEventUnsubscribeHandler()|setEventUnsubscribeHandler"><code>setEventUnsubscribeHandler()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#handling-event-unsubscribe-requests"><bdi class="secno">9.25 </bdi>Handling <span class="formerLink" data-link-type="dfn">Event</span> unsubscribe requests</a></li><li class="tocline"><a class="tocxref" href="#handling-events"><bdi class="secno">9.26 </bdi>Handling <span class="formerLink" data-link-type="dfn">Events</span></a></li><li class="tocline"><a class="tocxref" href="#the-emitevent-method"><bdi class="secno">9.27 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="emitEvent()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="emitEvent()|emitEvent(name)|emitEvent(name, data)" data-local-lt="ExposedThing.emitEvent|ExposedThing.emitEvent()|emitEvent"><code>emitEvent()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-expose-method"><bdi class="secno">9.28 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="expose()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="expose()" data-local-lt="ExposedThing.expose|ExposedThing.expose()|expose"><code>expose()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#the-destroy-method"><bdi class="secno">9.29 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="destroy()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="destroy()" data-local-lt="ExposedThing.destroy|ExposedThing.destroy()|destroy"><code>destroy()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#exposedthing-examples"><bdi class="secno">9.30 </bdi>ExposedThing Examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#the-thingdiscoveryprocess-interface"><bdi class="secno">10. </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="ThingDiscoveryProcess" data-dfn-for=""><code>ThingDiscoveryProcess</code></span> interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#constructing-thingdiscoveryprocess"><bdi class="secno">10.1 </bdi>Constructing <span data-xref-type="_IDL_" data-link-type="idl" data-lt="ThingDiscoveryProcess" class="formerLink"><code>ThingDiscoveryProcess</code></span></a></li><li class="tocline"><a class="tocxref" href="#the-thingfilter-dictionary"><bdi class="secno">10.2 </bdi>The <span data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="ThingFilter" data-dfn-for=""><code>ThingFilter</code></span> dictionary</a></li><li class="tocline"><a class="tocxref" href="#the-discovery-process-algorithm"><bdi class="secno">10.3 </bdi>The <span data-lt="discovery-process|discovery process">discovery process</span> algorithm</a></li><li class="tocline"><a class="tocxref" href="#the-stop-method-0"><bdi class="secno">10.4 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="stop()" data-dfn-for="ThingDiscoveryProcess" data-type="undefined" data-lt="stop()" data-local-lt="ThingDiscoveryProcess.stop|ThingDiscoveryProcess.stop()|stop"><code>stop()</code></span> method</a></li><li class="tocline"><a class="tocxref" href="#discovery-examples"><bdi class="secno">10.5 </bdi>Discovery Examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#security"><bdi class="secno">11. </bdi>Security and Privacy</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sec-security-consideration-runtime"><bdi class="secno">11.1 </bdi>Scripting Runtime Security and Privacy Risks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sec-security-consideration-input"><bdi class="secno">11.1.1 </bdi>Corrupted Input Security and Privacy Risk</a></li><li class="tocline"><a class="tocxref" href="#sec-security-consideration-device-direct-access"><bdi class="secno">11.1.2 </bdi>Physical Device Direct Access Security and Privacy Risk</a></li><li class="tocline"><a class="tocxref" href="#sec-security-consideration-update-provisioning"><bdi class="secno">11.1.3 </bdi>Provisioning and Update Security Risk</a></li><li class="tocline"><a class="tocxref" href="#sec-security-consideration-credentials-storage"><bdi class="secno">11.1.4 </bdi>Security Credentials Storage Security and Privacy Risk</a></li></ol></li><li class="tocline"><a class="tocxref" href="#sec-security-consideration-script"><bdi class="secno">11.2 </bdi>Script Security and Privacy Risks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sec-security-consideration-script-input"><bdi class="secno">11.2.1 </bdi>Corrupted Script Input Security and Privacy Risk</a></li><li class="tocline"><a class="tocxref" href="#sec-security-consideration-script-processing"><bdi class="secno">11.2.2 </bdi>Denial Of Service Security Risk</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#api-design-rationale"><bdi class="secno">A. </bdi>API design rationale</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#approaches-to-wot-application-development"><bdi class="secno">A.1 </bdi>Approaches to WoT application development</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#no-scripting-api"><bdi class="secno">A.1.1 </bdi>No Scripting API</a></li><li class="tocline"><a class="tocxref" href="#simple-scripting-api"><bdi class="secno">A.1.2 </bdi>Simple Scripting API</a></li><li class="tocline"><a class="tocxref" href="#this-api-aligned-with-the-web-of-things-wot-thing-description-1-1-specification"><bdi class="secno">A.1.3 </bdi>This API, aligned with the <cite><span data-cite="WOT-TD" data-matched-text="[[[WOT-TD]]]" class="formerLink">Web of Things (WoT) Thing Description 1.1</span></cite> specification</a></li></ol></li><li class="tocline"><a class="tocxref" href="#fetching-and-validating-a-td"><bdi class="secno">A.2 </bdi>Fetching and validating a TD</a></li><li class="tocline"><a class="tocxref" href="#factory-vs-constructors"><bdi class="secno">A.3 </bdi>Factory vs constructors</a></li><li class="tocline"><a class="tocxref" href="#observers"><bdi class="secno">A.4 </bdi>Observers</a></li><li class="tocline"><a class="tocxref" href="#using-events"><bdi class="secno">A.5 </bdi>Using Events</a></li><li class="tocline"><a class="tocxref" href="#polymorphic-functions"><bdi class="secno">A.6 </bdi>Polymorphic functions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#Changes"><bdi class="secno">B. </bdi>Changes</a></li><li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">C. </bdi>Full Web IDL</a></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">D. </bdi>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">E. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">E.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">E.2 </bdi>Informative references</a></li></ol></li></ol></nav>

  <section id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div> 
    <p>
      WoT provides layered interoperability based on how <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-4">Thing</a>s are used:
      "consumed" and "exposed", as defined in the <cite><a data-matched-text="[[[WOT-ARCHITECTURE]]]" href="https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/">Web of Things (WoT) Architecture 1.1</a></cite> terminology.
    </p>
    <p>
      By <a href="#dfn-consume" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-consume-1">consuming a TD</a>, a client <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-5">Thing</a> creates a local runtime resource model that allows accessing the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-2">Properties</a>, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-2">Actions</a> and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-2">Events</a> exposed by the server <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-6">Thing</a> on a remote device.
    </p>
    <div>
      Exposing a <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-7">Thing</a> requires:
      <ul>
        <li>
          defining a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-2">Thing Description</a> (TD),
        </li>
        <li>
          then instantiating a software stack that implements the <a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interface-4">WoT Interface</a> specified by the <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-1">TD</a> in order to serve requests for accessing the exposed <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-3">Properties</a>, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-3">Actions</a> and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-3">Events</a>,
        </li>
        <li>
           then eventually publishing the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-3">Thing Description</a> (for instance to a <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-1">TD Directory</a> for easier discovery).
        </li>
      </ul>
      This specification describes how to expose and consume <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-8">Thing</a>s by a script. Also, it defines a generic API for <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-9">Thing</a> discovery.
    </div>
    <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><p class="">
      Typically scripts are meant to be used on bridges or gateways that expose and control simpler devices as WoT <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-10">Thing</a>s and have means to handle (e.g. install, uninstall, update etc.) and run scripts.
    </p></div>
    <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div><p class="">
      This specification does not make assumptions on how the <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-2">WoT Runtime</a> handles and runs scripts, including single or multiple tenancy, script deployment and lifecycle management. The API already supports the generic mechanisms that make it possible to implement script management, for instance by exposing a manager <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-11">Thing</a> whose <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-4">Actions</a> (action handlers) implement script lifecycle management operations.
    </p></div>
    
  </section>

  <section class="informative" id="use-case-scenarios"><div class="header-wrapper"><h2 id="x2-use-case-scenarios"><bdi class="secno">2. </bdi>Use Case Scenarios</h2><a class="self-link" href="#use-case-scenarios" aria-label="Permalink for Section 2."></a></div><p><em>This section is non-normative.</em></p> 
    <p>
      The business use cases listed in the [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-use-cases" title="Web of Things (WoT): Use Cases and Requirements">WOT-USE-CASES</a></cite>] document may be
      implemented using this API, based on the scripting use case scenarios
      described here.
    </p>
    <section id="consuming-a-thing"><div class="header-wrapper"><h3 id="x2-1-consuming-a-thing"><bdi class="secno">2.1 </bdi>Consuming a Thing</h3><a class="self-link" href="#consuming-a-thing" aria-label="Permalink for Section 2.1"></a></div>
    <ul>
      <li>
        <a href="#dfn-consume" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-consume-2">Consume a TD</a>, i.e. create a programmatic object from a
        <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-4">Thing Description</a> that exposes <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-2">WoT Interactions</a>:
        <ul>
          <li>Read the value of a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-4">Property</a> or a set of properties.</li>
          <li>Set the value of a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-5">Property</a> or a set of properties.</li>
          <li>Observe value changes of a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-6">Property</a>.</li>
          <li>Invoke an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-5">Action</a>.</li>
          <li>Observe WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-4">Events</a> emitted by the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-12">Thing</a>.</li>
          <li>
            Introspect the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-5">Thing Description</a>.
          </li>
        </ul>
      </li>
    </ul>
    </section>

    <section id="exposing-a-thing"><div class="header-wrapper"><h3 id="x2-2-exposing-a-thing"><bdi class="secno">2.2 </bdi>Exposing a Thing</h3><a class="self-link" href="#exposing-a-thing" aria-label="Permalink for Section 2.2"></a></div>
    <ul>
      <li>
        Exposing the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-13">Thing</a> includes generating the protocol bindings in
        order to access lower level functionality.
      </li>
      <li>
        Create a local <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-14">Thing</a> to be exposed, based on <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-6">Thing Description</a>.
      </li>
      <li>
        The following use cases can be implemented before creating the
        <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-15">Thing</a> by editing the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-7">Thing Description</a>:
        <ul>
          <li>Add a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-7">Property</a> definition to the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-16">Thing</a>.</li>
          <li>Remove a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-8">Property</a> definition from the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-17">Thing</a>.</li>
          <li>Add an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-6">Action</a> definition to the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-18">Thing</a>.</li>
          <li>Remove an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-7">Action</a> definition from the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-19">Thing</a>.</li>
          <li>Add a WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-5">Event</a> definition to the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-20">Thing</a>.</li>
          <li>Remove a WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-6">Event</a> definition from the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-21">Thing</a>.</li>
        </ul>
        <div class="note" id="issue-container-generatedID-3"><div role="heading" class="ednote-title marker" id="h-ednote-1" aria-level="4"><span>Editor's note</span></div><p class="">
          After evaluating dynamic modifications to <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-8">Thing Descriptions</a>
          through several versions of this API, the editors concluded that the
          simplest way to represent these use cases is to take an existing
          <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-2">TD</a>, modify it (i.e. add or remove definitions) and then create
          a new <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-22">Thing</a> based on the modified <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-3">TD</a>.
        </p></div>
      </li>
      <li>
        Emit a WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-7">Event</a>, i.e. notify all subscribed listeners.
      </li>
      <li>Register service handlers for external requests:
        <ul>
          <li>to retrieve a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-9">Property</a> value;</li>
          <li>to update a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-10">Property</a> value;</li>
          <li>to observe a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-11">Property</a>;</li>
          <li>to unobserve a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-12">Property</a>;</li>
          <li>
            to invoke an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-8">Action</a>: take the parameters from the request, execute the defined action, and return the result;
          </li>
          <li>to subscribe to an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-8">Event</a>;</li>
          <li>to unsubscribe from an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-9">Event</a>.</li>
        </ul>
      </li>
    </ul>
    </section>

    <section id="discovery"><div class="header-wrapper"><h3 id="x2-3-discovery"><bdi class="secno">2.3 </bdi>Discovery</h3><a class="self-link" href="#discovery" aria-label="Permalink for Section 2.3"></a></div>
    <ul>
      <li>Discover <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-23">Thing</a>s in a network by sending a broadcast request.</li>
      <li>Discover <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-24">Thing</a>s running in the local <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-3">WoT Runtime</a>.</li>
      <li>Discover nearby <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-25">Thing</a>s, for instance connected by NFC or Bluetooth,
        or within a <a href="https://en.wikipedia.org/wiki/Geo-fence">geo-fence</a>.</li>
      <li>Discover <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-26">Thing</a>s by sending a discovery request to a given <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-2">TD Directory</a>.</li>
      <li>Discover <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-27">Thing</a>s filtered by filters defined on <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-9">Thing Description</a>s</li>
      <li>Discover <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-28">Thing</a>s filtered by semantic queries.</li>
      <li>Stop or suppress an ongoing discovery process.</li>
      <li>
          Optionally specify a timeout to the discovery process after which it is stopped/suppressed.
      </li>
    </ul>
    </section>
  </section>

  <section id="conformance"><div class="header-wrapper"><h2 id="x3-conformance"><bdi class="secno">3. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 3."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">SHOULD</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
    <div class="note" id="issue-container-generatedID-4"><div role="heading" class="ednote-title marker" id="h-ednote-2" aria-level="3"><span>Editor's note</span></div><p class="">
    This specification used to be a Working Draft which was expected to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation. However, it is now a WG Note which contains informative statements only. Therefore we need to consider how to deal with the description within this Conformance section.</p></div>

    <p>
      This specification describes the conformance criteria for the following classes of <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a> (<dfn id="dfn-ua" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">UA</dfn>).
    </p>
    <p>
      Due to requirements of small embedded implementations, splitting WoT client and server interfaces was needed. Then, discovery is a distributed application, but typical scenarios have been covered by a generic discovery API in this specification. This resulted in using 3 conformance classes for a <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-1">UA</a> that implements this API, one for client, one for server, and one for discovery. An application that uses this API can introspect for the presence of the <code>consume()</code>, <code>produce()</code> and <code>discover()</code> methods on the <a href="#dfn-wot-api-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-api-object-1">WoT API object</a> in order to determine which conformance class the <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-2">UA</a> implements.
    </p>
    <dl>
      <dt>
        <dfn id="dfn-wot-consumer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Consumer</dfn> <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-3">UA</a>
      </dt>
      <dd>
        <p>
          Implementations of this conformance class <em class="rfc2119">MUST</em> implement the <code><a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-1"><code>ConsumedThing</code></a></code> interface and the <code>consume()</code> method on the <a href="#dfn-wot-api-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-api-object-2">WoT API object</a>.
        </p>
      </dd>
      <dt>
        <dfn id="dfn-wot-producer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Producer</dfn> <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-4">UA</a>
      </dt>
      <dd>
        <p>
          Implementations of this conformance class <em class="rfc2119">MUST</em> implement <code><a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-1"><code>ExposedThing</code></a></code> interface and the <code>produce()</code> method on the <a href="#dfn-wot-api-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-api-object-3">WoT API object</a>.
        </p>
      </dd>
      <dt>
        <dfn id="dfn-wot-discovery" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Discovery</dfn> <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-5">UA</a>
      </dt>
      <dd>
        <p>
          Implementations of this conformance class <em class="rfc2119">MUST</em> implement the
          <code><a href="#dom-thingdiscoveryprocess" class="internalDFN" data-link-type="idl" id="ref-for-dom-thingdiscoveryprocess-1"><code>ThingDiscoveryProcess</code></a></code> interface, the
          <code>discover()</code> method, the <code>exploreDirectory()</code> method,
          and the <code>requestThingDescription()</code> method on the
          <a href="#dfn-wot-api-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-api-object-4">WoT API object</a>.
        </p>
      </dd>
    </dl>
    <p>
      These conformance classes <em class="rfc2119">MAY</em> be implemented in a single <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-6">UA</a>.
    </p>
    <p>
      This specification can be used for implementing the WoT Scripting API in multiple programming languages. The interface definitions are specified in [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>].
    </p>
    <p>
      The <a href="#dfn-ua" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ua-7">UA</a> may be implemented in the browser, or in a separate runtime environment, such as <a href="https://nodejs.org/en/">Node.js</a> or in small embedded runtimes.
    </p>
    <p>
      Implementations that use ECMAScript executed in a browser to implement the APIs defined in this document <em class="rfc2119">MUST</em> implement them in a manner consistent with the ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>].
    </p>
    <p>
      Implementations that use TypeScript or ECMAScript in a runtime to implement the APIs defined in this document <em class="rfc2119">MUST</em> implement them in a manner consistent with the TypeScript Bindings defined in the TypeScript specification [<cite><a class="bibref" data-link-type="biblio" href="#bib-typescript" title="TypeScript Language Specification">TYPESCRIPT</a></cite>].
    </p>
  </section>
  
  <section id="terminology-and-conventions"><div class="header-wrapper"><h2 id="x4-terminology-and-conventions"><bdi class="secno">4. </bdi>Terminology and conventions</h2><a class="self-link" href="#terminology-and-conventions" aria-label="Permalink for Section 4."></a></div> 
    <p>
      The generic WoT terminology is defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-architecture" title="Web of Things (WoT) Architecture 1.1">WOT-ARCHITECTURE</a></cite>]: <dfn data-lt="Things|Thing" id="dfn-things" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Thing</dfn>, <dfn data-lt="Thing Descriptions|Thing Description" data-plurals="thing descriptions" id="dfn-thing-descriptions" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Thing Description</dfn> (in short <dfn id="dfn-td" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">TD</dfn>), <dfn id="dfn-partial-td" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Partial TD</dfn>, <dfn id="dfn-web-of-things" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Web of Things</dfn> (in short <b><i>WoT</i></b>),  <dfn id="dfn-wot-interface" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Interface</dfn>, <dfn data-plurals="protocol binding" id="dfn-protocol-bindings" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Protocol Bindings</dfn>, <dfn id="dfn-wot-runtime" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Runtime</dfn>, <dfn data-lt="consume|consume a TD|consuming a TD|Consuming a Thing Description" id="dfn-consume" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Consuming a Thing Description</dfn>, <dfn id="dfn-td-directory" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">TD Directory</dfn>, <dfn data-lt="Properties|Property" data-plurals="properties" id="dfn-properties" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Property</dfn>, <dfn data-lt="Actions|Action" data-plurals="actions" id="dfn-actions" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Action</dfn>, <dfn data-lt="Events|WoT-Event|Event" data-plurals="events" id="dfn-events" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Event</dfn>,
      <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#dataschema">
        <dfn id="dfn-dataschema" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">DataSchema</dfn></a>, <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#form"><dfn data-lt="Forms|Form" data-plurals="forms" id="dfn-forms" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Form</dfn></a>,
        <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#securityscheme"><dfn id="dfn-securityscheme" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">SecurityScheme</dfn></a>, <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#nosecurityscheme"><dfn id="dfn-nosecurityscheme" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">NoSecurityScheme</dfn></a> etc.
    </p>
    <p>
      <dfn data-plurals="WoT Interactions|wot interactions" id="dfn-wot-interaction" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT Interaction</dfn> is a synonym for <a href="https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/#dfn-interaction-affordance"><dfn id="dfn-interaction-affordance" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Interaction Affordance</dfn></a>.
      An <a href="#dfn-interaction-affordance" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-interaction-affordance-1">Interaction Affordance</a> (or shortly, affordance) is the term used in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>]
      when referring to <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-29">Thing</a> capabilities, as explained in
      <a href="https://github.com/w3c/wot-thing-description/issues/282">TD issue 282</a>.
      However, this term is not well understood outside the <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-4">TD</a> semantic context.
      Hence for the sake of readability, this document will use the previous term
      <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-3">WoT interaction</a> or, simply, <em>interaction</em> instead.
    </p>
    <p>
      <dfn id="dfn-wot-network-interface" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT network interface</dfn> synonym for <a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interface-5">WoT Interface</a>.
    </p>
    <p>
      <dfn id="dfn-json-schema" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">JSON Schema</dfn> is defined in <a href="https://json-schema.org/specification.html">these specifications</a>.
    </p>
	
    <p>
      <dfn id="dfn-promise" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code>Promise</code></a></dfn>,
      <dfn id="dfn-error" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-error-objects">Error</a></dfn>,
      <dfn id="dfn-json" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-json-object">JSON</a></dfn>,
      <dfn id="dfn-json-stringify" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-json.stringify">JSON.stringify</a></dfn>,
      <dfn id="dfn-json-parse" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-json.parse">JSON.parse</a></dfn>,
      <dfn id="dfn-internal-method" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal method</a></dfn> and
      <dfn data-plurals="internal slots" id="dfn-internal-slot" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a></dfn> are defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript" title="ECMAScript Language Specification">ECMASCRIPT</a></cite>].
    </p>
	
  </section>

  <section data-cite="webidl" id="the-thingdescription-type"><div class="header-wrapper"><h2 id="x5-the-thingdescription-type"><bdi class="secno">5. </bdi>The <dfn data-export="" data-dfn-type="typedef" id="dom-thingdescription" data-idl="typedef" data-title="ThingDescription" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ThingDescription</code></dfn> type</h2><a class="self-link" href="#the-thingdescription-type" aria-label="Permalink for Section 5."></a></div>
    
    <pre class="idl def" id="webidl-1625777409"><span class="idlHeader"><a class="self-link" href="#webidl-1625777409">WebIDL</a></span><code><span data-idl="" class="idlTypedef" id="idl-def-thingdescription" data-title="ThingDescription">typedef<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-thingdescription" id="ref-for-dom-thingdescription-1"><code>ThingDescription</code></a>;</span></code></pre>

    <p>
      Represents a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-10">Thing Description</a> (<a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-5">TD</a>) as
      <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#">defined</a> in
      [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>]. It is expected to be
      a <a href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">parsed JSON object</a> that is validated using <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#json-schema-for-validation">JSON Schema validation</a>.
    </p>
    <section id="fetching-a-thing-description"><div class="header-wrapper"><h3 id="x5-1-fetching-a-thing-description"><bdi class="secno">5.1 </bdi> Fetching a Thing Description</h3><a class="self-link" href="#fetching-a-thing-description" aria-label="Permalink for Section 5.1"></a></div> 
      <p>
        Fetching a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-6">TD</a> given a URL should be done with an external method, such as the <a href="https://fetch.spec.whatwg.org/#fetch-api">Fetch API</a> or a HTTP client library, which offer already standardized options on specifying fetch details.
      </p>
      <div class="example" id="example-fetching-a-thing-description">
        <div class="marker">
    <a class="self-link" href="#example-fetching-a-thing-description">Example<bdi> 1</bdi></a><span class="example-title">: Fetching a Thing Description</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'https://tds.mythings.biz/sensor11'</span>);
  <span class="hljs-comment">// ... additional checks possible on res.headers</span>
  <span class="hljs-keyword">let</span> td = <span class="hljs-keyword">await</span> res.json();
  <span class="hljs-keyword">let</span> thing = <span class="hljs-keyword">await</span> WOT.consume(td);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Thing name: "</span> + thing.getThingDescription().title);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Fetching TD failed"</span>, err.message);
}</code></pre>
      </div>
    </section>

    <section id="expanding-a-thing-description"><div class="header-wrapper"><h3 id="x5-2-expanding-a-thing-description"><bdi class="secno">5.2 </bdi>Expanding a Thing Description</h3><a class="self-link" href="#expanding-a-thing-description" aria-label="Permalink for Section 5.2"></a></div> 
      <p>
        Note that the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification allows using a shortened <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-11">Thing Description</a>
        by the means of <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#sec-default-values">defaults</a> and requiring clients to expand them with default values specified in the
        <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification for the properties that are not explicitly defined in a given
        <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-7">TD</a>.
      </p>
      <div>
        To <dfn id="dfn-expand-a-td" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">expand a TD</dfn> given <var data-type="ThingDescription">td</var>, run the following steps:
        <ol>
          <li>
            For each item in the <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#sec-default-values">TD default values</a> table from [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>], if the term is not defined in <var data-type="ThingDescription">td</var>, add the term definition with the default value specified in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>].
          </li>
        </ol>
      </div>
    </section>

    <section id="validating-a-thing-description"><div class="header-wrapper"><h3 id="x5-3-validating-a-thing-description"><bdi class="secno">5.3 </bdi>Validating a Thing Description</h3><a class="self-link" href="#validating-a-thing-description" aria-label="Permalink for Section 5.3"></a></div> 
      <p>
        The [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>] specification defines how a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-8">TD</a> should be validated.
        Therefore, this API expects the <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-2"><code>ThingDescription</code></a> objects be validated before used as parameters. This specification defines a basic <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-9">TD</a> validation as follows.
      </p>
      <div>
        To <dfn id="dfn-validate-a-td" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate a TD</dfn> given <var data-type="ThingDescription">td</var>, run the following steps:
        <ol>
          <li>
            If <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#json-schema-for-validation">JSON Schema
            validation</a> fails on <var data-type="ThingDescription">td</var>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a "<a data-link-type="idl" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>" and stop.
          </li>
        </ol>
        <div class="note" id="issue-container-generatedID-5"><div role="heading" class="ednote-title marker" id="h-ednote-3" aria-level="4"><span>Editor's note</span><span class="issue-label">: Handling default values</span></div><p class="">
          Additional steps may be added to fill the default values of mandatory fields.
        </p></div>
      </div>
    </section>
  </section>
  <section data-dfn-for="WOT" data-cite="webidl" id="the-wot-namespace"><div class="header-wrapper"><h2 id="x6-the-wot-namespace"><bdi class="secno">6. </bdi>The <dfn data-export="" data-dfn-type="namespace" id="dom-wot" data-idl="namespace" data-title="WOT" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>WOT</code></dfn> namespace</h2><a class="self-link" href="#the-wot-namespace" aria-label="Permalink for Section 6."></a></div>
  
  <p>
    Defines the <dfn id="dfn-wot-api-object" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">WoT API object</dfn> as a singleton and contains the API
    methods, grouped by conformance classes.
  </p>
  <pre class="idl def" id="webidl-1274931079"><span class="idlHeader"><a class="self-link" href="#webidl-1274931079">WebIDL</a></span><code><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-1"><code>WOT</code></a> {<span class="idlSectionComment">
  // methods defined in UA conformance classes
</span>};</span></code></pre>
  <section id="the-consume-method"><div class="header-wrapper"><h3 id="x6-1-the-consume-method"><bdi class="secno">6.1 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-wot-consume" data-idl="operation" data-title="consume()" data-dfn-for="WOT" data-type="Promise" data-lt="consume()|consume(td)" data-local-lt="WOT.consume|WOT.consume()|consume" tabindex="0" aria-haspopup="dialog"><code>consume()</code></dfn> method</h3><a class="self-link" href="#the-consume-method" aria-label="Permalink for Section 6.1"></a></div> 
    <pre class="idl def" id="webidl-584946864"><span class="idlHeader"><a class="self-link" href="#webidl-584946864">WebIDL</a></span><code><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-2"><code>WOT</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wot-consume-td" data-title="consume" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-2"><code>ConsumedThing</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-consume" id="ref-for-dom-wot-consume-1"><code>consume</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-3"><code>ThingDescription</code></a></span> <span class="idlParamName">td</span>);</span>
};</span></code></pre>
    <div>
      Belongs to the <a href="#dfn-wot-consumer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-consumer-1">WoT Consumer</a> conformance class. Expects an <var data-type="ThingDescription">td</var> argument and returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves with a <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-3"><code>ConsumedThing</code></a> object that represents a client interface to operate with the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-30">Thing</a>. The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
        </li>
        <li>
          Let <var data-type="ConsumedThing">thing</var> be a new <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-4"><code>ConsumedThing</code></a> object constructed from <var data-type="ThingDescription">td</var>.
        </li>
        <li>
          Set up the <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-4">WoT Interactions</a> based on introspecting <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-10">td</a> as explained in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>] and [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-protocol-bindings" title="Web of Things (WoT) Binding Templates">WOT-PROTOCOL-BINDINGS</a></cite>]. Make a request to the underlying platform to initialize the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-1">Protocol Bindings</a>.
          <div class="note" id="issue-container-generatedID-6"><div role="heading" class="ednote-title marker" id="h-ednote-4" aria-level="4"><span>Editor's note</span></div><p class="">
            Implementations encapsulate the complexity of how to use the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-2">Protocol Bindings</a> for implementing <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-5">WoT interactions</a>.
            In the future elements of that could be standardized.
          </p></div>
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="ConsumedThing">thing</var>.
        </li>
      </ol>
      <div class="note" id="issue-container-generatedID-7"><div role="heading" class="ednote-title marker" id="h-ednote-5" aria-level="4"><span>Editor's note</span></div><p class="">
        Note the difference between constructing <a href="#dom-consumedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-consumedthing-5"><code>ConsumedThing</code></a> and using
        the <code>consume()</code> method: the latter also initializes the protocol
        bindings, whereas a simple constructed object will not have <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-6">WoT Interactions</a>
        initialized until they are invoked.
      </p></div>
    </div>
  </section>

  <section id="the-produce-method"><div class="header-wrapper"><h3 id="x6-2-the-produce-method"><bdi class="secno">6.2 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-wot-produce" data-idl="operation" data-title="produce()" data-dfn-for="WOT" data-type="Promise" data-lt="produce()|produce(init)" data-local-lt="WOT.produce|WOT.produce()|produce" tabindex="0" aria-haspopup="dialog"><code>produce()</code></dfn> method</h3><a class="self-link" href="#the-produce-method" aria-label="Permalink for Section 6.2"></a></div> 
    <pre class="idl def" id="webidl-631108207"><span class="idlHeader"><a class="self-link" href="#webidl-631108207">WebIDL</a></span><code><span data-idl="" class="idlTypedef" id="idl-def-exposedthinginit" data-title="ExposedThingInit">typedef<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <dfn data-export="" data-dfn-type="typedef" id="dom-exposedthinginit" data-idl="typedef" data-title="ExposedThingInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>ExposedThingInit</code></dfn>;</span><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">

partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-3"><code>WOT</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wot-produce-init" data-title="produce" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-2"><code>ExposedThing</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-produce" id="ref-for-dom-wot-produce-1"><code>produce</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-exposedthinginit" class="internalDFN" id="ref-for-dom-exposedthinginit-1"><code>ExposedThingInit</code></a></span> <span class="idlParamName">init</span>);</span>
};</span></code></pre>
    <div>
      Belongs to the <a href="#dfn-wot-producer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-producer-1">WoT Producer</a> conformance class. Expects a <var data-type="ExposedThingInit">init</var> argument and returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a>
      that resolves with an <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-3"><code>ExposedThing</code></a> object that extends <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-6"><code>ConsumedThing</code></a> with a server interface,
      i.e. the ability to define request handlers. The <var data-type="ExposedThingInit">init</var> object is an instance of the <a href="#dom-exposedthinginit" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthinginit-2"><code>ExposedThingInit</code></a> type.
      Specifically, an <a href="#dom-exposedthinginit" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthinginit-3"><code>ExposedThingInit</code></a> value is a dictionary used for the initialization of an <a href="#dom-exposedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthing-4"><code>ExposedThing</code></a> and
      it represents a <a href="#dfn-partial-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-partial-td-1">Partial TD</a> as described in the [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-architecture" title="Web of Things (WoT) Architecture 1.1">WOT-ARCHITECTURE</a></cite>]. As such, it has the same
      structure of a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-12">Thing Description</a> but it may omit some information.
      The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
        </li>
        <li>
          Let <var data-type="ExposedThing">thing</var> be a new <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-5"><code>ExposedThing</code></a> object constructed with <var data-type="ExposedThingInit">init</var>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="ExposedThing">thing</var>.
        </li>
      </ol>
    </div>
    <section id="expand-an-exposedthinginit"><div class="header-wrapper"><h4 id="x6-2-1-expand-an-exposedthinginit"><bdi class="secno">6.2.1 </bdi>Expand an ExposedThingInit</h4><a class="self-link" href="#expand-an-exposedthinginit" aria-label="Permalink for Section 6.2.1"></a></div>
      
      To <dfn id="dfn-expand-an-exposedthinginit" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">expand an ExposedThingInit</dfn> given <var data-type="ExposedThingInit">init</var> and obtain a valid <var data-type="ThingDescription">td</var> as a result, run the following steps:
      <ol class="algorithm">
        <li>
          Run <a href="#dfn-validate-an-exposedthinginit" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-validate-an-exposedthinginit-1">validate an ExposedThingInit</a> on <var data-type="ExposedThingInit">init</var>. If that fails,
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.</li>
        <li>
          Let <var data-type="ThingDescription">td</var> be the result of running <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-clone">clone</a> given <var data-type="ExposedThingInit">init</var>.
        </li>
        <li>
          For each <var data-type="SecurityScheme">scheme</var> in <var data-type="ThingDescription">td</var>.[<code>"securityDefinitions"</code>], make a request to the underlying platform to check if it is supported by at least one <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-3">Protocol Binding</a>. If not, then remove <var data-type="SecurityScheme">scheme</var> from <var data-type="ThingDescription">td</var>.
        </li>
        <li>
          If <var data-type="ThingDescription">td</var>.[<code>"security"</code>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a> in <var data-type="ThingDescription">td</var>.[<code>"securityDefinitions"</code>], then remove <code>security</code> from <var data-type="ThingDescription">td</var>.
        </li>
        <li>For each <var>affordance</var> in <var data-type="ThingDescription">td</var>.properties, <var data-type="ThingDescription">td</var>.actions and <var data-type="ThingDescription">td</var>.events, run the following sub-steps:
          <ol>
            <li>For each <var data-type="Form">form</var> in <var>affordance</var>.forms:
              <ol>
                <li>
                  If <var data-type="Form">form</var>.<var data-type="string">contentType</var> is not recognized by the runtime as valid remove <var data-type="string">contentType</var> from <var data-type="Form">form</var>.
                </li>
                <li>
                  If <var data-type="Form">form</var>.<var data-type="URL">href</var> has an unknown schema, remove <var data-type="URL">href</var> from <var data-type="Form">form</var>.
                </li>
                <li>
                  If <var data-type="Form">form</var>.<var data-type="URL">href</var> is absolute and its <code>authority</code> it is not recognized by the runtime as valid, remove <var data-type="URL">href</var> from <var data-type="Form">form</var>.
                </li>
                <li>
                  If <var data-type="Form">form</var>.<var data-type="URL">href</var> is already in use by other <a href="#dom-exposedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthing-6">ExposedThings</a>, remove <var data-type="URL">href</var> from <var data-type="Form">form</var>.
                </li>
              </ol>
            </li>
          </ol>
        </li>
        <li>Search for missing required properties in <var data-type="ThingDescription">td</var> accordingly to
          <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#json-schema-for-validation">TD JSON
            Schema</a>.
          <div class="note" id="issue-container-generatedID-8"><div role="heading" class="ednote-title marker" id="h-ednote-6" aria-level="5"><span>Editor's note</span></div><p class="">The editors find this step vague. It will be improved or removed in the next iteration. </p></div>
        </li>
        <li>For each <var>missing</var> property run these sub-steps:
          <ol>
            <li>If <var>missing</var> is <code>title</code> generate a runtime unique name and assign to <code>title</code>.</li>
            <li>If <var>missing</var> is <code>@context</code> assign the latest supported Thing Description context URI.</li>
            <li>If <var>missing</var> is <code>instance</code> assign the string <code>1.0.0</code>.</li>
            <li>If <var>missing</var> is <code>forms</code> generate a list of <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-1">Forms</a> using the available <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-4">Protocol Bindings</a> and content types
              encoders. Then assign the obtained list to <code>forms</code>.</li>
            <li>If <var>missing</var> is <code>security</code> assign the label of the first supported <a href="#dfn-securityscheme" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-securityscheme-1">SecurityScheme</a> in <code>securityDefinitions</code> field.
            If no <a href="#dfn-securityscheme" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-securityscheme-2">SecurityScheme</a> is found generate a <a href="#dfn-nosecurityscheme" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nosecurityscheme-1">NoSecurityScheme</a> called <code>nosec</code> and assign the string <code>nosec</code>
          to <code>security</code>.
          <div class="issue" id="issue-container-number-1"><div role="heading" class="issue-title marker" id="h-issue" aria-level="5"><span>Issue 1</span></div><p class="">The discussion about how to properly generate a value for <code>security</code> is still open.
            See issue <a href="https://github.com/w3c/wot-scripting-api/issues/299">#299</a> </p></div>
          </li>
            <li>If <var>missing</var> is <code>href</code> define <var>formStub</var> as the partial <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-2">Form</a> that does not have <code>href</code>. Generate a valid <var data-type="URL">url</var> using the first <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-5">Protocol Binding</a>
              that satisfy the requirements of <var>formStub</var>. Assign <var data-type="URL">url</var> to <code>href</code>. If not <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-6">Protocol Binding</a> can be found remove <var>formStub</var> from <var data-type="ThingDescription">td</var>. </li>
            <li>Add <var>missing</var> to <var data-type="ThingDescription">td</var> with <var>value</var> as value</li>
          </ol>
        </li>
        <li>Run <a href="#dfn-validate-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-validate-a-td-1">validate a TD</a> on <var data-type="ThingDescription">td</var>. If that fails re-<a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> the error and stop</li>
        <li>Return <var data-type="ThingDescription">td</var></li>
      </ol>
    </section>
    <section id="validating-an-exposedthinginit"><div class="header-wrapper"><h4 id="x6-2-2-validating-an-exposedthinginit"><bdi class="secno">6.2.2 </bdi>Validating an ExposedThingInit</h4><a class="self-link" href="#validating-an-exposedthinginit" aria-label="Permalink for Section 6.2.2"></a></div>
      
      To <dfn id="dfn-validate-an-exposedthinginit" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate an ExposedThingInit</dfn> given <var data-type="ExposedThingInit">init</var>, run the following steps:
      <ol class="algorithm">
        <li>
          Parse <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#json-schema-for-validation">TD JSON
            Schema</a>
          and load it in object called <var data-type="object">exposedThingInitSchema</var>
        </li>
        <li>let <var data-type="Array">optional</var> be a list containing the following strings: <code>title</code>, <code>@context</code>,
        <code>instance</code>, <code>forms</code>, <code>security</code>, and <code>href</code>. </li>
        <li>
          For each property and sub-property <var>key</var> in <var data-type="object">exposedThingInitSchema</var> equals to <code>required</code> execute the following steps:
          <ol>
            <li>if <var>key</var> <var>value</var> is an <code>Array</code> then remove all its elements equal to the elements in <var data-type="Array">optional</var></li>
            <li>if <var>key</var> <var>value</var> is a <code>string</code> then if <var>value</var> is equal to one of the elements in <var data-type="Array">optional</var> remove <var>key</var> from <var data-type="object">exposedThingInitSchema</var></li>
          </ol>
        </li>
        <li>Return the result of <a href="#dfn-validating-an-object-with-json-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-validating-an-object-with-json-schema-1">validating an object with JSON Schema</a> given <var data-type="ExposedThingInit">init</var> and <var data-type="object">exposedThingInitSchema</var>.
          <div class="note" id="issue-container-generatedID-9"><div role="heading" class="ednote-title marker" id="h-ednote-7" aria-level="5"><span>Editor's note</span></div><p class="">The <dfn id="dfn-validating-an-object-with-json-schema" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validating an object with JSON Schema</dfn> steps are still under discussion.
            Currently this specification reference to the validation process of JSONSchema. Please
            follow this <a href="https://json-schema.org/draft/2019-09/json-schema-validation.html">document</a>
            when validating <var data-type="ExposedThingInit">init</var> with <var data-type="object">exposedThingInitSchema</var>. Notice that the working group is evaluating an alternative formal approach.
          </p></div>
        </li>
      </ol>
    </section>
  </section>

  <section id="the-discover-method"><div class="header-wrapper"><h3 id="x6-3-the-discover-method"><bdi class="secno">6.3 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-wot-discover" data-idl="operation" data-title="discover()" data-dfn-for="WOT" data-type="Promise" data-lt="discover()|discover(filter)" data-local-lt="WOT.discover|WOT.discover()|discover" tabindex="0" aria-haspopup="dialog"><code>discover()</code></dfn> method</h3><a class="self-link" href="#the-discover-method" aria-label="Permalink for Section 6.3"></a></div> 
    <pre class="idl def" id="webidl-1851924891"><span class="idlHeader"><a class="self-link" href="#webidl-1851924891">WebIDL</a></span><code><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-4"><code>WOT</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wot-discover-filter" data-title="discover" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-2"><code>ThingDiscoveryProcess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-discover" id="ref-for-dom-wot-discover-1"><code>discover</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-1"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span>
};</span></code></pre>
    <div>
      Belongs to the <a href="#dfn-wot-discovery" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-discovery-1">WoT Discovery</a> conformance class. Starts the discovery process that will provide <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-4"><code>ThingDescription</code></a> objects for <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-13">Thing Description</a>s that match an optional <var data-type="ThingFilter">filter</var> argument of type <a data-link-type="idl" data-lt="ThingFilter" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-2"><code>ThingFilter</code></a>. The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
        </li>
        <li>
          If discovery is not supported by the implementation, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
          with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
        </li>
        <li>
          Let <var data-type="ThingDiscoveryProcess">discovery</var> be a new <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-3"><code>ThingDiscoveryProcess</code></a> object.
        </li>
        <li>
          Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[filter]]" href="#dfn-filter" class="internalDFN" id="ref-for-dfn-filter-1"><code>[[filter]]</code></a> to <var data-type="ThingFilter">filter</var>.
        </li>
        <li>
          Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[url]]" href="#dfn-url" class="internalDFN" id="ref-for-dfn-url-1"><code>[[url]]</code></a> to <code>undefined</code>.
        </li>
        <li>
          If filters in general are not supported by the implementation and
          <var data-type="ThingFilter">filter</var> is not <code>undefined</code> or <code>null</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
          with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
        </li>
        <li>
          If discovery cannot be started by the underlying platform,
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="OperationError" data-type="exception" href="https://webidl.spec.whatwg.org/#operationerror"><code>OperationError</code></a> and stop.
        </li>
        <li>
          Request the underlying platform to start the <a href="#dfn-discovery-process" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-discovery-process-1">discovery process</a>
          by any means supported and provisioned in the <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-4">WoT Runtime</a> for which
          the script has access to, passing <var data-type="ThingDiscoveryProcess">discovery</var> to it.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="ThingDiscoveryProcess">discovery</var>.
        </li>
      </ol>
    </div>
  </section>

  <section id="the-exploredirectory-method"><div class="header-wrapper"><h3 id="x6-4-the-exploredirectory-method"><bdi class="secno">6.4 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-wot-exploredirectory" data-idl="operation" data-title="exploreDirectory()" data-dfn-for="WOT" data-type="Promise" data-lt="exploreDirectory()|exploreDirectory(url)|exploreDirectory(url, filter)" data-local-lt="WOT.exploreDirectory|WOT.exploreDirectory()|exploreDirectory" tabindex="0" aria-haspopup="dialog"><code>exploreDirectory()</code></dfn> method</h3><a class="self-link" href="#the-exploredirectory-method" aria-label="Permalink for Section 6.4"></a></div> 
    <pre class="idl def" id="webidl-1505638310"><span class="idlHeader"><a class="self-link" href="#webidl-1505638310">WebIDL</a></span><code><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-5"><code>WOT</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wot-exploredirectory-url-filter" data-title="exploreDirectory" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-4"><code>ThingDiscoveryProcess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-exploredirectory" id="ref-for-dom-wot-exploredirectory-1"><code>exploreDirectory</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>,
      optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-3"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span>
};</span></code></pre>
    <div>
      Belongs to the <a href="#dfn-wot-discovery" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-discovery-2">WoT Discovery</a> conformance class. Starts the discovery process that given a <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-3">TD Directory</a> URL, will provide <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-5"><code>ThingDescription</code></a> objects for <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-14">Thing Description</a>s that match an optional <var data-type="ThingFilter">filter</var> argument of type <a data-link-type="idl" data-lt="ThingFilter" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-4"><code>ThingFilter</code></a>. The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
        </li>
        <li>
          If directory discovery is not supported by the implementation, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
          with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
        </li>
        <li>
          Let <var data-type="ThingDiscoveryProcess">discovery</var> be a new <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-5"><code>ThingDiscoveryProcess</code></a> object.
        </li>
        <li>
          Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[url]]" href="#dfn-url" class="internalDFN" id="ref-for-dfn-url-2"><code>[[url]]</code></a> to <var data-type="USVString">url</var>.
        </li>
        <li>
          Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[filter]]" href="#dfn-filter" class="internalDFN" id="ref-for-dfn-filter-2"><code>[[filter]]</code></a> to <var data-type="ThingFilter">filter</var>.
        </li>
        <li>
          Request the underlying platform to start the directory discovery process.
          <div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div><p class="">
            This is a placeholder for more details in the discovery algorithm.
            Implementations should follow the procedures described in the
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-discovery" title="Web of Things (WoT) Discovery">WOT-DISCOVERY</a></cite>] and [WOT-PROTOCOL-BINDINGS] specifications.
            Some normative steps are indicated below.
          </p></div>
          <ol>
            <li>
              If <var data-type="USVString">url</var> is not a <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-4">TD Directory</a> or if the underlying
              implementation cannot support the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-7">Protocol Binding</a>
              indicated by <var data-type="USVString">url</var>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
              with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and terminate these steps.
            </li>
            <li>
              If filters in general are not supported by the implementation and
              <var data-type="ThingFilter">filter</var> is not <code>undefined</code> or <code>null</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
              with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
            </li>
            <li>
              Run the <a href="#dfn-discovery-process" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-discovery-process-2">discovery process</a> given <var data-type="ThingDiscoveryProcess">discovery</var>.
              <div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><p class="">
                From this point on, errors are recorded only on
                <a data-link-type="idl" href="#dom-thingdiscoveryprocess-error" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-error-1"><code>error</code></a>, but don't affect <var data-type="Promise">promise</var> any longer.
              </p></div>
            </li>
          </ol>
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="ThingDiscoveryProcess">discovery</var>.
        </li>
      </ol>
    </div>
  </section>

  <section id="the-requestthingdescription-method"><div class="header-wrapper"><h3 id="x6-5-the-requestthingdescription-method"><bdi class="secno">6.5 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-wot-requestthingdescription" data-idl="operation" data-title="requestThingDescription()" data-dfn-for="WOT" data-type="Promise" data-lt="requestThingDescription()|requestThingDescription(url)" data-local-lt="WOT.requestThingDescription|WOT.requestThingDescription()|requestThingDescription" tabindex="0" aria-haspopup="dialog"><code>requestThingDescription()</code></dfn> method</h3><a class="self-link" href="#the-requestthingdescription-method" aria-label="Permalink for Section 6.5"></a></div> 
    <pre class="idl def" id="webidl-1379080419"><span class="idlHeader"><a class="self-link" href="#webidl-1379080419">WebIDL</a></span><code><span data-idl="" class="idlNamespace" id="idl-def-wot" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-6"><code>WOT</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wot-requestthingdescription-url" data-title="requestThingDescription" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-6"><code>ThingDescription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-requestthingdescription" id="ref-for-dom-wot-requestthingdescription-1"><code>requestThingDescription</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span>
};</span></code></pre>
    <div>
      Belongs to the <a href="#dfn-wot-discovery" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-discovery-3">WoT Discovery</a> conformance class.
      Requests a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-15">Thing Description</a> from the given URL.
      The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If invoking this method is not allowed for the current scripting
          context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a>
          and stop.
        </li>
        <li>
          If fetching a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-16">Thing Description</a> is not supported by the
          implementation, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and
          stop.
        </li>
        <li>
          Let <var data-type="ThingDescription">td</var> be the result of making a request to the underlying
          platform to retrieve the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-17">Thing Description</a> using the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-8">Protocol Binding</a> specified by <var>url</var>.
          If retrieving <var data-type="ThingDescription">td</var> fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and
          stop.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="ThingDescription">td</var>.
        </li>
      </ol>
    </div>
  </section>

  </section> 

  <section data-cite="webidl" id="handling-interaction-data"><div class="header-wrapper"><h2 id="x7-handling-interaction-data"><bdi class="secno">7. </bdi>Handling interaction data</h2><a class="self-link" href="#handling-interaction-data" aria-label="Permalink for Section 7."></a></div> 
  <p>
    As specified in the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification, <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-7">WoT interactions</a> extend <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-1">DataSchema</a>
    and include a number of possible <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-3">Form</a>s, out of which one is selected
    for the interaction. The
    <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#form">
    Form</a> contains a <code>contentType</code> to describe the data.
    For certain content types, a <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-2">DataSchema</a> is defined, based on
    <a href="#dfn-json-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-json-schema-1">JSON Schema</a>, making possible to represent these contents as
    JavaScript types and eventually set range constraints on the data.
  </p>

  <section data-dfn-for="InteractionInput" id="the-interactioninput-type"><div class="header-wrapper"><h3 id="x7-1-the-interactioninput-type"><bdi class="secno">7.1 </bdi>The <dfn data-export="" data-dfn-type="typedef" id="dom-interactioninput" data-idl="typedef" data-title="InteractionInput" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>InteractionInput</code></dfn> type</h3><a class="self-link" href="#the-interactioninput-type" aria-label="Permalink for Section 7.1"></a></div>
    
    <pre class="idl def" id="webidl-1492583996"><span class="idlHeader"><a class="self-link" href="#webidl-1492583996">WebIDL</a></span><code><span data-idl="" class="idlTypedef" id="idl-def-dataschemavalue" data-title="DataSchemaValue">typedef<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-dataschemavalue" id="ref-for-dom-dataschemavalue-1"><code>DataSchemaValue</code></a>;</span><span data-idl="" class="idlTypedef" id="idl-def-interactioninput" data-title="InteractionInput">
typedef<span class="idlType"> (<a data-link-type="idl" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream">ReadableStream</a> or <a data-link-type="idl" href="#dom-dataschemavalue" class="internalDFN" id="ref-for-dom-dataschemavalue-2"><code>DataSchemaValue</code></a>)</span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-interactioninput" id="ref-for-dom-interactioninput-1"><code>InteractionInput</code></a>;</span></code></pre>
    <p>
      Belongs to the <a href="#dfn-wot-consumer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-consumer-2">WoT Consumer</a> conformance class and represents the
      <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-8">WoT Interaction</a> data provided by application scripts to the UA.
    </p>
    <p>
      <dfn data-export="" data-dfn-type="typedef" id="dom-dataschemavalue" data-idl="typedef" data-title="DataSchemaValue" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>DataSchemaValue</code></dfn> is an
      <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-data-types-and-values">ECMAScript value</a> that is accepted for <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-3">DataSchema</a> defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WoT-TD</a></cite>].
	  The possible values <em class="rfc2119">MUST</em> be of type <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-language-types-null-type">null</a>, <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-language-types-boolean-type">boolean</a>, <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-language-types-number-type">number</a>, <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-language-types-string-type">string</a>, <a href="https://tc39.es/ecma262/multipage/#sec-array-objects">array</a>, or <a href="https://tc39.es/ecma262/multipage/#sec-object-type">object</a>.
    </p>
    <p>
      <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> is meant to be used for <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-9">WoT Interactions</a> that
      don't have a <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-4">DataSchema</a> in the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-18">Thing Description</a>, only a
      <a data-link-type="idl" data-lt="Form" href="#dfn-forms" class="internalDFN" id="ref-for-dfn-forms-4"><code>Form</code></a>'s <code>contentType</code> that can be represented by a stream.
    </p>
    <p>
      In practice, any
      <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-data-types-and-values">ECMAScript value</a> may be used for <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-10">WoT Interactions</a> that have a
      <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-5">DataSchema</a> defined in the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-19">Thing Description</a>,
      or which can be mapped by implementations to the <a data-link-type="idl" data-lt="Form" href="#dfn-forms" class="internalDFN" id="ref-for-dfn-forms-5"><code>Form</code></a>'s <code>contentType</code>
      defined in the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-20">Thing Description</a>.
    </p>
    <p>
      The algorithms in this document specify how exactly input data is used in
      <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-11">WoT Interactions</a>.
    </p>
  </section>

  <section data-dfn-for="InteractionOutput" id="the-interactionoutput-interface"><div class="header-wrapper"><h3 id="x7-2-the-interactionoutput-interface"><bdi class="secno">7.2 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-interactionoutput" data-idl="interface" data-title="InteractionOutput" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>InteractionOutput</code></dfn> interface</h3><a class="self-link" href="#the-interactionoutput-interface" aria-label="Permalink for Section 7.2"></a></div>
    
    <p>
      Belongs to the <a href="#dfn-wot-consumer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-consumer-3">WoT Consumer</a> conformance class.
      An <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-1"><code>InteractionOutput</code></a> object is always created by the implementations
      and exposes the data returned from <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-12">WoT Interactions</a> to application
      scripts.
    </p>
    <p>
      This interface exposes a convenience function which should cover
      the vast majority of IoT use cases: the
      <a href="#the-value-function">value()</a> function. Its implementation
      will inspect the data, parse it if adheres to a <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-6">DataSchema</a>, or
      otherwise fail early, leaving the underlying stream undisturbed so
      that application scripts could attempt reading the stream themselves, or
      handling the data as <a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>.
    </p>
    <pre class="idl def" id="webidl-1620335296"><span class="idlHeader"><a class="self-link" href="#webidl-1620335296">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-interactionoutput" data-title="InteractionOutput">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-interactionoutput" id="ref-for-dom-interactionoutput-2"><code>InteractionOutput</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-interactionoutput-data" data-title="data" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream">ReadableStream</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-data" id="ref-for-dom-interactionoutput-data-1"><code>data</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-interactionoutput-dataused" data-title="dataUsed" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-dataused" id="ref-for-dom-interactionoutput-dataused-1"><code>dataUsed</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-interactionoutput-form" data-title="form" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dfn-forms" class="internalDFN" id="ref-for-dfn-forms-6">Form</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-form" id="ref-for-dom-interactionoutput-form-1"><code>form</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-interactionoutput-schema" data-title="schema" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dfn-dataschema" class="internalDFN" id="ref-for-dfn-dataschema-7">DataSchema</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-schema" id="ref-for-dom-interactionoutput-schema-1"><code>schema</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-interactionoutput-arraybuffer" data-title="arrayBuffer" data-dfn-for="InteractionOutput"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-interactionoutput-arraybuffer" id="ref-for-dom-interactionoutput-arraybuffer-1"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-interactionoutput-value" data-title="value" data-dfn-for="InteractionOutput"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-dataschemavalue" class="internalDFN" id="ref-for-dom-dataschemavalue-3"><code>DataSchemaValue</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-interactionoutput-value" id="ref-for-dom-interactionoutput-value-1"><code>value</code></a>();</span>
};</span></code></pre>
    <p>
      The <dfn data-export="" data-dfn-type="attribute" id="dom-interactionoutput-data" data-idl="attribute" data-title="data" data-dfn-for="InteractionOutput" data-type="ReadableStream" data-lt="data" data-local-lt="InteractionOutput.data" tabindex="0" aria-haspopup="dialog"><code>data</code></dfn> property represents the raw payload in
      <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-13">WoT Interactions</a> as a <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a>, initially <code>null</code>.
    </p>
    <p>
      The <dfn data-export="" data-dfn-type="attribute" id="dom-interactionoutput-dataused" data-idl="attribute" data-title="dataUsed" data-dfn-for="InteractionOutput" data-type="boolean" data-lt="dataUsed" data-local-lt="InteractionOutput.dataUsed" tabindex="0" aria-haspopup="dialog"><code>dataUsed</code></dfn> property tells whether the data stream has
      been <a href="https://streams.spec.whatwg.org/#is-readable-stream-disturbed">

      disturbed</a>. Initially <code>false</code>.
    </p>
    <p>
      The <dfn data-plurals="forms" data-export="" data-dfn-type="attribute" id="dom-interactionoutput-form" data-idl="attribute" data-title="form" data-dfn-for="InteractionOutput" data-type="Form" data-lt="form" data-local-lt="InteractionOutput.form" tabindex="0" aria-haspopup="dialog"><code>form</code></dfn> attribute represents the <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-7">Form</a> selected from
      the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-21">Thing Description</a> for this <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-14">WoT Interaction</a>,
      initially <code>null</code>.
    </p>
    <p>
      The <dfn data-export="" data-dfn-type="attribute" id="dom-interactionoutput-schema" data-idl="attribute" data-title="schema" data-dfn-for="InteractionOutput" data-type="DataSchema" data-lt="schema" data-local-lt="InteractionOutput.schema" tabindex="0" aria-haspopup="dialog"><code>schema</code></dfn> attribute represents the <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-8">DataSchema</a>
      (defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WoT-TD</a></cite>]) of the payload as a <a data-link-type="idl" data-lt="JSON" href="https://tc39.es/ecma262/multipage/#sec-json-object"><code>JSON</code></a> object, initially <code>null</code>.
    </p>
    <p>
      The <dfn data-lt="value|[[value]]" id="dfn-value" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">[[value]]</dfn> internal slot represents the parsed value of
      the <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-15">WoT Interaction</a>, initially <code>undefined</code> (note that <code>null</code> is a
      valid value).
    </p>
    <section id="the-value-function"><div class="header-wrapper"><h4 id="x7-2-1-the-value-function"><bdi class="secno">7.2.1 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-interactionoutput-value" data-idl="operation" data-title="value()" data-dfn-for="InteractionOutput" data-type="Promise" data-lt="value()" data-local-lt="InteractionOutput.value|InteractionOutput.value()|value" tabindex="0" aria-haspopup="dialog"><code>value()</code></dfn> function</h4><a class="self-link" href="#the-value-function" aria-label="Permalink for Section 7.2.1"></a></div>
      Parses the data returned by the <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-16">WoT Interaction</a> and returns a
      value with the type described by the interaction <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-9">DataSchema</a>
      if that exists, or by the <code>contentType</code> of the interaction <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-8">Form</a>. The method <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If <var>this</var>.<a href="#dfn-value" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-value-1">[[value]]</a> is not <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var> with that value and stop.
        </li>
        <li>
          If <var>this</var>.<var>data</var> is not a <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> or if
          <var>dataUsed</var> is <code>true</code>, or if <var>form</var> is not an <a data-link-type="idl" data-lt="object" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><code>object</code></a> or if <var>schema</var> or its
          <var>type</var> are <code>null</code> or <code>undefined</code>, then
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotReadableError" data-type="exception" href="https://webidl.spec.whatwg.org/#notreadableerror"><code>NotReadableError</code></a> and stop.
        </li>
        <li>
          If <var>form</var>.<var>contentType</var> is not <code>application/json</code> and if a mapping is
          not available in the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-9">Protocol Bindings</a> from <var>form</var>.<var>contentType</var>
          to [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-schema" title="JSON Schema: A Media Type for Describing JSON Documents">JSON-SCHEMA</a></cite>], <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and
          stop.
        </li>
        <li>
          Let <var>reader</var> be the result of
          <a href="https://streams.spec.whatwg.org/#readablestream-get-a-reader">
          getting a reader</a> from <var>data</var>. If that threw an exception, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a>
          <var data-type="Promise">promise</var> with that exception and stop.
        </li>
        <li>
          Let <var>bytes</var> be the result of <a href="https://streams.spec.whatwg.org/#readablestream-get-a-reader">
          reading all bytes</a> from <var>data</var> with <var>reader</var>.
        </li>
        <li>
          Set <var>dataUsed</var> to <code>true</code>.
        </li>
        <li>
          If <var>form</var>.<var>contentType</var> is not <code>application/json</code> and if a mapping is
          available in the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-10">Protocol Bindings</a> from <var>form</var>.<var>contentType</var>
          to [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-schema" title="JSON Schema: A Media Type for Describing JSON Documents">JSON-SCHEMA</a></cite>], transform <var>bytes</var> with that mapping.
        </li>
        <li>
          Let <var>json</var> be the result of running <a data-type="dfn" href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">parse JSON from bytes</a> on
          <var>bytes</var>. If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that exception and
          stop.
        </li>
        <li>
          Set <a href="#dfn-value" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-value-2">[[value]]</a> to the result of running <a href="#dfn-check-data-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-check-data-schema-1">check data schema</a>
          on <var>json</var> and <var>schema</var>. If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that
          exception and stop.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <a href="#dfn-value" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-value-3">[[value]]</a>.
        </li>
      </ol>
    </section>

    <section id="the-arraybuffer-function"><div class="header-wrapper"><h4 id="x7-2-2-the-arraybuffer-function"><bdi class="secno">7.2.2 </bdi>The  <dfn data-export="" data-dfn-type="method" id="dom-interactionoutput-arraybuffer" data-idl="operation" data-title="arrayBuffer()" data-dfn-for="InteractionOutput" data-type="Promise" data-lt="arrayBuffer()" data-local-lt="InteractionOutput.arrayBuffer|InteractionOutput.arrayBuffer()|arrayBuffer" tabindex="0" aria-haspopup="dialog"><code>arrayBuffer()</code></dfn> function</h4><a class="self-link" href="#the-arraybuffer-function" aria-label="Permalink for Section 7.2.2"></a></div>
      When invoked, <em class="rfc2119">MUST</em> run the following steps:
      <ol>
        <li>
          Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
        </li>
        <li>
          If <var>data</var> is not <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> or if <var>dataUsed</var> is <code>true</code>,
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotReadableError" data-type="exception" href="https://webidl.spec.whatwg.org/#notreadableerror"><code>NotReadableError</code></a> and stop.
        </li>
        <li>
          Let <var>reader</var> be the result of
          <a href="https://streams.spec.whatwg.org/#readablestream-get-a-reader">
          getting a reader</a> from <var>data</var>. If that threw an exception, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a>
          <var data-type="Promise">promise</var> with that exception and stop.
        </li>
        <li>
          Let <var>bytes</var> be the result of <a href="https://streams.spec.whatwg.org/#readablestream-get-a-reader">
          reading all bytes</a> from <var>data</var> with <var>reader</var>.
        </li>
        <li>
          Set <var>dataUsed</var> to <code>true</code>.
        </li>
        <li>
          Let <var>arrayBuffer</var> be a new <a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> whose contents are <var>bytes</var>.
          If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that exception and stop.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var>arrayBuffer</var>.
        </li>
      </ol>
    </section>

    <section id="the-check-data-schema-algorithm"><div class="header-wrapper"><h4 id="x7-2-3-the-check-data-schema-algorithm"><bdi class="secno">7.2.3 </bdi>The <dfn id="dfn-check-data-schema" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">check data schema</dfn> algorithm</h4><a class="self-link" href="#the-check-data-schema-algorithm" aria-label="Permalink for Section 7.2.3"></a></div>
      To run the <a href="#dfn-check-data-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-check-data-schema-2">check data schema</a> steps on <var>payload</var> and <var data-type="object">schema</var>,
      <ol>
        <li>
          Let <var>type</var> be <var data-type="object">schema</var>.<var>type</var>.
        </li>
        <li>
          If <var>type</var> is <code>"null"</code> and if <var>payload</var> is not <code>null</code>,
          throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop, otherwise return <code>null</code>.
        </li>
        <li>
          If <var>type</var> is <code>"boolean"</code> and <var>payload</var> is a falsy value or its byte
          length is 0, return <code>false</code>, otherwise return <code>true</code>.
        </li>
        <li>
          If <var>type</var> is <code>"integer"</code> or <code>"number"</code>,
          <ol>
            <li>
              If <var>payload</var> is not a number, throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
            </li>
            <li>
              If <var>form</var>.<var>minimum</var> is defined and <var>payload</var> is smaller, or if <var>form</var>.<var>maximum</var> is defined and <var>payload</var> is bigger, throw a <a data-link-type="idl" data-lt="RangeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"><code>RangeError</code></a> and stop.
            </li>
          </ol>
        </li>
        <li>
          If <var>type</var> is <code>"string"</code>, return <var>payload</var>.
        </li>
        <li>
          If <var>type</var> is <code>"array"</code>, run these sub-steps:
          <ol>
            <li>
              If <var>payload</var> is not an array, throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
            </li>
            <li>
              If <var>form</var>.<var>minItems</var> is defined and <var>payload</var>.<var>length</var> is
              less than that, or if <var>form</var>.<var>maxItems</var> is defined and
              <var>payload</var>.<var>length</var> is more than that, throw <a data-link-type="idl" data-lt="RangeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"><code>RangeError</code></a> and stop.
            </li>
            <li>
              Let <var>payload</var> be an array of items obtained by running the
              <a href="#dfn-check-data-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-check-data-schema-3">check data schema</a> steps on each element <var>item</var> of <var>payload</var>
              and <var data-type="object">schema</var>.<var>items</var>.
              If this throws at any stage, re-throw that exception and stop.
            </li>
          </ol>
        </li>
        <li>
          If <var>type</var> is <code>"object"</code>, run these sub-steps:
          <ol>
            <li>
              If <var>payload</var> or <var data-type="object">schema</var>.<var>properties</var> is not an <a data-link-type="idl" data-lt="object" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><code>object</code></a>,
              throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
            </li>
            <li>
              For each <var>key</var> in <var>payload</var>:
              <ol>
                <li>Let <var>prop</var> be <var>payload</var>[<var>key</var>].</li>
                <li>
                  Let <var>propSchema</var> be <var>interaction</var>.<var>properties</var>[<var>key</var>].
                </li>
                <li>
                  Let <var>prop</var> be the result of running the
                  <a href="#dfn-check-data-schema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-check-data-schema-4">check data schema</a> steps on <var>prop</var> and <var>propSchema</var>.
                  If this throws, re-throw that exception and stop.
                </li>
              </ol>
            </li>
            <li>
              Let <var>required</var> be <var data-type="object">schema</var>.<var>required</var> if that is an array
              or an empty array otherwise.
            </li>
            <li>
              For each <var>key</var> in <var>required</var>, if <var>key</var> is not present in <var>payload</var>,
              throw <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
            </li>
          </ol>
        </li>
        <li>
          Return <var>payload</var>.
        </li>
      </ol>
    </section>

    <section id="the-create-interaction-request-algorithm"><div class="header-wrapper"><h4 id="x7-2-4-the-create-interaction-request-algorithm"><bdi class="secno">7.2.4 </bdi>The <dfn id="dfn-create-interaction-request" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">create interaction request</dfn> algorithm</h4><a class="self-link" href="#the-create-interaction-request-algorithm" aria-label="Permalink for Section 7.2.4"></a></div>
      For a given <a href="#dom-consumedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-consumedthing-7"><code>ConsumedThing</code></a> object <var data-type="ConsumedThing">thing</var>, in order to
      <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-1">create interaction request</a> given a <var data-type="InteractionInput">source</var>, <var data-type="Form">form</var> and
      <var data-type="object">schema</var>, run these steps:
      <ol>
        <li>
          Let <var>idata</var> be a new an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-3"><code>InteractionOutput</code></a> object.
        </li>
        <li>
           Set <var>idata</var>.<var data-type="Form">form</var> to <var data-type="Form">form</var>, set <var>idata</var>.<var data-type="object">schema</var> to <var data-type="object">schema</var>, set |idata.<var>data</var> to <code>null</code> and set <var>idata</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-4"><code>[[value]]</code></a> to <code>undefined</code>.
        </li>
        <li>
          If <var data-type="InteractionInput">source</var> is a <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> object, let <var>idata</var>.<var>data</var> be
          <var data-type="InteractionInput">source</var>, return <var>idata</var> and stop.
        </li>
        <li>
          If <var data-type="object">schema</var> and its <var>type</var> are defined and not <code>null</code>, run these sub-steps:
          <ol>
            <li>
              If <var>type</var> is <code>"null"</code> and <var data-type="InteractionInput">source</var> is not <code>"null"</code>,
              throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
            </li>
            <li>
              If <var>type</var> is <code>"boolean"</code> and <var data-type="InteractionInput">source</var> is a falsy value, set
              <var>idata</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-5"><code>[[value]]</code></a> to <code>false</code>, otherwise set it to <code>true</code>.
            </li>
            <li>
              If <var>type</var> is <code>"integer"</code> or <code>"number"</code> and <var data-type="InteractionInput">source</var> is not a number,
              or if <var data-type="Form">form</var>.<var>minimum</var> is defined and <var data-type="InteractionInput">source</var> is smaller,
              or if <var data-type="Form">form</var>.<var>maximum</var> is defined and <var data-type="InteractionInput">source</var> is bigger,
              throw <a data-link-type="idl" data-lt="RangeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"><code>RangeError</code></a> and stop.
            </li>
            <li>
              If <var>type</var> is <code>"string"</code> and <var data-type="InteractionInput">source</var> is not a string, let
              <var>idata</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-6"><code>[[value]]</code></a> be the result of running
              <a data-type="dfn" href="https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-json-bytes">serialize JSON to bytes</a> given <var data-type="InteractionInput">source</var>.
              If that is failure, throw <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
            </li>
            <li>
              If <var>type</var> is <code>"array"</code>, run these sub-steps:
              <ol>
                <li>
                  If <var data-type="InteractionInput">source</var> is not an array, throw a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
                </li>
                <li>
                  Let <var>length</var> be the length of <var data-type="InteractionInput">source</var>.
                </li>
                <li>
                  If <var data-type="Form">form</var>.<var>minItems</var> is defined and <var>length</var> is less than
                  that, or if <var data-type="Form">form</var>.<var>maxItems</var> is defined and <var>length</var> is
                  more than that, throw <a data-link-type="idl" data-lt="RangeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"><code>RangeError</code></a> and stop.
                </li>
                <li>
                  For each <var>item</var> in <var data-type="InteractionInput">source</var>, let <var>itemschema</var> be <var data-type="object">schema</var>.<var>items</var>
                  and let <var>item</var> be the result of running the
                  <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-2">create interaction request</a> steps given <var>item</var>, <var data-type="Form">form</var> and
                  <var>itemschema</var>.
                  If this throws, re-throw that exception and stop.
                </li>
                <li>
                  Set <var>data</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-7"><code>[[value]]</code></a> to <var data-type="InteractionInput">source</var>.
                </li>
              </ol>
            </li>
            <li>
              If <var>type</var> is <code>"object"</code>, run these sub-steps:
              <ol>
                <li>
                  If <var data-type="InteractionInput">source</var> is not an object, throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
                </li>
                <li>
                  If <var data-type="object">schema</var>.<var>properties</var> is not an object,
                  throw <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
                </li>
                <li>
                  For each <var>key</var> in <var data-type="InteractionInput">source</var>,
                  <ol>
                    <li>Let <var>value</var> be <var data-type="InteractionInput">source</var>[<var>key</var>].</li>
                    <li>Let <var>propschema</var> be <var>properties</var>.<var>interactions</var>[<var>key</var>].</li>
                    <li>
                      Let <var>value</var> be the result of running the
                      <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-3">create interaction request</a> steps on <var>value</var>, <var data-type="Form">form</var>
                      and <var>propschema</var>.
                      If this throws, re-throw that exception and stop.
                    </li>
                  </ol>
                </li>
                <li>
                  If <var data-type="object">schema</var>.<var>required</var> is an array, for each <var>item</var> in <var>required</var>
                  check if <var>item</var> is a property name in <var data-type="InteractionInput">source</var>. If an <var>item</var> is
                  not found in <var data-type="InteractionInput">source</var>, throw <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
                </li>
                <li>
                  Set <var>data</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-8"><code>[[value]]</code></a> to <var data-type="InteractionInput">source</var>.
                </li>
              </ol>
            </li>
          </ol>
        </li>
        <li>
          Set <var>idata</var>.<var>data</var> to a new <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> created from
          <var>idata</var>.<a data-link-type="attribute" data-lt="[[value]]" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-9"><code>[[value]]</code></a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a> as its
          <a href="https://streams.spec.whatwg.org/#underlying-source">underlying source</a>.
        </li>
        <li>
          Return <var>idata</var>.
        </li>
      </ol>
    </section>

    <section id="the-parse-interaction-response-algorithm"><div class="header-wrapper"><h4 id="x7-2-5-the-parse-interaction-response-algorithm"><bdi class="secno">7.2.5 </bdi>The <dfn id="dfn-parse-interaction-response" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">parse interaction response</dfn> algorithm</h4><a class="self-link" href="#the-parse-interaction-response-algorithm" aria-label="Permalink for Section 7.2.5"></a></div>
      For a given <a href="#dom-consumedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-consumedthing-8"><code>ConsumedThing</code></a> object <var data-type="ConsumedThing">thing</var>, in order to
      <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-1">parse interaction response</a> given <var>response</var>, <var data-type="Form">form</var> and
      <var data-type="object">schema</var>, run these steps:
      <ol>
        <li>
          Let <var>result</var> be a new <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-4"><code>InteractionOutput</code></a> object.
        </li>
        <li>
          Let <var>result</var>.<var data-type="object">schema</var> be <var data-type="object">schema</var>.
        </li>
        <li>
          Let <var>result</var>.<var data-type="Form">form</var> be <var data-type="Form">form</var>.
        </li>
        <li>
          Let <var>result</var>.<var>data</var> be a new <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> with the payload data
          of <var>response</var> as its
          <a href="https://streams.spec.whatwg.org/#underlying-source">
          underlying source</a>.
        </li>
        <li>
          Let <var>result</var>.<var>dataUsed</var> be <code>false</code>.
        </li>
        <li>
          Return <var>result</var>.
        </li>
      </ol>
    </section>
  </section>
  <section id="using-interactioninput-and-interactionoutput"><div class="header-wrapper"><h3 id="x7-3-using-interactioninput-and-interactionoutput"><bdi class="secno">7.3 </bdi>Using <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-2"><code>InteractionInput</code></a> and <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-5"><code>InteractionOutput</code></a></h3><a class="self-link" href="#using-interactioninput-and-interactionoutput" aria-label="Permalink for Section 7.3"></a></div> 
    <p>
      As illustrated in the next pictures, the <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-6"><code>InteractionOutput</code></a> interface
      is used every time implementations provide data to scripts, while
      <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-3"><code>InteractionInput</code></a> is used when the scripts pass data to the
      implementation.
    </p>
    <figure id="scripting-read">
      <img src="images/scripting-read-data.png" style="width:100%;" title="Reading data">
      <figcaption><a class="self-link" href="#scripting-read">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">Data structures used when reading data</span></figcaption>
    </figure>
    <p>
      When a <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-9"><code>ConsumedThing</code></a> reads data, it receives it from the implementation
      as an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-7"><code>InteractionOutput</code></a> object.
    </p>
    <p>
      An <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-7"><code>ExposedThing</code></a> <a href="#the-propertyreadhandler-callback">
      read handler</a> provides the read data to the implementation as
      <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-4"><code>InteractionInput</code></a>.
    </p>

    <figure id="scripting-write">
      <img src="images/scripting-write-data.png" style="width:100%;" title="Writing data">
      <figcaption><a class="self-link" href="#scripting-write">Figure <bdi class="figno">2</bdi></a> <span class="fig-title">Data structures used when writing data</span></figcaption>
    </figure>
    <p>
      When a <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-10"><code>ConsumedThing</code></a> writes data, it provides it to the implementation
      as <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-5"><code>InteractionInput</code></a>.
    </p>
    <p>
      An <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-8"><code>ExposedThing</code></a> <a href="#the-propertywritehandler-callback">
      write handler</a> receives data from to implementation as
      an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-8"><code>InteractionOutput</code></a> object.
    </p>

    <figure id="scripting-action">
      <img src="images/scripting-action-data.png" style="width:100%;" title="Invoking action">
      <figcaption><a class="self-link" href="#scripting-action">Figure <bdi class="figno">3</bdi></a> <span class="fig-title">Data structures used when invoking an Action</span></figcaption>
    </figure>
    <p>
      When a <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-11"><code>ConsumedThing</code></a> invokes an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-9">Action</a>, it provides the
      parameters as <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-6"><code>InteractionInput</code></a> and receives the output of the
      <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-10">Action</a> as an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-9"><code>InteractionOutput</code></a> object.
    </p>
    <p>
      An <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-9"><code>ExposedThing</code></a> <a href="#the-actionhandler-callback">
      action handler</a> receives arguments from the implementation as
      an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-10"><code>InteractionOutput</code></a> object and provides <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-11">Action</a> output as
      <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-7"><code>InteractionInput</code></a> to the implementation.
    </p>
  </section>

  <section id="error-handling"><div class="header-wrapper"><h3 id="x7-4-error-handling"><bdi class="secno">7.4 </bdi>Error handling</h3><a class="self-link" href="#error-handling" aria-label="Permalink for Section 7.4"></a></div> 
    <p>
      The algorithms in this API define the errors to be reported to application
      scripts.
    </p>
    <p>
      The errors reported to the other communication end are mapped and
      encapsulated by the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-11">Protocol Bindings</a>.
    </p>
    <figure id="scripting-error-handling">
      <img src="images/scripting-error-handling.png" style="width:100%;" title="Error handling">
      <figcaption><a class="self-link" href="#scripting-error-handling">Figure <bdi class="figno">4</bdi></a> <span class="fig-title">Error handling in WoT interactions</span></figcaption>
    </figure>
    <div class="note" id="issue-container-generatedID-12"><div role="heading" class="ednote-title marker" id="h-ednote-8" aria-level="4"><span>Editor's note</span></div><p class="">
      This topic is still being discussed in
      <a href="https://github.com/w3c/wot-scripting-api/issues/200">Issue #200</a>.
      A standardized error mapping would be needed in order to ensure consistency
      in mapping script errors to protocol errors and vice versa. In particular,
      when algorithms say "error received from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-12">Protocol Bindings</a>",
      that will be factored out as an explicit error mapping algorithm. Currently,
      that is encapsulated by implementations.
    </p></div>
  </section>

  </section> 

  <section data-cite="webidl" data-dfn-for="ConsumedThing" id="the-consumedthing-interface"><div class="header-wrapper"><h2 id="x8-the-consumedthing-interface"><bdi class="secno">8. </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-consumedthing" data-idl="interface" data-title="ConsumedThing" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ConsumedThing</code></dfn> interface</h2><a class="self-link" href="#the-consumedthing-interface" aria-label="Permalink for Section 8."></a></div>
    
    <p>
      Represents a client API to operate a <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-31">Thing</a>. Belongs to the
      <a href="#dfn-wot-consumer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-consumer-4">WoT Consumer</a> conformance class.
    </p>
    <pre class="idl def" id="webidl-1958208747"><span class="idlHeader"><a class="self-link" href="#webidl-1958208747">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-consumedthing" data-title="ConsumedThing">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-consumedthing" id="ref-for-dom-consumedthing-12"><code>ConsumedThing</code></a> {<span data-idl="" class="idlConstructor" id="idl-def-consumedthing-constructor-td" data-title="constructor" data-dfn-for="ConsumedThing">
  <dfn data-export="" data-dfn-type="constructor" id="dom-consumedthing-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="ConsumedThing" data-lt="constructor()|constructor(td)" data-local-lt="ConsumedThing.constructor|ConsumedThing.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-7"><code>ThingDescription</code></a></span> <span class="idlParamName">td</span>);</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-readproperty-propertyname-options" data-title="readProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-11"><code>InteractionOutput</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readproperty" id="ref-for-dom-consumedthing-readproperty-1"><code>readProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">propertyName</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-1"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-readallproperties-options" data-title="readAllProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-1"><code>PropertyReadMap</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readallproperties" id="ref-for-dom-consumedthing-readallproperties-1"><code>readAllProperties</code></a>(
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-2"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-readmultipleproperties-propertynames-options" data-title="readMultipleProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-2"><code>PropertyReadMap</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readmultipleproperties" id="ref-for-dom-consumedthing-readmultipleproperties-1"><code>readMultipleProperties</code></a>(<span class="idlType">
                              <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlParamName">propertyNames</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-3"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-writeproperty-propertyname-value-options" data-title="writeProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-writeproperty" id="ref-for-dom-consumedthing-writeproperty-1"><code>writeProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">propertyName</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-8"><code>InteractionInput</code></a></span> <span class="idlParamName">value</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-4"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-writemultipleproperties-valuemap-options" data-title="writeMultipleProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-writemultipleproperties" id="ref-for-dom-consumedthing-writemultipleproperties-1"><code>writeMultipleProperties</code></a>(<span class="idlType">
                              <a data-link-type="idl" href="#dom-propertywritemap" class="internalDFN" id="ref-for-dom-propertywritemap-1"><code>PropertyWriteMap</code></a></span> <span class="idlParamName">valueMap</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-5"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-invokeaction-actionname-params-options" data-title="invokeAction" data-dfn-for="ConsumedThing"><span class="idlType"><span class="idlSectionComment">
  /*Promise&lt;undefined&gt; writeAllProperties(
                              PropertyWriteMap valueMap,
                              optional InteractionOptions options = {});*/
  </span><a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-12"><code>InteractionOutput</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-invokeaction" id="ref-for-dom-consumedthing-invokeaction-1"><code>invokeAction</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">actionName</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-9"><code>InteractionInput</code></a></span> <span class="idlParamName">params</span> = {},
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-6"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-observeproperty-name-listener-onerror-options" data-title="observeProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-1"><code>Subscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-observeproperty" id="ref-for-dom-consumedthing-observeproperty-1"><code>observeProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactionlistener" class="internalDFN" id="ref-for-dom-interactionlistener-1"><code>InteractionListener</code></a></span> <span class="idlParamName">listener</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-errorlistener" class="internalDFN" id="ref-for-dom-errorlistener-1"><code>ErrorListener</code></a></span> <span class="idlParamName">onerror</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-7"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-subscribeevent-name-listener-onerror-options" data-title="subscribeEvent" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-2"><code>Subscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-subscribeevent" id="ref-for-dom-consumedthing-subscribeevent-1"><code>subscribeEvent</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactionlistener" class="internalDFN" id="ref-for-dom-interactionlistener-2"><code>InteractionListener</code></a></span> <span class="idlParamName">listener</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-errorlistener" class="internalDFN" id="ref-for-dom-errorlistener-2"><code>ErrorListener</code></a></span> <span class="idlParamName">onerror</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-8"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-consumedthing-getthingdescription" data-title="getThingDescription" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-8"><code>ThingDescription</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-getthingdescription" id="ref-for-dom-consumedthing-getthingdescription-1"><code>getThingDescription</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-interactionoptions" data-title="InteractionOptions">

dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-interactionoptions" id="ref-for-dom-interactionoptions-9"><code>InteractionOptions</code></a> {<span data-idl="" class="idlMember" id="idl-def-interactionoptions-formindex" data-title="formIndex" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-formindex" id="ref-for-dom-interactionoptions-formindex-1"><code>formIndex</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-interactionoptions-urivariables" data-title="uriVariables" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-urivariables" id="ref-for-dom-interactionoptions-urivariables-1"><code>uriVariables</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-interactionoptions-data" data-title="data" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-data" id="ref-for-dom-interactionoptions-data-1"><code>data</code></a>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-subscription" data-title="Subscription">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-subscription" id="ref-for-dom-subscription-3"><code>Subscription</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-subscription-active" data-title="active" data-dfn-for="Subscription">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-subscription-active" id="ref-for-dom-subscription-active-1"><code>active</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-subscription-stop-options" data-title="stop" data-dfn-for="Subscription"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-subscription-stop" id="ref-for-dom-subscription-stop-1"><code>stop</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-10"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-propertyreadmap" data-title="PropertyReadMap">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-propertyreadmap" id="ref-for-dom-propertyreadmap-3"><code>PropertyReadMap</code></a> {<span data-idl="" class="idlMaplike" id="idl-def-propertyreadmap-maplike" data-title="maplike" data-dfn-for="PropertyReadMap">
  readonly <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-maplike">maplike</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-13"><code>InteractionOutput</code></a>&gt;;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-propertywritemap" data-title="PropertyWriteMap">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-propertywritemap" id="ref-for-dom-propertywritemap-2"><code>PropertyWriteMap</code></a> {<span data-idl="" class="idlMaplike" id="idl-def-propertywritemap-maplike" data-title="maplike" data-dfn-for="PropertyWriteMap">
  readonly <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-maplike">maplike</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-10"><code>InteractionInput</code></a>&gt;;</span>
};</span><span data-idl="" class="idlCallback" id="idl-def-interactionlistener" data-title="InteractionListener">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-interactionlistener" id="ref-for-dom-interactionlistener-3"><code>InteractionListener</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-14"><code>InteractionOutput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlCallback" id="idl-def-errorlistener" data-title="ErrorListener">
callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-errorlistener" id="ref-for-dom-errorlistener-3"><code>ErrorListener</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/#sec-error-objects">Error</a></span> <span class="idlParamName">error</span>);</span></code></pre>
    <div class="note" id="issue-container-generatedID-13"><div role="heading" class="ednote-title marker" id="h-ednote-9" aria-level="3"><span>Editor's note</span><span class="issue-label">: Where is the writeAllProperties method?</span></div><p class="">
      The <code>writeAllProperties()</code> method is still under discussion.
      Meanwhile, use the <code>writeMultipleProperties()</code> method instead.
    </p></div>
    <section id="internal-slots-for-consumedthing"><div class="header-wrapper"><h3 id="x8-1-internal-slots-for-consumedthing"><bdi class="secno">8.1 </bdi>Internal slots for <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-13"><code>ConsumedThing</code></a></h3><a class="self-link" href="#internal-slots-for-consumedthing" aria-label="Permalink for Section 8.1"></a></div>
      
      <p>
        A <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-14"><code>ConsumedThing</code></a> object has the following <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slots</a>:
      </p>
      <table class="simple">
        <thead>
         <tr>
          <th>Internal Slot</th>
          <th>Initial value</th>
          <th>Description (<em>non-normative</em>)</th>
         </tr>
        </thead>
        <tbody data-link-for="ConsumedThing">
         <tr>
          <td><dfn data-idl="" data-dfn-for="ConsumedThing" data-noexport="" data-dfn-type="attribute" id="dfn-td-0" tabindex="0" aria-haspopup="dialog">[[td]]</dfn></td>
          <td><code>null</code></td>
          <td>The <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-22">Thing Description</a> of the <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-15"><code>ConsumedThing</code></a>.</td>
         </tr>
        <tr>
          <td><dfn data-idl="" data-dfn-for="ConsumedThing" data-noexport="" data-dfn-type="attribute" id="dfn-activesubscriptions" tabindex="0" aria-haspopup="dialog">[[activeSubscriptions]]</dfn></td>
          <td><code>{}</code></td>
          <td>
            An <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">ordered map</a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key">keyed</a> on a <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#string">string</a> name representing the <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-10">Event</a> and <a data-link-type="dfn|abstract-op" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-10">value</a> is a <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-4"><code>Subscription</code></a> object.
          </td>
        </tr>
        <tr>
          <td><dfn data-idl="" data-dfn-for="ConsumedThing" data-noexport="" data-dfn-type="attribute" id="dfn-activeobservations" tabindex="0" aria-haspopup="dialog">[[activeObservations]]</dfn></td>
          <td><code>{}</code></td>
          <td>
            An <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">ordered map</a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key">keyed</a> on a <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#string">string</a> name representing a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-13">Property</a> and <a data-link-type="dfn|abstract-op" href="#dfn-value" class="internalDFN" id="ref-for-dfn-value-11">value</a> is a <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-5"><code>Subscription</code></a> object.
          </td>
        </tr>
        </tbody>
      </table>
    </section>

    <section id="constructing-consumedthing"><div class="header-wrapper"><h3 id="x8-2-constructing-consumedthing"><bdi class="secno">8.2 </bdi>Constructing <code>ConsumedThing</code></h3><a class="self-link" href="#constructing-consumedthing" aria-label="Permalink for Section 8.2"></a></div>
      
      <p>
        After <a href="#fetching-a-thing-description">fetching</a> a
        <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-23">Thing Description</a> as a JSON object, one can create a
        <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-16"><code>ConsumedThing</code></a> object.
      </p>
      <div>
        To create <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-17"><code>ConsumedThing</code></a> with the <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-9"><code>ThingDescription</code></a>
        <var data-type="ThingDescription">td</var>, run the following steps:
        <ol>
          <li>
            Run the <a href="#dfn-validate-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-validate-a-td-2">validate a TD</a> steps on <var data-type="ThingDescription">td</var>. If that fails,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            Run the <a href="#dfn-expand-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-expand-a-td-1">expand a TD</a> steps on <var data-type="ThingDescription">td</var>. If that fails, re-<a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> the error and stop.
          </li>
          <li>
            Let <var data-type="ConsumedThing">thing</var> be a new <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-18"><code>ConsumedThing</code></a> object.
          </li>
          <li>
            Set the <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a> <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-1"><code>[[td]]</code></a> of <var data-type="ConsumedThing">thing</var> to <var data-type="ThingDescription">td</var>.
          </li>
          <li>
            Return <var data-type="ConsumedThing">thing</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-getthingdescription-method"><div class="header-wrapper"><h3 id="x8-3-the-getthingdescription-method"><bdi class="secno">8.3 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-getthingdescription" data-idl="operation" data-title="getThingDescription()" data-dfn-for="ConsumedThing" data-type="ThingDescription" data-lt="getThingDescription()" data-local-lt="ConsumedThing.getThingDescription|ConsumedThing.getThingDescription()|getThingDescription" tabindex="0" aria-haspopup="dialog"><code>getThingDescription()</code></dfn> method</h3><a class="self-link" href="#the-getthingdescription-method" aria-label="Permalink for Section 8.3"></a></div>
      
      <p>
        Returns the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-2"><code>[[td]]</code></a> of the <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-19"><code>ConsumedThing</code></a> object
        that represents the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-24">Thing Description</a> of the <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-20"><code>ConsumedThing</code></a>.
        Applications may consult the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-32">Thing</a> metadata stored in <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-3"><code>[[td]]</code></a> in
        order to introspect its capabilities before interacting with it.
      </p>
    </section>

    <section id="the-readproperty-method"><div class="header-wrapper"><h3 id="x8-4-the-readproperty-method"><bdi class="secno">8.4 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-readproperty" data-idl="operation" data-title="readProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readProperty()|readProperty(propertyName)|readProperty(propertyName, options)" data-local-lt="ConsumedThing.readProperty|ConsumedThing.readProperty()|readProperty" tabindex="0" aria-haspopup="dialog"><code>readProperty()</code></dfn> method</h3><a class="self-link" href="#the-readproperty-method" aria-label="Permalink for Section 8.4"></a></div>
      
      <div>
        Reads a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-14">Property</a> value. Takes as arguments <var data-type="string">propertyName</var>
        and optionally <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves with a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-15">Property</a> value
        represented as an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-15"><code>InteractionOutput</code></a> object or rejects on error.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting
            context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
            <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-4"><code>[[td]]</code></a>.<var>properties</var>.<var data-type="string">propertyName</var>.
          </li>
          <li>
            If <var>interaction</var> is  <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a>
            and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is defined, let <var>form</var> be the
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-9">Form</a> associated with <var>formIndex</var> in <var>interaction</var>.<var>forms</var>
            array, otherwise let <var>form</var> be a <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-10">Form</a> in
            <var>interaction</var>.<var>forms</var> whose <var>op</var> is <code>readproperty</code>, selected by
            the implementation.
          </li>
          <li>
            If <var>form</var> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and
            stop.
          </li>
          <li>
            Make a request to the underlying platform (via the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-13">Protocol Bindings</a>) to retrieve the value of the <var data-type="string">propertyName</var> <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-16">Property</a>
            using <var>form</var> and the optional URI templates given in <var data-type="InteractionOptions">options</var>.<var>uriVariables</var>.
          </li>
          <li>
            If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-14">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>response</var> be the response received to the request.
          </li>
          <li>
            Let <var>data</var> be the result of running <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-2">parse interaction response</a>
            on <var>response</var>, <var>form</var> and <var>interaction</var>.
            If that fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var>data</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-readmultipleproperties-method"><div class="header-wrapper"><h3 id="x8-5-the-readmultipleproperties-method"><bdi class="secno">8.5 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-readmultipleproperties" data-idl="operation" data-title="readMultipleProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readMultipleProperties()|readMultipleProperties(propertyNames)|readMultipleProperties(propertyNames, options)" data-local-lt="ConsumedThing.readMultipleProperties|ConsumedThing.readMultipleProperties()|readMultipleProperties" tabindex="0" aria-haspopup="dialog"><code>readMultipleProperties()</code></dfn> method</h3><a class="self-link" href="#the-readmultipleproperties-method" aria-label="Permalink for Section 8.5"></a></div>
      
      <div>
        Reads multiple <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-17">Property</a> values with one request.
        Takes as arguments <var data-type="string sequence">propertyNames</var> and optionally
        <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves with a <a data-link-type="idl" data-lt="PropertyReadMap" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-4"><code>PropertyReadMap</code></a> object
        that maps keys from <var data-type="string sequence">propertyNames</var> to values returned by this algorithm.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is defined, let <var>form</var> be the
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-11">Form</a> associated with <var>formIndex</var> in the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-5"><code>[[td]]</code></a>.<var>forms</var> array, otherwise let <var>form</var> be the <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-12">Form</a> in <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-6"><code>[[td]]</code></a>.<var>forms</var> array whose <var>op</var> is <code>readmultipleproperties</code>, as selected by the implementation.
          </li>
          <li>
            If <var>form</var> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            Let <var data-type="object">result</var> be an object and for each string <var data-type="string">name</var> in <var data-type="string sequence">propertyNames</var> add a property with key <var data-type="string">name</var> and the value <code>null</code>.
          </li>
          <li>
            Make a request to the underlying platform (via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-15">Protocol Bindings</a>) to retrieve the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-18">Property</a> values given by <var data-type="string sequence">propertyNames</var> with <var>form</var> and optional URI templates given in <var data-type="InteractionOptions">options</var>' <var>uriVariables</var>.
          </li>
          <li>
            If this cannot be done with a single request with the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-16">Protocol Bindings</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
          </li>
          <li>
            Process the response and for each <var>key</var> in <var data-type="object">result</var>, run the following
            sub-steps:
            <ol>
              <li>
                Let <var>value</var> be <var data-type="object">result</var>[<var>key</var>].
              </li>
              <li>
                Let <var>schema</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-7"><code>[[td]]</code></a>.<var>properties</var>[<var>key</var>].
              </li>
              <li>
                Let <var>property</var> be the result of running
                <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-3">parse interaction response</a> on <var>value</var>, <var>form</var> and
                <var>schema</var>.
              </li>
            </ol>
          </li>
          <li>
            If the above step throws at any point, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that
            exception and stop.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="object">result</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-readallproperties-method"><div class="header-wrapper"><h3 id="x8-6-the-readallproperties-method"><bdi class="secno">8.6 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-readallproperties" data-idl="operation" data-title="readAllProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="readAllProperties()|readAllProperties(options)" data-local-lt="ConsumedThing.readAllProperties|ConsumedThing.readAllProperties()|readAllProperties" tabindex="0" aria-haspopup="dialog"><code>readAllProperties()</code></dfn> method</h3><a class="self-link" href="#the-readallproperties-method" aria-label="Permalink for Section 8.6"></a></div>
      
      <div>
        Reads all properties of the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-33">Thing</a> with one request. Takes <var data-type="InteractionOptions">options</var> as optional argument.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves with a <a data-link-type="idl" data-lt="PropertyReadMap" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-5"><code>PropertyReadMap</code></a> object that
        maps keys from <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-19">Property</a> names to values returned by this algorithm.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>forms</var> be <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-1"><code>[[interaction]]</code></a>.<var>forms</var>.
          </li>
          <li>
            If <var>forms</var> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
            <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is not <code>undefined</code> and is less than <var>forms</var>.<var>length</var>, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-1"><code>[[form]]</code></a> to <var>forms</var>.[<var>formIndex</var>].
          </li>
          <li>
             Otherwise, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-2"><code>[[form]]</code></a> to a
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-13">Form</a> in <var>forms</var> whose <var>op</var> is <code>"readallproperties"</code>, as selected by the implementation.
          </li>
          <li>
            If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-3"><code>[[form]]</code></a> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            Make a request to the underlying platform using the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-17">Protocol Bindings</a> to retrieve  all the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-20">Property</a> definitions from the <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-11">TD</a> given <var>form</var> and optional URI templates in <var data-type="InteractionOptions">options</var>.<var>uriVariables</var>.
          </li>
          <li>
            If this cannot be done with a single request with the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-18">Protocol Bindings</a> of the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-34">Thing</a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
          </li>
          <li>
            If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-19">Protocol Bindings</a> and stop.
          </li>
          <li>
            Process the reply and let <var data-type="object">result</var> be an object with the keys and values obtained in the reply.
          </li>
          <li>
            Process the response and for each <var>key</var> in <var data-type="object">result</var>, run the following
            sub-steps:
            <ol>
              <li>
                Let <var>value</var> be <var data-type="object">result</var>[<var>key</var>].
              </li>
              <li>
                Let <var>schema</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-8"><code>[[td]]</code></a>.<var>properties</var>[<var>key</var>].
              </li>
              <li>
                Let <var>property</var> be the result of running
                <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-4">parse interaction response</a> on <var>value</var>, <var>form</var> and
                <var>schema</var>.
              </li>
            </ol>
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var data-type="object">result</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-writeproperty-method"><div class="header-wrapper"><h3 id="x8-7-the-writeproperty-method"><bdi class="secno">8.7 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-writeproperty" data-idl="operation" data-title="writeProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="writeProperty()|writeProperty(propertyName, value)|writeProperty(propertyName, value, options)" data-local-lt="ConsumedThing.writeProperty|ConsumedThing.writeProperty()|writeProperty" tabindex="0" aria-haspopup="dialog"><code>writeProperty()</code></dfn> method</h3><a class="self-link" href="#the-writeproperty-method" aria-label="Permalink for Section 8.7"></a></div>
      
      <div>
        Writes a single <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-21">Property</a>. Takes as arguments <var data-type="string">propertyName</var>,
        <var data-type="InteractionInput">value</var> and optionally <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves on success and rejects on failure.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-9"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">propertyName</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a>
            and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is not <code>undefined</code>, let <var>form</var> be the
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-14">Form</a> associated with <var>formIndex</var> in the <var>interaction</var>.<var>forms</var>
            array, otherwise let <var>form</var> be a <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-15">Form</a> in
            <var>interaction</var>.<var>forms</var> whose <var>op</var> is <code>writeproperty</code>, as selected by
            the implementation.
          </li>
          <li>
            If <var>form</var> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            Let <var>data</var> be the result of running the <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-4">create interaction request</a> steps given <var data-type="InteractionInput">value</var>, <var>form</var> and <var>interaction</var>. If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code>promise</code></a> with that exception and stop.
          </li>
          <li>
            Make a request to the underlying platform (via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-20">Protocol Bindings</a>)
            to write the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-22">Property</a> given by <var data-type="string">propertyName</var> using
            <var data-type="InteractionOutput">data</var> and the optional URI templates given in
            <var data-type="InteractionOptions">options</var>' <var>uriVariables</var>.
          </li>
          <li>
            If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-21">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var>.
          </li>
        </ol>
      </div>
      <div class="note" id="issue-container-generatedID-14"><div role="heading" class="ednote-title marker" id="h-ednote-10" aria-level="4"><span>Editor's note</span></div><p class="">
        As discussed in <a href="https://github.com/w3c/wot-scripting-api/issues/193">
        Issue #193</a>, the design decision is that write interactions only
        return success or error, not the written value (optionally).
        <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-12">TD</a>s should capture the schema of the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-23">Property</a>
        values, including precision and alternative formats. When a return
        value is expected from the interaction, an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-12">Action</a> should be used
        instead of a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-24">Property</a>.
      </p></div>
    </section>

    <section id="the-writemultipleproperties-method"><div class="header-wrapper"><h3 id="x8-8-the-writemultipleproperties-method"><bdi class="secno">8.8 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-writemultipleproperties" data-idl="operation" data-title="writeMultipleProperties()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="writeMultipleProperties()|writeMultipleProperties(valueMap)|writeMultipleProperties(valueMap, options)" data-local-lt="ConsumedThing.writeMultipleProperties|ConsumedThing.writeMultipleProperties()|writeMultipleProperties" tabindex="0" aria-haspopup="dialog"><code>writeMultipleProperties()</code></dfn> method</h3><a class="self-link" href="#the-writemultipleproperties-method" aria-label="Permalink for Section 8.8"></a></div>
      
      <div>
        Writes a multiple <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-25">Property</a> values with one request.
        Takes as arguments <var data-type="object">properties</var> - as an object with keys being
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-26">Property</a> names and values as <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-27">Property</a> values - and optionally
        <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves on success and rejects on failure. The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting
            context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
            <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is defined, let <var>form</var> be the
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-16">Form</a> associated with <var>formIndex</var> in the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-10"><code>[[td]]</code></a>.<var>forms</var> array,
            otherwise let <var>form</var> be a <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-17">Form</a> in <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-11"><code>[[td]]</code></a>.<var>forms</var>
            array whose <var>op</var> is <code>writemultipleproperties</code>, as selected by
            the implementation.
          </li>
          <li>
            If <var>form</var> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and
            stop.
          </li>
          <li>
            Let <var>propertyNames</var> be an array of <var>string</var> with as elements the keys of the <var data-type="object">properties</var> object.
          </li>
          <li>
            For each <var data-type="string">name</var> in <var>propertyNames</var>, let <var>property</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-12"><code>[[td]]</code></a>.<var data-type="object">properties</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>property</var> is <code>null</code> or <code>undefined</code> or is not <code>writeable</code> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
          </li>
          <li>
            Let <var data-type="object">result</var> be an object and for each string <var data-type="string">name</var> in <var>propertyNames</var> add a property with key <var data-type="string">name</var> and let its value be
            <code>null</code>.
          </li>
          <li>
            Let <var data-type="object">schemas</var> be an object and for each <var data-type="string">name</var>
            in <var>propertyNames</var> add a property with key <var data-type="string">name</var> and let its value
            be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-13"><code>[[td]]</code></a>.<var data-type="object">properties</var>[<var data-type="string">name</var>].
          </li>
          <li>
            For each key <var data-type="string">key</var> in <var data-type="object">properties</var>,
            run the <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-5">create interaction request</a> steps given
            <var data-type="object">properties</var>[<var data-type="string">key</var>], <var>form</var> and the value for <var>schema</var>[<var data-type="string">key</var>].
            If that throws for any <var data-type="string">name</var>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code>promise</code></a> with that
            exception and stop.
          </li>
          <li>
            Make a single request to the underlying platform (via the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-22">Protocol Bindings</a>) to write each <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-28">Property</a> provided in
            <var data-type="object">properties</var> with optional URI templates given in <var data-type="InteractionOptions">options</var>'
            <var>uriVariables</var>.
          </li>
          <li>
            If this cannot be done with a single request with the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-23">Protocol Bindings</a> of the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-35">Thing</a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
            with a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and stop.
          </li>
          <li>
            If the request fails, return the error received from the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-24">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-observeproperty-method"><div class="header-wrapper"><h3 id="x8-9-the-observeproperty-method"><bdi class="secno">8.9 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-observeproperty" data-idl="operation" data-title="observeProperty()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="observeProperty()|observeProperty(name, listener)|observeProperty(name, listener, onerror)|observeProperty(name, listener, onerror, options)" data-local-lt="ConsumedThing.observeProperty|ConsumedThing.observeProperty()|observeProperty" tabindex="0" aria-haspopup="dialog"><code>observeProperty()</code></dfn> method</h3><a class="self-link" href="#the-observeproperty-method" aria-label="Permalink for Section 8.9"></a></div>
      
      <div>
        Makes a request for <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-29">Property</a> value change notifications.
        Takes as arguments <var data-type="string">propertyName</var>, <var data-type="InteractionListener">listener</var> and
        optionally <var data-type="ErrorListener">onerror</var> and <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves on success and rejects on failure.
        <div class="note" id="issue-container-generatedID-15"><div role="heading" class="ednote-title marker" id="h-ednote-11" aria-level="4"><span>Editor's note</span></div><p class="">
          This algorithm allows for only one active <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-6"><code>Subscription</code></a> per <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-30">Property</a>. If a new
          <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-7"><code>Subscription</code></a> is made while an existing <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-8"><code>Subscription</code></a> is active the runtime
          will throw an <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>.
        </p></div>
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Let <var>thing</var> be the reference of this <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-21"><code>ConsumedThing</code></a> object.
          </li>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var data-type="InteractionListener">listener</var> is not a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
            with a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            If <var data-type="ErrorListener">onerror</var> is not <code>null</code> and is not a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
            with a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            If <var>thing</var>.<a data-link-type="attribute" data-lt="[[activeObservations]]" href="#dfn-activeobservations" class="internalDFN" id="ref-for-dfn-activeobservations-1"><code>[[activeObservations]]</code></a>[<var data-type="string">propertyName</var>] [=map/exists], <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a> and stop.
          </li>
          <li>
            Let <var>subscription</var> be a new <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-9"><code>Subscription</code></a> object with its <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slots</a>
            set as follows:
            <ul>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-1"><code>[[type]]</code></a> be <code>"property"</code>.
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-1"><code>[[name]]</code></a> be <var data-type="string">propertyName</var>.
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-2"><code>[[interaction]]</code></a> be  <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-14"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">propertyName</var>].
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[thing]]" href="#dfn-thing" class="internalDFN" id="ref-for-dfn-thing-1"><code>[[thing]]</code></a> be <var>thing</var>.
              </li>
              <li>
                Let <var>forms</var> be <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-3"><code>[[interaction]]</code></a>.<var>forms</var>.
              </li>
              <li>
                If <var>forms</var> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
                <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
              </li>
              <li>
                If <var>option</var>.<var>formIndex</var> is not <code>undefined</code> and is less than <var>forms</var>.<var>length</var>, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-4"><code>[[form]]</code></a> to <var>forms</var>.[<var>formIndex</var>].
              </li>
              <li>
                 Otherwise, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-5"><code>[[form]]</code></a> to a
                <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-18">Form</a> in <var>forms</var> whose <var>op</var> is <code>"observeproperty"</code>, as selected by the implementation.
              </li>
              <li>
                If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-6"><code>[[form]]</code></a> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
                <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
              </li>
              <li>
                If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-4"><code>[[interaction]]</code></a> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
              </li>
            </ul>
          </li>
          <li>
            Make a request to the underlying platform to observe the
            <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-31">Property</a> identified by <var data-type="string">propertyName</var> with <var>form</var> and
            optional URI templates given in <var data-type="InteractionOptions">options</var>' <var>uriVariables</var>.
          </li>
          <li>
            If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from
            the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-25">Protocol Bindings</a> and stop.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-set">Set</a> <var>thing</var>.<a data-link-type="attribute" data-lt="[[activeObservations]]" href="#dfn-activeobservations" class="internalDFN" id="ref-for-dfn-activeobservations-2"><code>[[activeObservations]]</code></a>[|propertyName] to <var>subscription</var> and <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var>.
          </li>
          <li>
            Whenever the underlying platform detects a notification for this
            <var>subscription</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key">keyed</a> on <var data-type="string">propertyName</var> with a new <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-32">Property</a> value <var>value</var>,
            run the following sub-steps:
            <ul>
              <li>
                Let <var>reply</var> be the result of running <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-5">parse interaction response</a>
                with <var>value</var>, <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-7"><code>[[form]]</code></a> and <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-5"><code>[[interaction]]</code></a>.
                If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that exception and stop.
              </li>
              <li>
                Invoke <var data-type="InteractionListener">listener</var> given <var>reply</var>.
              </li>
            </ul>
          </li>
          <li>
            Whenever the underlying platform detects an error for
            this subscription, run the following sub-steps:
            <ul>
              <li>
                If the error is irrecoverable and stops the subscription, set
                <var>subscription</var>.<var>active</var> to <code>false</code> and suppress further notifications.
              </li>
              <li>
                Let <var>error</var> be a new <a data-link-type="idl" data-lt="NetworkError" data-type="exception" href="https://webidl.spec.whatwg.org/#networkerror"><code>NetworkError</code></a> and set its <var>message</var>
                to reflect the underlying error condition.
              </li>
              <li>
                If <var data-type="ErrorListener">onerror</var> is a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>,  invoke it given <var>error</var>.
              </li>
            </ul>
          </li>
        </ol>
      </div>
    </section>

    <section id="the-invokeaction-method"><div class="header-wrapper"><h3 id="x8-10-the-invokeaction-method"><bdi class="secno">8.10 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-invokeaction" data-idl="operation" data-title="invokeAction()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="invokeAction()|invokeAction(actionName)|invokeAction(actionName, params)|invokeAction(actionName, params, options)" data-local-lt="ConsumedThing.invokeAction|ConsumedThing.invokeAction()|invokeAction" tabindex="0" aria-haspopup="dialog"><code>invokeAction()</code></dfn> method</h3><a class="self-link" href="#the-invokeaction-method" aria-label="Permalink for Section 8.10"></a></div>
      
      <div>
        Makes a request for invoking an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-13">Action</a> and return the result.
        Takes as arguments <var data-type="string">actionName</var>, optionally
        <var data-type="InteractionInput">params</var> and optionally <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that resolves with the result of the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-14">Action</a>
        represented as an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-16"><code>InteractionOutput</code></a> object, or rejects with an error.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-15"><code>[[td]]</code></a>.<var>actions</var>[<var data-type="string">actionName</var>].
          </li>
          <li>
            If <var>interaction</var> is not an <a data-link-type="idl" data-lt="object" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><code>object</code></a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a>
            and stop.
          </li>
          <li>
            Let <var>forms</var> be <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-6"><code>[[interaction]]</code></a>.<var>forms</var>.
          </li>
          <li>
            If <var>forms</var> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
            <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            If <var>option</var>.<var>formIndex</var> is not <code>undefined</code> and is less than <var>forms</var>.<var>length</var>, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-8"><code>[[form]]</code></a> to <var>forms</var>.[<var>formIndex</var>].
          </li>
          <li>
             Otherwise, set <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-9"><code>[[form]]</code></a> to a
            <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-19">Form</a> in <var>forms</var> whose <var>op</var> is <code>"invokeaction"</code>, as selected by the implementation.
          </li>
          <li>
            If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-10"><code>[[form]]</code></a> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
            <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
          </li>
          <li>
            Let <var>args</var> be the result of running the <a href="#dfn-create-interaction-request" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-interaction-request-6">create interaction request</a> steps on <var data-type="InteractionInput">params</var>, <var>form</var> and <var>interaction</var>. If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code>promise</code></a> with that exception and stop.
          </li>
          <li>
            Make a request to the underlying platform (via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-26">Protocol Bindings</a>) to invoke the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-15">Action</a> identified by <var data-type="string">actionName</var> given <var>args</var> and <var data-type="InteractionOptions">options</var>.<var>uriVariables</var>.
          </li>
          <li>
            If the request fails locally or returns an error over the network, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-27">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>value</var> be the reply returned in the reply.
          </li>
          <li>
            Let <var>result</var> be the result of running <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-6">parse interaction response</a>
            with <var>value</var>, <var>form</var> and <var>interaction</var>. If that throws, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with that exception and stop.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var> with <var>result</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-subscribeevent-method"><div class="header-wrapper"><h3 id="x8-11-the-subscribeevent-method"><bdi class="secno">8.11 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-consumedthing-subscribeevent" data-idl="operation" data-title="subscribeEvent()" data-dfn-for="ConsumedThing" data-type="Promise" data-lt="subscribeEvent()|subscribeEvent(name, listener)|subscribeEvent(name, listener, onerror)|subscribeEvent(name, listener, onerror, options)" data-local-lt="ConsumedThing.subscribeEvent|ConsumedThing.subscribeEvent()|subscribeEvent" tabindex="0" aria-haspopup="dialog"><code>subscribeEvent()</code></dfn> method</h3><a class="self-link" href="#the-subscribeevent-method" aria-label="Permalink for Section 8.11"></a></div>
      
      <div>
        Makes a request for subscribing to <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-11">Event</a> notifications.
        Takes as arguments <var data-type="string">eventName</var>, <var data-type="WoTListener">listener</var> and
        optionally  <var data-type="ErrorListener">onerror</var> and <var data-type="InteractionOptions">options</var>.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> to signal success or failure.
        <div class="note" id="issue-container-generatedID-16"><div role="heading" class="ednote-title marker" id="h-ednote-12" aria-level="4"><span>Editor's note</span></div><p class="">
          This algorithm allows for only one active <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-10"><code>Subscription</code></a> per <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-12">Event</a>. If a new
          <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-11"><code>Subscription</code></a> is made while an existing <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-12"><code>Subscription</code></a> is active the runtime 
          will throw an <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>. 
        </p></div>
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Let <var>thing</var> be the reference of this <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-22"><code>ConsumedThing</code></a> object. 
          </li>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var data-type="WoTListener">listener</var> is not a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
            with a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            If <var data-type="ErrorListener">onerror</var> is not <code>null</code> and is not a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var>
            with a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            If <var>thing</var>.<a data-link-type="attribute" data-lt="[[activeSubscriptions]]" href="#dfn-activesubscriptions" class="internalDFN" id="ref-for-dfn-activesubscriptions-1"><code>[[activeSubscriptions]]</code></a>[<var data-type="string">eventName</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a> and stop.
          </li>
          <li>
            Let <var>subscription</var> be a new <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-13"><code>Subscription</code></a> object with its <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slots</a>
            set as follows:
            <ul>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-2"><code>[[type]]</code></a> be <code>"event"</code>.
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-2"><code>[[name]]</code></a> be <var data-type="string">eventName</var>.
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-7"><code>[[interaction]]</code></a> be <var>thing</var>. <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-0" class="internalDFN" id="ref-for-dfn-td-0-16"><code>[[td]]</code></a>.<var>events</var>[<var data-type="string">eventName</var>].
              </li>
              <li>
                If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-8"><code>[[interaction]]</code></a> is <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
              </li>
              <li>
                Let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[thing]]" href="#dfn-thing" class="internalDFN" id="ref-for-dfn-thing-2"><code>[[thing]]</code></a> be <var>thing</var>.
              </li>
              <li>
                If <var data-type="InteractionOptions">options</var>.<var>formIndex</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exists</a>, then let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-11"><code>[[form]]</code></a> be  <var>thing</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-9"><code>[[interaction]]</code></a>.<var>forms</var>[<var>formIndex</var>].
              </li>
              <li>
                Otherwise, let <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-12"><code>[[form]]</code></a> be an <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>
                <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-20">Form</a> from the <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-10"><code>[[interaction]]</code></a>.<var>forms</var> array whose <var>op</var> is <code>"subscribeevent"</code>.
              </li>
              <li>
                If <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-13"><code>[[form]]</code></a> does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
                <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and stop.
              </li>
            </ul>
          </li>
          <li>
            Make a request to the underlying platform via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-28">Protocol Bindings</a>
            to subscribe to the <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-13">Event</a> identified by <var data-type="string">eventName</var> with
            <a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-14"><code>[[form]]</code></a>, optional URI templates given in <var data-type="InteractionOptions">options</var>.<var>uriVariables</var>
            and optional subscription data given in <var data-type="InteractionOptions">options</var>.<var>data</var>.
          </li>
          <li>
            If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from
            the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-29">Protocol Bindings</a> and stop.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-set">Set</a> <var data-type="string">eventName</var> to <var>thing</var>.<a data-link-type="attribute" data-lt="[[activeSubscriptions]]" href="#dfn-activesubscriptions" class="internalDFN" id="ref-for-dfn-activesubscriptions-2"><code>[[activeSubscriptions]]</code></a>[<var data-type="string">eventName</var>] to <var>subscription</var>.
          </li>
          <li>
             <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var>.
          </li>
          <li>
            Whenever the underlying platform detects a notification for the
            <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-14">Event</a> <var>subscription</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key">keyed</a> on <var data-type="string">eventName</var>, run the following sub-steps:
            <ol>
              <li>
                Invoke <var data-type="WoTListener">listener</var> given the result of running
                <a href="#dfn-parse-interaction-response" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-parse-interaction-response-7">parse interaction response</a> on the data provided with the
                <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-15">Event</a>, <var>subscription</var>.<a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-15"><code>[[form]]</code></a> and <var>subscription</var>.<a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-11"><code>[[interaction]]</code></a>.
              </li>
            </ol>
          </li>
          <li>
            Whenever the underlying platform detects an error for
            <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-16">Event</a> <var>subscription</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key">keyed</a> on <var data-type="string">eventName</var>, run the following sub-steps:
            <ul>
              <li>
                If the error is irrecoverable and stops the subscription, set
                <var>subscription</var>.<var>active</var> to <code>false</code> and suppress further notifications.
              </li>
              <li>
                Let <var>error</var> be a new <a data-link-type="idl" data-lt="NetworkError" data-type="exception" href="https://webidl.spec.whatwg.org/#networkerror"><code>NetworkError</code></a> and set its <var>message</var>
                to reflect the underlying error condition.
              </li>
              <li>
                If <var data-type="ErrorListener">onerror</var> is a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, invoke it given <var>error</var>.
              </li>
            </ul>
          </li>
        </ol>
      </div>
    </section>

    <section data-dfn-for="InteractionOptions" id="the-interactionoptions-dictionary"><div class="header-wrapper"><h3 id="x8-12-the-interactionoptions-dictionary"><bdi class="secno">8.12 </bdi>
        The <dfn data-export="" data-dfn-type="dictionary" id="dom-interactionoptions" data-idl="dictionary" data-title="InteractionOptions" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>InteractionOptions</code></dfn> dictionary
      </h3><a class="self-link" href="#the-interactionoptions-dictionary" aria-label="Permalink for Section 8.12"></a></div>
      
      <p>
        Holds the interaction options that need to be exposed for application scripts according to the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-25">Thing Description</a>.
      </p>
      <p>
        The <dfn data-export="" data-dfn-type="dict-member" id="dom-interactionoptions-formindex" data-idl="field" data-title="formIndex" data-dfn-for="InteractionOptions" data-type="unsigned long" tabindex="0" aria-haspopup="dialog"><code>formIndex</code></dfn> property, if defined, represents an application
        hint for which <code>Form</code> definition, identified by this index,
        of the <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-13">TD</a> to use for the given WoT interaction.
        Implementations <em class="rfc2119">SHOULD</em> use the <code>Form</code> with this index for
        making the interaction, but <em class="rfc2119">MAY</em> override this value if the index is not
        found or not valid.
        If not defined, implementations <em class="rfc2119">SHOULD</em> attempt to use the
        <code>Form</code> definitions in order of appearance as listed in the
        <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-14">TD</a> for the given Wot Interaction.
      </p>
      <p>
        The <dfn data-export="" data-dfn-type="dict-member" id="dom-interactionoptions-urivariables" data-idl="field" data-title="uriVariables" data-dfn-for="InteractionOptions" data-type="object" tabindex="0" aria-haspopup="dialog"><code>uriVariables</code></dfn> property if defined, represents the URI
        template variables to be used with the WoT Interaction that are represented
        as <a href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">
        parsed JSON objects</a> defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>].
      </p>
      <div class="note" id="issue-container-generatedID-17"><div role="heading" class="ednote-title marker" id="h-ednote-13" aria-level="4"><span>Editor's note</span></div><p class="">
        The support for URI variables comes from the need, exposed by the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification, to be able to describe
        existing RESTful endpoints that use them. However, it should be possible to write a Thing Description that would use
        <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-16">Action</a>s for representing this kind of interactions and model the URI variables as action parameters. In that case,
        implementations can serialize the parameters as URI variables, and therefore, the <var>options</var> parameter could be
        dismissed.
      </p></div>
      <p>
        The <dfn data-export="" data-dfn-type="dict-member" id="dom-interactionoptions-data" data-idl="field" data-title="data" data-dfn-for="InteractionOptions" data-type="any" tabindex="0" aria-haspopup="dialog"><code>data</code></dfn> property if defined, represents additional opaque
        data that needs to be passed to the interaction.
      </p>
    </section>

    <section id="the-propertyreadmap-type"><div class="header-wrapper"><h3 id="x8-13-the-propertyreadmap-type"><bdi class="secno">8.13 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-propertyreadmap" data-idl="interface" data-title="PropertyReadMap" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PropertyReadMap</code></dfn> type</h3><a class="self-link" href="#the-propertyreadmap-type" aria-label="Permalink for Section 8.13"></a></div>
      
      <p>
        Represents a map of <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-33">Property</a> names to an <a href="#dom-interactionoutput" class="internalDFN" data-link-type="idl" id="ref-for-dom-interactionoutput-17"><code>InteractionOutput</code></a>
        object that represents the value the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-34">Property</a> can take. It is
        used as a property bag for interactions that involve multiple
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-35">Properties</a> at once.
      </p>
    </section>

    <section id="the-propertywritemap-type"><div class="header-wrapper"><h3 id="x8-14-the-propertywritemap-type"><bdi class="secno">8.14 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-propertywritemap" data-idl="interface" data-title="PropertyWriteMap" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PropertyWriteMap</code></dfn> type</h3><a class="self-link" href="#the-propertywritemap-type" aria-label="Permalink for Section 8.14"></a></div>
      
      <p>
        Represents a map of <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-36">Property</a> names to an <a href="#dom-interactioninput" class="internalDFN" data-link-type="idl" id="ref-for-dom-interactioninput-11"><code>InteractionInput</code></a>
        that represents the value the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-37">Property</a> can take. It is
        used as a property bag for interactions that involve multiple
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-38">Properties</a> at once.
      </p>
    </section>

    <section id="the-interactionlistener-callback"><div class="header-wrapper"><h3 id="x8-15-the-interactionlistener-callback"><bdi class="secno">8.15 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-interactionlistener" data-idl="callback" data-title="InteractionListener" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>InteractionListener</code></dfn> callback</h3><a class="self-link" href="#the-interactionlistener-callback" aria-label="Permalink for Section 8.15"></a></div>
      
      <p>
        User provided callback that is given an argument of type
        <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-18"><code>InteractionOutput</code></a> and is used for observing <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-39">Property</a> changes
        and handling <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-17">Event</a> notifications.
        Since subscribing to <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-18">Events</a> are WoT interactions and might take
        options or even data, they are not modelled with software events.
      </p>
    </section>

    <section id="the-errorlistener-callback"><div class="header-wrapper"><h3 id="x8-16-the-errorlistener-callback"><bdi class="secno">8.16 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-errorlistener" data-idl="callback" data-title="ErrorListener" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ErrorListener</code></dfn> callback</h3><a class="self-link" href="#the-errorlistener-callback" aria-label="Permalink for Section 8.16"></a></div>
      
      <p>
        User provided callback that is given an argument of type
        <a data-link-type="idl" data-lt="Error" href="https://tc39.es/ecma262/multipage/#sec-error-objects"><code>Error</code></a> and is used for conveying critical and non-critical errors
        from the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-30">Protocol Bindings</a> to applications.
      </p>
    </section>

    <section data-dfn-for="Subscription" id="the-subscription-interface"><div class="header-wrapper"><h3 id="x8-17-the-subscription-interface"><bdi class="secno">8.17 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-subscription" data-idl="interface" data-title="Subscription" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>Subscription</code></dfn> interface</h3><a class="self-link" href="#the-subscription-interface" aria-label="Permalink for Section 8.17"></a></div>
      
      <p>
        Represents a subscription to <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-40">Property</a> change and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-19">Event</a>
        interactions.
      </p>
      <p>
        The <dfn data-export="" data-dfn-type="attribute" id="dom-subscription-active" data-idl="attribute" data-title="active" data-dfn-for="Subscription" data-type="boolean" data-lt="active" data-local-lt="Subscription.active" tabindex="0" aria-haspopup="dialog"><code>active</code></dfn> boolean property denotes if the subscription is
        active, i.e. it is not stopped because of an error or because of invocation
        of the <code>stop()</code> method.
      </p>
      <section id="internal-slots-for-subscription"><div class="header-wrapper"><h4 id="x8-17-1-internal-slots-for-subscription"><bdi class="secno">8.17.1 </bdi>Internal slots for <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-14"><code>Subscription</code></a></h4><a class="self-link" href="#internal-slots-for-subscription" aria-label="Permalink for Section 8.17.1"></a></div>
        A <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-15"><code>Subscription</code></a> object has the following <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slots</a>:
        <table class="simple">
          <thead>
           <tr>
            <th>Internal Slot</th>
            <th>Initial value</th>
            <th>Description (<em>non-normative</em>)</th>
           </tr>
          </thead>
          <tbody data-link-for="Subscription">
           <tr>
            <td><dfn data-idl="" data-dfn-for="Subscription" data-noexport="" data-dfn-type="attribute" id="dfn-type" tabindex="0" aria-haspopup="dialog">[[type]]</dfn></td>
            <td><code>null</code></td>
            <td>
              Indicates what <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-17">WoT Interaction</a> the <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-16"><code>Subscription</code></a> refers to.
              The value can be either <code>"property"</code> or <code>"event"</code> or <code>null</code>.
            </td>
           </tr>
           <tr>
             <td><dfn data-idl="" data-dfn-for="Subscription" data-noexport="" data-dfn-type="attribute" id="dfn-name" tabindex="0" aria-haspopup="dialog">[[name]]</dfn></td>
             <td><code>null</code></td>
             <td>The <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-41">Property</a> or <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-20">Event</a> name.</td>
           </tr>
           <tr>
             <td><dfn data-idl="" data-dfn-for="Subscription" data-noexport="" data-dfn-type="attribute" id="dfn-interaction" tabindex="0" aria-haspopup="dialog">[[interaction]]</dfn></td>
             <td><code>null</code></td>
             <td>
              The <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-26">Thing Description</a> fragment that describes the
              <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-18">WoT interaction</a>.
              </td>
           </tr>
           <tr>
             <td><dfn data-idl="" data-dfn-for="Subscription" data-noexport="" data-dfn-type="attribute" id="dfn-form" tabindex="0" aria-haspopup="dialog">[[form]]</dfn></td>
             <td><code>null</code></td>
             <td>The <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-21">Form</a> associated with the subscription.</td>
           </tr>
           <tr>
             <td><dfn data-idl="" data-dfn-for="Subscription" data-noexport="" data-dfn-type="attribute" id="dfn-thing" tabindex="0" aria-haspopup="dialog">[[thing]]</dfn></td>
             <td><code>null</code></td>
             <td>The <a href="#dom-consumedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-consumedthing-23"><code>ConsumedThing</code></a> associated with the subscription.</td>
           </tr>
          </tbody>
        </table>
      </section>
      <section id="the-stop-method"><div class="header-wrapper"><h4 id="x8-17-2-the-stop-method"><bdi class="secno">8.17.2 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-subscription-stop" data-idl="operation" data-title="stop()" data-dfn-for="Subscription" data-type="Promise" data-lt="stop()|stop(options)" data-local-lt="Subscription.stop|Subscription.stop()|stop" tabindex="0" aria-haspopup="dialog"><code>stop()</code></dfn> method</h4><a class="self-link" href="#the-stop-method" aria-label="Permalink for Section 8.17.2"></a></div>
        
        <p>
          Stops delivering notifications for the subscription. It takes an
          optional parameter <var data-type="InteractionOptions">options</var> and returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a>.
          When invoked, the method <em class="rfc2119">MUST</em> execute the following steps:
          </p><ol>
            <li>
              Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps
              <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
            </li>
            <li>
              If invoking this method is not allowed for the current scripting
              context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a
              <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
            </li>
            <li>
              If <var data-type="InteractionOptions">options</var>' <var>formIndex</var> is defined, let <var>unsubscribeForm</var> be the
              <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-22">Form</a> associated with <var>formIndex</var> in <a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-12"><code>[[interaction]]</code></a>'s
              <var>forms</var> array.
            </li>
            <li>
              Otherwise let <var>unsubscribeForm</var> be the result of running the
              <a href="#dfn-find-a-matching-unsubscribe-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-find-a-matching-unsubscribe-form-1">find a matching unsubscribe form</a> algorithm given <a data-link-type="attribute" data-lt="[[form]]" href="#dfn-form" class="internalDFN" id="ref-for-dfn-form-16"><code>[[form]]</code></a>.
            </li>
            <li>
              If <var>unsubscribeForm</var> is failure, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a> and
              stop.
            </li>
            <li>
              If <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-3"><code>[[type]]</code></a> is <code>"property"</code>, make a request to the underlying
              platform via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-31">Protocol Bindings</a> to stop observing the
              <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-42">Property</a> identified by <a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-3"><code>[[name]]</code></a> with <var>unsubscribeForm</var> and optional
              URI templates given in <var data-type="InteractionOptions">options</var>' <var>uriVariables</var>.
            </li>
            <li>
              Otherwise, if <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-4"><code>[[type]]</code></a> is <code>"event"</code>, make a request to the underlying
              platform via the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-32">Protocol Bindings</a> to unsubscribe from the
              <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-21">Event</a> identified by <a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-4"><code>[[name]]</code></a> with <var>unsubscribeForm</var>, with optional URI
              templates given in <var data-type="InteractionOptions">options</var>' <var>uriVariables</var> and optional
              unsubscribe data given in <var data-type="InteractionOptions">options</var>.<var>data</var>.
            </li>
            <li>
              If the request fails, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with the error received from
              the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-33">Protocol Bindings</a> and stop.
            </li>
            <li>
              Otherwise:
              <ul>
                <li>
                  set <a href="#dom-subscription-active" id="ref-for-dom-subscription-active-2">active</a> to <code>false</code>.
                </li>
                <li>
                  if <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-5"><code>[[type]]</code></a> is <code>"event"</code>, remove <a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-5"><code>[[name]]</code></a> from <a data-link-type="attribute" data-lt="[[thing]]" href="#dfn-thing" class="internalDFN" id="ref-for-dfn-thing-3"><code>[[thing]]</code></a>.<a data-link-type="attribute" data-lt="[[activeSubscriptions]]" href="#dfn-activesubscriptions" class="internalDFN" id="ref-for-dfn-activesubscriptions-3"><code>[[activeSubscriptions]]</code></a> .
                </li>
                <li>
                  if <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-6"><code>[[type]]</code></a> is <code>"property"</code>, remove <a data-link-type="attribute" data-lt="[[name]]" href="#dfn-name" class="internalDFN" id="ref-for-dfn-name-6"><code>[[name]]</code></a> from <a data-link-type="attribute" data-lt="[[thing]]" href="#dfn-thing" class="internalDFN" id="ref-for-dfn-thing-4"><code>[[thing]]</code></a>.<a data-link-type="attribute" data-lt="[[activeObservations]]" href="#dfn-activeobservations" class="internalDFN" id="ref-for-dfn-activeobservations-3"><code>[[activeObservations]]</code></a> .
                </li>
                <li>
                  <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var>.
                </li>
              </ul> 
            </li>
            <li>
              If the underlying platform receives further notifications for this
              subscription, implementations <em class="rfc2119">SHOULD</em> silently suppress them.
            </li>
          </ol>
        <p></p>
      </section>
      <section id="finding-an-unsubscribe-form"><div class="header-wrapper"><h4 id="x8-17-3-finding-an-unsubscribe-form"><bdi class="secno">8.17.3 </bdi>Finding an unsubscribe <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-23">Form</a></h4><a class="self-link" href="#finding-an-unsubscribe-form" aria-label="Permalink for Section 8.17.3"></a></div>
        <div class="note" role="note" id="issue-container-generatedID-18"><div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div><p class="">
          This algorithm is under development and is <em>non-normative</em>.
          Implementations <em class="rfc2119">MAY</em> choose another algorithm to find a matching
          <code>unsubscribe</code> <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-24">Form</a> to a given <code>subscribe</code> <a href="#dfn-forms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-forms-25">Form</a>.
        </p></div>
        To <dfn id="dfn-find-a-matching-unsubscribe-form" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">find a matching unsubscribe form</dfn> given <var>subscribeForm</var>
        in the context of a <a data-link-type="idl" data-lt="Subscription" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-17"><code>Subscription</code></a> object, run the following steps:
        <ol>
          <li>
            Let <var>results</var> be an empty array.
          </li>
          <li>
            For each <var>form</var> in <a data-link-type="attribute" data-lt="[[interaction]]" href="#dfn-interaction" class="internalDFN" id="ref-for-dfn-interaction-13"><code>[[interaction]]</code></a>.<var>forms</var>,
            <ol>
              <li>
                Add an <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a> [[matchLevel]] on <var>form</var> and set
                its value to <code>0</code>.
              </li>
              <li>
                If <var>form</var>.<var>op</var> is <code>"unobserveproperty"</code> if <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-7"><code>[[type]]</code></a> is
                <code>"property"</code> or if <var>form</var>.<var>op</var> is <code>"unsubscribeevent"</code>
                if <a data-link-type="attribute" data-lt="[[type]]" href="#dfn-type" class="internalDFN" id="ref-for-dfn-type-8"><code>[[type]]</code></a> is<code>"event"</code>,
                <ol>
                  <li>
                    Set the <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a> [[matchLevel]] on <var>form</var> to 1
                    and add <var>form</var> to <var>results</var>.
                  </li>
                  <li>
                    If <var>form</var>.<var>href</var> and [[subscribeForm]].<var>href</var> are
                    <a href="https://html.spec.whatwg.org/multipage/#same-origin-domain">
                    same origin-domain</a>, increment <var>form</var>.[[matchLevel]].
                  </li>
                  <li>
                    If <var>form</var>.<var>contentType</var> is equal to [[subscribeForm]]'s
                    <var>contentType</var> and <var>form</var>.[[matchLevel]] is greater than 2,
                    increment <var>form</var>.[[matchLevel]].
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            If <var>results</var> is empty, return <code>null</code> and terminate these steps.
          </li>
          <li>
            Return the first <var>form</var> in <var>results</var> that has the highest
            [[matchLevel]] value.
          </li>
        </ol>
      </section>
    </section>

    <section id="consumedthing-examples"><div class="header-wrapper"><h3 id="x8-18-consumedthing-examples"><bdi class="secno">8.18 </bdi>ConsumedThing Examples</h3><a class="self-link" href="#consumedthing-examples" aria-label="Permalink for Section 8.18"></a></div>
      
      <p>
        The next example illustrates how to fetch a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-15">TD</a> by URL, create a <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-24"><code>ConsumedThing</code></a>, read metadata (title), read property value, subscribe to property change, subscribe to a WoT event, unsubscribe.
      </p>
      <div class="example" id="example-thing-client-api-example-with-data-value">
        <div class="marker">
    <a class="self-link" href="#example-thing-client-api-example-with-data-value">Example<bdi> 2</bdi></a><span class="example-title">: Thing Client API example with data value</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">"https://tds.mythings.org/sensor11"</span>);
  <span class="hljs-keyword">let</span> td = res.json();
  <span class="hljs-keyword">let</span> thing = <span class="hljs-keyword">new</span> ConsumedThing(td);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Thing "</span> + thing.getThingDescription().title + <span class="hljs-string">" consumed."</span>);
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"TD fetch error: "</span> + e.message);
};

<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// subscribe to property change for “temperature”</span>
  <span class="hljs-keyword">await</span> thing.observeProperty(<span class="hljs-string">"temperature"</span>, <span class="hljs-keyword">async</span> (data) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Temperature changed to: "</span> + <span class="hljs-keyword">await</span> data.value());
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Cannot read the observed property temperature"</span>);
      <span class="hljs-built_in">console</span>.error(error);
    }
  });
  <span class="hljs-comment">// subscribe to the “ready” event defined in the TD</span>
  <span class="hljs-keyword">await</span> thing.subscribeEvent(<span class="hljs-string">"ready"</span>, <span class="hljs-keyword">async</span> (eventData) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Ready; index: "</span> + <span class="hljs-keyword">await</span> eventData.value());
      <span class="hljs-comment">// run the “startMeasurement” action defined by TD</span>
      <span class="hljs-keyword">await</span> thing.invokeAction(<span class="hljs-string">"startMeasurement"</span>, { <span class="hljs-attr">units</span>: <span class="hljs-string">"Celsius"</span> });
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Measurement started."</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Cannot read the ready event or startMeasurement failed"</span>);
      <span class="hljs-built_in">console</span>.error(error)
    }
  });
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Error starting measurement."</span>);
}

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> temperatureData = <span class="hljs-keyword">await</span> thing.readProperty(<span class="hljs-string">"temperature"</span>)
    <span class="hljs-keyword">const</span> temperature = <span class="hljs-keyword">await</span> temperatureData.value();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Temperature: "</span> + temperature);

    <span class="hljs-keyword">await</span> thing.unsubscribe(<span class="hljs-string">"ready"</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Unsubscribed from the ‘ready’ event."</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Error in the cleanup function"</span>);
  }
}, <span class="hljs-number">10000</span>);</code></pre>
      </div>
      <p>
        The following shows an advance usage of <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-19"><code>InteractionOutput</code></a> to read a property without a <a data-link-type="idl" data-lt="DataSchema" href="#dfn-dataschema" class="internalDFN" id="ref-for-dfn-dataschema-10"><code>DataSchema</code></a>.
      </p>
      <div class="example" id="example-thing-client-api-example-with-arraybuffer">
        <div class="marker">
    <a class="self-link" href="#example-thing-client-api-example-with-arraybuffer">Example<bdi> 3</bdi></a><span class="example-title">: Thing Client API example with arrayBuffer</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*
* takePicture affordance form:
* "form": {
*   "op": "invokeaction",
*   "href" : "http://camera.example.com:5683/takePicture",
*   "response": {
*     "contentType": "image/jpeg",
*     "contentCoding": "gzip"
*   }
*}
* See https://www.w3.org/TR/wot-thing-description/#example-23
*/</span>
<span class="hljs-keyword">let</span> response;
<span class="hljs-keyword">let</span> image;
<span class="hljs-keyword">try</span> {
  response = <span class="hljs-keyword">await</span> thing.invokeAction(“takePicture”));
  image = <span class="hljs-keyword">await</span> response.value() <span class="hljs-comment">// throws NotReadableError --&gt; schema not defined</span>
} <span class="hljs-keyword">catch</span>(ex) {
  image = <span class="hljs-keyword">await</span> response.arrayBuffer();
  <span class="hljs-comment">// image: ArrayBuffer [0x1 0x2 0x3 0x5 0x15 0x23 ...]</span>
}</code></pre>
      </div>
      <p>
        Finally, the next two examples shows the usage of a <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> from an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-20"><code>InteractionOutput</code></a>.
      </p>
      <div class="example" id="example-thing-client-api-example-with-readable-stream-e-g-video-stream">
        <div class="marker">
    <a class="self-link" href="#example-thing-client-api-example-with-readable-stream-e-g-video-stream">Example<bdi> 4</bdi></a><span class="example-title">: Thing Client API example with readable stream (e.g., video stream)</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*{
"video": {
  "description" : "the video stream of this camera",
  "forms": [
    {
      "op": "readproperty",
      "href": "http://camera.example.com/live",
      "subprotocol": "hls"
      "contentType": "video/mp4"
    }
  ]
}}*/</span>

<span class="hljs-keyword">const</span> video = <span class="hljs-keyword">await</span> thing.readProperty(<span class="hljs-string">"video"</span>)
<span class="hljs-keyword">const</span> reader = video.data.getReader()
reader.read().then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processVideo</span>(<span class="hljs-params">{ done, value }</span>) </span>{
  <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"live video stoped"</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">const</span> decoded = decode(value)
  UI.show(decoded)
  <span class="hljs-comment">// Read some more, and call this function again</span>
  <span class="hljs-keyword">return</span> reader.read().then(processText);
});</code></pre>
      </div>
      <p>Here consider that the JSON object is too big to be read wholly in the memory. Therefore,
        we use streaming processing to get the total number of the events recorded by the remote Web Thing.
      </p>
      <div class="example" id="example-thing-client-api-example-with-readable-stream-e-g-counting-json-objects">
        <div class="marker">
    <a class="self-link" href="#example-thing-client-api-example-with-readable-stream-e-g-counting-json-objects">Example<bdi> 5</bdi></a><span class="example-title">: Thing Client API example with readable stream (e.g., counting json objects)</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*
* "eventHistory":
* {
*   "description" : "A long list of the events recorded by this thing",
*   "type": "array",
*   "forms": [
*     {
*       "op": "readproperty",
*       "href": "http://recorder.example.com/eventHistory",
*     }
*   ]
* }
*/</span>

<span class="hljs-comment">// Example of streaming processing: counting json objects</span>
<span class="hljs-keyword">let</span> objectCounter = <span class="hljs-number">0</span>
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> Parser() <span class="hljs-comment">//User library for json streaming parsing (i.e. https://github.com/uhop/stream-json/wiki/Parser)</span>

parser.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> data.name === <span class="hljs-string">'startObject'</span> &amp;&amp; ++objectCounter);
parser.on(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Found <span class="hljs-subst">${objectCounter}</span> objects.`</span>));

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> thing.readProperty(“eventHistory”)
<span class="hljs-keyword">await</span> response.data.pipeTo(parser);

<span class="hljs-comment">// Found N objects</span></code></pre>
      </div>
    </section> 
  </section> 

  <section data-cite="webidl" data-dfn-for="ExposedThing" id="the-exposedthing-interface"><div class="header-wrapper"><h2 id="x9-the-exposedthing-interface"><bdi class="secno">9. </bdi>The <dfn data-plurals="exposedthings" data-export="" data-dfn-type="interface" id="dom-exposedthing" data-idl="interface" data-title="ExposedThing" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ExposedThing</code></dfn> interface</h2><a class="self-link" href="#the-exposedthing-interface" aria-label="Permalink for Section 9."></a></div>
    
    <p>
      The <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-10"><code>ExposedThing</code></a> interface is the server API to operate the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-36">Thing</a> that allows defining request handlers, <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-43">Property</a>, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-17">Action</a>, and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-22">Event</a> interactions.
    </p>
    <pre class="idl def" id="webidl-1354481242"><span class="idlHeader"><a class="self-link" href="#webidl-1354481242">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-exposedthing" data-title="ExposedThing">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-exposedthing" id="ref-for-dom-exposedthing-11"><code>ExposedThing</code></a> {<span data-idl="" class="idlMethod" id="idl-def-exposedthing-setpropertyreadhandler-name-handler" data-title="setPropertyReadHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-12"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyreadhandler" id="ref-for-dom-exposedthing-setpropertyreadhandler-1"><code>setPropertyReadHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-1"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-setpropertywritehandler-name-handler" data-title="setPropertyWriteHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-13"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertywritehandler" id="ref-for-dom-exposedthing-setpropertywritehandler-1"><code>setPropertyWriteHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertywritehandler" class="internalDFN" id="ref-for-dom-propertywritehandler-1"><code>PropertyWriteHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-setpropertyobservehandler-name-handler" data-title="setPropertyObserveHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-14"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyobservehandler" id="ref-for-dom-exposedthing-setpropertyobservehandler-1"><code>setPropertyObserveHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-2"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-setpropertyunobservehandler-name-handler" data-title="setPropertyUnobserveHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-15"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyunobservehandler" id="ref-for-dom-exposedthing-setpropertyunobservehandler-1"><code>setPropertyUnobserveHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-3"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-emitpropertychange-name-data" data-title="emitPropertyChange" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-emitpropertychange" id="ref-for-dom-exposedthing-emitpropertychange-1"><code>emitPropertyChange</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,
          optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-12"><code>InteractionInput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-setactionhandler-name-action" data-title="setActionHandler" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-16"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setactionhandler" id="ref-for-dom-exposedthing-setactionhandler-1"><code>setActionHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType"> <a data-link-type="idl" href="#dom-actionhandler" class="internalDFN" id="ref-for-dom-actionhandler-1"><code>ActionHandler</code></a></span> <span class="idlParamName">action</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-seteventsubscribehandler-name-handler" data-title="setEventSubscribeHandler" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-17"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-seteventsubscribehandler" id="ref-for-dom-exposedthing-seteventsubscribehandler-1"><code>setEventSubscribeHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-1"><code>EventSubscriptionHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-seteventunsubscribehandler-name-handler" data-title="setEventUnsubscribeHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-18"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-seteventunsubscribehandler" id="ref-for-dom-exposedthing-seteventunsubscribehandler-1"><code>setEventUnsubscribeHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-2"><code>EventSubscriptionHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-emitevent-name-data" data-title="emitEvent" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-emitevent" id="ref-for-dom-exposedthing-emitevent-1"><code>emitEvent</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,
          optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-13"><code>InteractionInput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-expose" data-title="expose" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-expose" id="ref-for-dom-exposedthing-expose-1"><code>expose</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-destroy" data-title="destroy" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-destroy" id="ref-for-dom-exposedthing-destroy-1"><code>destroy</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-exposedthing-getthingdescription" data-title="getThingDescription" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-10"><code>ThingDescription</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-getthingdescription" id="ref-for-dom-exposedthing-getthingdescription-1"><code>getThingDescription</code></a>();</span>
};</span><span data-idl="" class="idlCallback" id="idl-def-propertyreadhandler" data-title="PropertyReadHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-propertyreadhandler" id="ref-for-dom-propertyreadhandler-4"><code>PropertyReadHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-14"><code>InteractionInput</code></a>&gt;</span>(
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-11"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" id="idl-def-propertywritehandler" data-title="PropertyWriteHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-propertywritehandler" id="ref-for-dom-propertywritehandler-2"><code>PropertyWriteHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>(<span class="idlType">
        <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-21"><code>InteractionOutput</code></a></span> <span class="idlParamName">value</span>,
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-12"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" id="idl-def-actionhandler" data-title="ActionHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-actionhandler" id="ref-for-dom-actionhandler-2"><code>ActionHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-15"><code>InteractionInput</code></a>&gt;</span>(<span class="idlType">
        <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-22"><code>InteractionOutput</code></a></span> <span class="idlParamName">params</span>,
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-13"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" id="idl-def-eventsubscriptionhandler" data-title="EventSubscriptionHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-eventsubscriptionhandler" id="ref-for-dom-eventsubscriptionhandler-3"><code>EventSubscriptionHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>(
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-14"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span></code></pre>

    <section data-dfn-for="ExposedThing" id="internal-slots-for-exposedthing"><div class="header-wrapper"><h3 id="x9-1-internal-slots-for-exposedthing"><bdi class="secno">9.1 </bdi>Internal slots for ExposedThing</h3><a class="self-link" href="#internal-slots-for-exposedthing" aria-label="Permalink for Section 9.1"></a></div>
      
      <p>
        An <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-19"><code>ExposedThing</code></a> object has the following <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slots</a>:
      </p>
      <table class="simple">
        <thead>
         <tr>
          <th>Internal Slot</th>
          <th>Initial value</th>
          <th>Description (<em>non-normative</em>)</th>
         </tr>
        </thead>
        <tbody data-link-for="ExposedThing">
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-td-1" tabindex="0" aria-haspopup="dialog">[[td]]</dfn></td>
            <td><code>null</code></td>
            <td>The <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-27">Thing Description</a> of the <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-20"><code>ExposedThing</code></a>.</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-readhandlers" tabindex="0" aria-haspopup="dialog">[[readHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with property names as keys and <a data-link-type="idl" data-lt="PropertyReadHandler" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-5"><code>PropertyReadHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-writehandlers" tabindex="0" aria-haspopup="dialog">[[writeHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with property names as keys and <a data-link-type="idl" data-lt="PropertyWriteHandler" href="#dom-propertywritehandler" class="internalDFN" id="ref-for-dom-propertywritehandler-3"><code>PropertyWriteHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-observehandlers" tabindex="0" aria-haspopup="dialog">[[observeHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with property names as keys and <a data-link-type="idl" data-lt="PropertyReadHandler" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-6"><code>PropertyReadHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-unobservehandlers" tabindex="0" aria-haspopup="dialog">[[unobserveHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with property names as keys and <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-actionhandlers" tabindex="0" aria-haspopup="dialog">[[actionHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with action names as keys and <a data-link-type="idl" data-lt="ActionHandler" href="#dom-actionhandler" class="internalDFN" id="ref-for-dom-actionhandler-3"><code>ActionHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-subscribehandlers" tabindex="0" aria-haspopup="dialog">[[subscribeHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with event names as keys and <a data-link-type="idl" data-lt="EventSubscriptionHandler" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-4"><code>EventSubscriptionHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-unsubscribehandlers" tabindex="0" aria-haspopup="dialog">[[unsubscribeHandlers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with event names as keys and <a data-link-type="idl" data-lt="EventSubscriptionHandler" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-5"><code>EventSubscriptionHandler</code></a>s as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-propertyobservers" tabindex="0" aria-haspopup="dialog">[[propertyObservers]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with property names as keys and an <a data-link-type="idl" data-lt="Array" data-type="interface" href="https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects"><code>Array</code></a> of listeners as values</td>
          </tr>
          <tr>
            <td><dfn data-idl="" data-dfn-for="ExposedThing" data-noexport="" data-dfn-type="attribute" id="dfn-eventlisteners" tabindex="0" aria-haspopup="dialog">[[eventListeners]]</dfn></td>
            <td><code>{}</code></td>
            <td>A <a data-link-type="idl" data-lt="Map" data-type="interface" href="https://tc39.es/ecma262/multipage/keyed-collections.html#sec-map-objects"><code>Map</code></a> with event names as keys and <a data-link-type="idl" data-lt="Array" data-type="interface" href="https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects"><code>Array</code></a> of listeners as values</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="constructing-exposedthing"><div class="header-wrapper"><h3 id="x9-2-constructing-exposedthing"><bdi class="secno">9.2 </bdi>Constructing <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-21"><code>ExposedThing</code></a></h3><a class="self-link" href="#constructing-exposedthing" aria-label="Permalink for Section 9.2"></a></div>
      
      <p>
        The <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-22"><code>ExposedThing</code></a> interface extends <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-25"><code>ConsumedThing</code></a>. It
        is constructed from a full or partial <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-11"><code>ThingDescription</code></a> object.
      </p>
      <div class="note" role="note" id="issue-container-generatedID-19"><div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div><p class="">
         Note that an existing <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-12"><code>ThingDescription</code></a> object can be optionally modified (for instance by adding or removing elements on its <var>properties</var>, <var>actions</var> and <var>events</var> internal properties) and the resulting object can used for constructing an
         <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-23"><code>ExposedThing</code></a> object. This is the current way of adding and
         removing <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-44">Property</a>, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-18">Action</a> and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-23">Event</a> definitions, as illustrated in the <a href="#exposedthing-examples">examples</a>.
      </p></div>
      <div class="note" role="note" id="issue-container-generatedID-20"><div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div><p class="">
        Before invoking <a href="#dom-exposedthing-expose" id="ref-for-dom-exposedthing-expose-2">expose()</a>, the <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-24"><code>ExposedThing</code></a> object does not serve any requests. This allows first constructing <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-25"><code>ExposedThing</code></a> and then initialize its <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-45">Properties</a> and service handlers before starting serving requests.
      </p></div>
      <div>
        To construct an <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-26"><code>ExposedThing</code></a> with the <a data-link-type="idl" data-lt="ExposedThingInit" href="#dom-exposedthinginit" class="internalDFN" id="ref-for-dom-exposedthinginit-4"><code>ExposedThingInit</code></a>
        <var data-type="ExposedThingInit">init</var>, run the following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>Run the <a href="#dfn-expand-an-exposedthinginit" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-expand-an-exposedthinginit-1">expand an ExposedThingInit</a> steps on <var data-type="ExposedThingInit">init</var>. if that fails re-<a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> the error and stop. Otherwise store the obtained <var data-type="ThingDescription">td</var> </li>
          <li>
            Run the <a href="#dfn-expand-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-expand-a-td-2">expand a TD</a> steps on <var data-type="ThingDescription">td</var>. If that fails, re-<a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> the error and stop.
          </li>
          <li>
            Let <var data-type="ExposedThing">thing</var> be a new <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-27"><code>ExposedThing</code></a> object.
          </li>
          <li>
            Set the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-1"><code>[[td]]</code></a> of <var data-type="ExposedThing">thing</var> to <var data-type="ThingDescription">td</var>.
          </li>
          <li>
            Return <var data-type="ExposedThing">thing</var>.
          </li>
        </ol>
      </div>
    </section>

    <section data-dfn-for="ExposedThing" id="the-getthingdescription-method-0"><div class="header-wrapper"><h3 id="x9-3-the-getthingdescription-method"><bdi class="secno">9.3 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-getthingdescription" data-idl="operation" data-title="getThingDescription()" data-dfn-for="ExposedThing" data-type="ThingDescription" data-lt="getThingDescription()" data-local-lt="ExposedThing.getThingDescription|ExposedThing.getThingDescription()|getThingDescription" tabindex="0" aria-haspopup="dialog"><code>getThingDescription()</code></dfn> method</h3><a class="self-link" href="#the-getthingdescription-method-0" aria-label="Permalink for Section 9.3"></a></div>
      
      <p>
        Returns the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-2"><code>[[td]]</code></a> of the <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-28"><code>ExposedThing</code></a> object
        that represents the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-28">Thing Description</a> of the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-37">Thing</a>.
        Applications may consult the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-38">Thing</a> metadata stored in <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-3"><code>[[td]]</code></a> in
        order to introspect its capabilities before interacting with it.
      </p>
    </section>

    <section data-dfn-for="PropertyReadHandler" id="the-propertyreadhandler-callback"><div class="header-wrapper"><h3 id="x9-4-the-propertyreadhandler-callback"><bdi class="secno">9.4 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-propertyreadhandler" data-idl="callback" data-title="PropertyReadHandler" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PropertyReadHandler</code></dfn> callback</h3><a class="self-link" href="#the-propertyreadhandler-callback" aria-label="Permalink for Section 9.4"></a></div>
      
      <p>
        A function that is called when an external request for reading a
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-46">Property</a> is received and defines what to do with such requests.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> and resolves with an <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> object or an
        <a href="https://tc39.es/ecma262/multipage/#sec-ecmascript-data-types-and-values">
        ECMAScript value</a> conforming to <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-11">DataSchema</a>, or rejects with an
        error.
      </p>
    </section>

    <section id="the-setpropertyreadhandler-method"><div class="header-wrapper"><h3 id="x9-5-the-setpropertyreadhandler-method"><bdi class="secno">9.5 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-setpropertyreadhandler" data-idl="operation" data-title="setPropertyReadHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyReadHandler()|setPropertyReadHandler(name, handler)" data-local-lt="ExposedThing.setPropertyReadHandler|ExposedThing.setPropertyReadHandler()|setPropertyReadHandler" tabindex="0" aria-haspopup="dialog"><code>setPropertyReadHandler()</code></dfn> method</h3><a class="self-link" href="#the-setpropertyreadhandler-method" aria-label="Permalink for Section 9.5"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="PropertyReadHandler">handler</var>.
        Sets the service handler that defines what to do when a request is
        received for reading the specified <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-47">Property</a> matched by <var data-type="string">name</var>.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <div class="note" id="issue-container-generatedID-21"><div role="heading" class="ednote-title marker" id="h-ednote-14" aria-level="4"><span>Editor's note</span></div><p class="">
        Note that there is no need to register handlers for handling requests
        for reading multiple or all <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-48">Properties</a>. The request and reply
        are transmitted in a single network request, but the <a href="#dom-exposedthing" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthing-29"><code>ExposedThing</code></a>
        may implement them using multiple calls to the single read handler.
      </p></div>
      <p>
         The <var data-type="PropertyReadHandler">handler</var> callback function should implement reading a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-49">Property</a> and <em class="rfc2119">SHOULD</em> be called by implementations when a request for reading a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-50">Property</a> is received from the underlying platform.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one handler for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-51">Property</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers. If no handler is initialized for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-52">Property</a>, implementations <em class="rfc2119">SHOULD</em> implement a default property read handler based on the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-29">Thing Description</a> provided in the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-4"><code>[[td]]</code></a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a>.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="PropertyReadHandler">handler</var>, implementations <em class="rfc2119">MUST</em> run the
        following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-5"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[readHandlers]]" href="#dfn-readhandlers" class="internalDFN" id="ref-for-dfn-readhandlers-1"><code>[[readHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="PropertyReadHandler">handler</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-requests-for-reading-a-property"><div class="header-wrapper"><h3 id="x9-6-handling-requests-for-reading-a-property"><bdi class="secno">9.6 </bdi>Handling requests for reading a Property</h3><a class="self-link" href="#handling-requests-for-reading-a-property" aria-label="Permalink for Section 9.6"></a></div> 
      <div>
        When a network request for reading <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-53">Property</a> <var data-type="string">name</var>
        is received by the implementation with <var data-type="InteractionOptions">options</var>,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-34">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-35">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>value</var> be the result of running the <dfn id="dfn-read-server-property" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">read server property</dfn>
            steps with <var data-type="string">name</var> and <var data-type="InteractionOptions">options</var>:
            <ol>
              <li>
                Let <var>interaction</var> be <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-6"><code>[[td]]</code></a>.<var>properties</var>.<var data-type="string">name</var>.
              </li>
              <li>
                If a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-54">Property</a> with <var data-type="string">name</var> does not exist, throw  <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
              </li>
              <li>
                Let <var data-type="function">handler</var> be <code>null</code>.
              </li>
              <li>
                If there is a user provided <a data-link-type="idl" data-lt="PropertyReadHandler" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-7"><code>PropertyReadHandler</code></a> in <a data-link-type="attribute" data-lt="[[readHandlers]]" href="#dfn-readhandlers" class="internalDFN" id="ref-for-dfn-readhandlers-2"><code>[[readHandlers]]</code></a> <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a> 
                for <var>interaction</var>, let <var data-type="function">handler</var> be that.
              </li>
              <li>
                Otherwise, if there is a default read handler provided by the implementation, let <var data-type="function">handler</var> be that.
              </li>
              <li>
                If <var data-type="function">handler</var> is <code>null</code>, throw <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
                and stop.
              </li>
              <li>
                Let <var>value</var> be the result of invoking <var data-type="function">handler</var> given <var data-type="InteractionOptions">options</var>.
                If that fails, throw the error and stop.
              </li>
              <li>
                Return <var>value</var>.
                <div class="note" role="note" id="issue-container-generatedID-22"><div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>Note</span></div><p class="">
                  The <var>value</var> returned here <em class="rfc2119">SHOULD</em> either conform to <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-12">DataSchema</a>
                  or it <em class="rfc2119">SHOULD</em> be an <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> object created by the
                  <var data-type="function">handler</var>.
                </p></div>
              </li>
            </ol>
          </li>
          <li>
            If the previous step has thrown an error, send the error back with
            the reply created by following the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-36">Protocol Bindings</a> and stop.
          </li>
          <li>
            Serialize and add the returned <var>value</var> to the reply created by
            following the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-37">Protocol Bindings</a>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-requests-for-reading-multiple-properties"><div class="header-wrapper"><h3 id="x9-7-handling-requests-for-reading-multiple-properties"><bdi class="secno">9.7 </bdi>Handling requests for reading multiple Properties</h3><a class="self-link" href="#handling-requests-for-reading-multiple-properties" aria-label="Permalink for Section 9.7"></a></div> 
      <div>
        When a network request for reading multiple <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-55">Properties</a> given in
        an object <var>propertyNames</var> is received with <var data-type="InteractionOptions">options</var>,
        run the following <dfn id="dfn-read-multiple-properties" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">read multiple properties</dfn> steps on <var>propertyNames</var> and <var data-type="InteractionOptions">options</var>:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-38">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-39">Protocol Bindings</a> and stop.
          </li>
          <li>
            For each property with key <var>name</var> defined in <var>propertyNames</var>,
            <ol>
              <li>
                Let <var>value</var> be the result of running the <a href="#dfn-read-server-property" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-read-server-property-1">read server property</a>
                steps on <var>name</var> and <var data-type="InteractionOptions">options</var>.
                If that throws, send back the error in the reply created by following the  <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-40">Protocol Bindings</a> and stop.
              </li>
              <li>
                Set <var>propertyNames</var>.<var>name</var> to <var>value</var>.
              </li>
            </ol>
          </li>
          <li>
            Reply to the request by sending a single reply created from <var>propertyNames</var> according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-41">Protocol Bindings</a>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-requests-for-reading-all-properties"><div class="header-wrapper"><h3 id="x9-8-handling-requests-for-reading-all-properties"><bdi class="secno">9.8 </bdi>Handling requests for reading all Properties</h3><a class="self-link" href="#handling-requests-for-reading-all-properties" aria-label="Permalink for Section 9.8"></a></div> 
      <div>
        When a network request for reading all <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-56">Properties</a> is received
        with <var data-type="InteractionOptions">options</var>, run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-42">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-43">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>properties</var> be an object created with all properties defined in
            the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-39">Thing</a> with values set to <code>null</code>.
          </li>
          <li>
            Run the <a href="#dfn-read-multiple-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-read-multiple-properties-1">read multiple properties</a> steps on <var>properties</var> and
            <var data-type="InteractionOptions">options</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-setpropertyobservehandler-method"><div class="header-wrapper"><h3 id="x9-9-the-setpropertyobservehandler-method"><bdi class="secno">9.9 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-setpropertyobservehandler" data-idl="operation" data-title="setPropertyObserveHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyObserveHandler()|setPropertyObserveHandler(name, handler)" data-local-lt="ExposedThing.setPropertyObserveHandler|ExposedThing.setPropertyObserveHandler()|setPropertyObserveHandler" tabindex="0" aria-haspopup="dialog"><code>setPropertyObserveHandler()</code></dfn> method</h3><a class="self-link" href="#the-setpropertyobservehandler-method" aria-label="Permalink for Section 9.9"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="PropertyReadHandler">handler</var>.
        Sets the service handler that defines what to do when a request is received
        for observing the specified <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-57">Property</a> matched by <var data-type="string">name</var>.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <p>
         The <var data-type="PropertyReadHandler">handler</var> callback function should implement reading a
         <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-58">Property</a> and <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> with an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-23"><code>InteractionOutput</code></a> object or
         <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> with an error.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one handler for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-59">Property</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers. If no handler is initialized for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-60">Property</a>, implementations <em class="rfc2119">SHOULD</em> implement a default property read handler based on the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-30">Thing Description</a>.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="PropertyReadHandler">handler</var>, implementations <em class="rfc2119">MUST</em> run the
        following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-7"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var><a data-link-type="attribute" data-lt="[[observeHandlers]]" href="#dfn-observehandlers" class="internalDFN" id="ref-for-dfn-observehandlers-1"><code>[[observeHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="PropertyReadHandler">handler</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-property-observe-requests"><div class="header-wrapper"><h3 id="x9-10-handling-property-observe-requests"><bdi class="secno">9.10 </bdi>Handling <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-61">Property</a> observe requests</h3><a class="self-link" href="#handling-property-observe-requests" aria-label="Permalink for Section 9.10"></a></div> 
      <div>
        When a network request for observing a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-62">Property</a> <var data-type="string">name</var> is
        received by the implementation with <var data-type="InteractionOptions">options</var>,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-44">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-45">Protocol Bindings</a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-8"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>, send back a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> in the
            reply and stop.
          </li>
          <li>
            Internally save the request sender information together with <var data-type="InteractionOptions">options</var> and
            <var>this</var>.<a data-link-type="attribute" data-lt="[[propertyObservers]]" href="#dfn-propertyobservers" class="internalDFN" id="ref-for-dfn-propertyobservers-1"><code>[[propertyObservers]]</code></a>[<var data-type="string">name</var>], in order to be able
            to notify about <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-63">Property</a> value changes.
          </li>
        </ol>
      </div>
      <div class="note" role="note" id="issue-container-generatedID-23"><div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span></div><p class="">
        Every time the value of <var>property</var> changes,
        <a href="#the-emitpropertychange-method"><code>emitPropertyChange()</code></a>
        needs to be explicitly called by the application script.
      </p></div>
    </section>

    <section id="the-setpropertyunobservehandler-method"><div class="header-wrapper"><h3 id="x9-11-the-setpropertyunobservehandler-method"><bdi class="secno">9.11 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-setpropertyunobservehandler" data-idl="operation" data-title="setPropertyUnobserveHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyUnobserveHandler()|setPropertyUnobserveHandler(name, handler)" data-local-lt="ExposedThing.setPropertyUnobserveHandler|ExposedThing.setPropertyUnobserveHandler()|setPropertyUnobserveHandler" tabindex="0" aria-haspopup="dialog"><code>setPropertyUnobserveHandler()</code></dfn> method</h3><a class="self-link" href="#the-setpropertyunobservehandler-method" aria-label="Permalink for Section 9.11"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="PropertyReadHandler">handler</var>.
        Sets the service handler that defines what to do when a request is
        received for unobserving the specified <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-64">Property</a> matched by <var data-type="string">name</var>.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <p>
        The <var data-type="PropertyReadHandler">handler</var> callback function should implement what to do when an
        unobserve request is received by the implementation.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one handler for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-65">Property</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers. If no handler is initialized for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-66">Property</a>, implementations <em class="rfc2119">SHOULD</em> implement a default handler based on the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-31">Thing Description</a>.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="PropertyReadHandler">handler</var>, implementations <em class="rfc2119">MUST</em> run the
        following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a
            <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-9"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[unobserveHandlers]]" href="#dfn-unobservehandlers" class="internalDFN" id="ref-for-dfn-unobservehandlers-1"><code>[[unobserveHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="PropertyReadHandler">handler</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-property-unobserve-requests"><div class="header-wrapper"><h3 id="x9-12-handling-property-unobserve-requests"><bdi class="secno">9.12 </bdi>Handling <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-67">Property</a> unobserve requests</h3><a class="self-link" href="#handling-property-unobserve-requests" aria-label="Permalink for Section 9.12"></a></div> 
      <div>
        When a network request for unobserving a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-68">Property</a> <var data-type="string">name</var>
        with <var data-type="InteractionOptions">options</var> is received by the implementation,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-46">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-47">Protocol Bindings</a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-10"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
            send back a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> in the reply and stop.
          </li>
          <li>
            Let <var>handler</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[unobserveHandlers]]" href="#dfn-unobservehandlers" class="internalDFN" id="ref-for-dfn-unobservehandlers-2"><code>[[unobserveHandlers]]</code></a>[<var data-type="string">name</var>];
          </li>
          <li>
            If <var>handler</var> is a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, invoke that given <var data-type="InteractionOptions">options</var>, then send back a
            reply following the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-48">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise, if <var>this</var>.<a data-link-type="attribute" data-lt="[[propertyObservers]]" href="#dfn-propertyobservers" class="internalDFN" id="ref-for-dfn-propertyobservers-2"><code>[[propertyObservers]]</code></a>[<var data-type="string">name</var>] <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exists</a>,
            remove it from <var>this</var>.<a data-link-type="attribute" data-lt="[[propertyObservers]]" href="#dfn-propertyobservers" class="internalDFN" id="ref-for-dfn-propertyobservers-3"><code>[[propertyObservers]]</code></a>, send back a reply as defined in the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-49">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise, send back a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> in the reply as defined in
            the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-50">Protocol Bindings</a> and stop.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-emitpropertychange-method"><div class="header-wrapper"><h3 id="x9-13-the-emitpropertychange-method"><bdi class="secno">9.13 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-emitpropertychange" data-idl="operation" data-title="emitPropertyChange()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="emitPropertyChange()|emitPropertyChange(name)|emitPropertyChange(name, data)" data-local-lt="ExposedThing.emitPropertyChange|ExposedThing.emitPropertyChange()|emitPropertyChange" tabindex="0" aria-haspopup="dialog"><code>emitPropertyChange()</code></dfn> method</h3><a class="self-link" href="#the-emitpropertychange-method" aria-label="Permalink for Section 9.13"></a></div> 
      <div>
        Takes the <var data-type="string">name</var> argument, denoting a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-69">Property</a> name, and
        optionally the <var data-type="InteractionInput">data</var> argument.
        Triggers emitting a notification to all observers of the specified
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-70">Property</a> with the data provided by the <var data-type="InteractionInput">data</var> argument, or if not
        provided, it is obtained by the observe handler or the by
        read handler associated with that <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-71">Property</a>.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>Let <var data-type="Promise">promise</var> be a new <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a>.
          </li><li>
            Return <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var data-type="string">name</var> be the first argument.
          </li>
          <li>
            Let <var>property</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-11"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>property</var> is <code>undefined</code>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
		  
          <li>
            Let <var data-type="InteractionInput">data</var> be the second argument.
          </li>
          <li>
            If <var data-type="InteractionInput">data</var> is <code>undefined</code>, run the following sub-steps:
            <ol>
              <li>
                Let <var data-type="function">handler</var> be <code>null.</code>
              </li>
              <li>
                If <var data-type="string">name</var> does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a> in <a data-link-type="attribute" data-lt="[[readHandlers]]" href="#dfn-readhandlers" class="internalDFN" id="ref-for-dfn-readhandlers-3"><code>[[readHandlers]]</code></a>,
                <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> and stop.
              </li>
              <li>
                Let <var data-type="function">handler</var> be <a data-link-type="attribute" data-lt="[[readHandlers]]" href="#dfn-readhandlers" class="internalDFN" id="ref-for-dfn-readhandlers-4"><code>[[readHandlers]]</code></a>[<var data-type="string">name</var>].
              </li>
              <li>
                If <var data-type="function">handler</var> is <code>null</code> or <code>undefined</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> and stop.
              </li>
              <li>
                Let <var>handled</var> be the result of invoking <var data-type="function">handler</var> given <code>null</code>.
              </li>
              <li>
                 If <var>handled</var> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">rejected</a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> and stop.
              </li>
              <li>
                Otherwise if <var>handled</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolved</a> with <var>value</var>, let <var data-type="InteractionInput">data</var> be <var>value</var>.
            </li></ol>
          </li>
          <li>
            For each <var>observer</var> in <a data-link-type="attribute" data-lt="[[propertyObservers]]" href="#dfn-propertyobservers" class="internalDFN" id="ref-for-dfn-propertyobservers-4"><code>[[propertyObservers]]</code></a>[<var data-type="string">name</var>],
            run the following sub-steps:
            <ol>
              <li>
                Let <var>options</var> be the interaction options saved with <var>observer</var>.
              </li>
              <li>
                Request the underlying platform to create a <var>reply</var> from <var data-type="InteractionInput">data</var> and <var>options</var> according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-51">Protocol Bindings</a>.
                <div class="note" id="issue-container-generatedID-24"><div role="heading" class="ednote-title marker" id="h-ednote-15" aria-level="4"><span>Editor's note</span></div><p class="">
                  This clause needs expanding and/or refer to an algorithm in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-protocol-bindings" title="Web of Things (WoT) Binding Templates">WOT-PROTOCOL-BINDINGS</a></cite>].
                </p></div>
              </li>
              <li>
                Send <var>reply</var> to <var>observer</var>.
              </li>
            </ol>
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">Resolve</a> <var data-type="Promise">promise</var>.
          </li>
        </ol>
        
      </div>
    </section>

    <section data-dfn-for="PropertyWriteHandler" id="the-propertywritehandler-callback"><div class="header-wrapper"><h3 id="x9-14-the-propertywritehandler-callback"><bdi class="secno">9.14 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-propertywritehandler" data-idl="callback" data-title="PropertyWriteHandler" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PropertyWriteHandler</code></dfn> callback</h3><a class="self-link" href="#the-propertywritehandler-callback" aria-label="Permalink for Section 9.14"></a></div>
      
      <p>
        A function that is called when an external request for writing a
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-72">Property</a> is received and defines what to do with such requests.
        Takes as argument <var data-type="InteractionOutput">value</var> and returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a>,
        resolved when the value of the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-73">Property</a> - identified by the name
        provided when setting the handler has been updated -, or rejects
        with an error if the property is not found or the value cannot be updated.
      </p>
      <div class="note" id="issue-container-generatedID-25"><div role="heading" class="ednote-title marker" id="h-ednote-16" aria-level="4"><span>Editor's note</span></div><p class="">
        Note that the code in this callback function can read the property before updating it in order to find out the old value, if needed. Therefore the old value is not provided to this function.
      </p></div>
      <div class="note" role="note" id="issue-container-generatedID-26"><div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div><p class="">
        The value is provided by implementations as an <a data-link-type="idl" data-lt="InteractionOutput" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-24"><code>InteractionOutput</code></a> object
        in order to be able to represent values that are not described by a
        <a href="#dfn-dataschema" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataschema-13">DataSchema</a>, such as streams.
      </p></div>
    </section>

    <section id="the-setpropertywritehandler-method"><div class="header-wrapper"><h3 id="x9-15-the-setpropertywritehandler-method"><bdi class="secno">9.15 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-setpropertywritehandler" data-idl="operation" data-title="setPropertyWriteHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setPropertyWriteHandler()|setPropertyWriteHandler(name, handler)" data-local-lt="ExposedThing.setPropertyWriteHandler|ExposedThing.setPropertyWriteHandler()|setPropertyWriteHandler" tabindex="0" aria-haspopup="dialog"><code>setPropertyWriteHandler()</code></dfn> method</h3><a class="self-link" href="#the-setpropertywritehandler-method" aria-label="Permalink for Section 9.15"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="PropertyWriteHandler">handler</var>.
        Sets the service handler that defines what to do when a request is
        received for writing the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-74">Property</a> matched by <var data-type="string">name</var> given when
        setting the handler.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <div class="note" role="note" id="issue-container-generatedID-27"><div role="heading" class="note-title marker" id="h-note-9" aria-level="4"><span>Note</span></div><p class="">
        Note that even for readonly <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-75">Properties</a> it is possible to specify
        a write handler, as explained in <a href="https://github.com/w3c/wot-scripting-api/issues/199">Issue 199</a>. In this case, the write
        handler may define in an application-specific way to fail the request.
      </p></div>
      <p>
        There <em class="rfc2119">MUST</em> be at most one write handler for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-76">Property</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers. If no write handler is initialized for any given <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-77">Property</a>, implementations <em class="rfc2119">SHOULD</em> implement default property update if the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-78">Property</a> is
        writeable and notifying observers on change if the <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-79">Property</a> is
        observable, based on the <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-32">Thing Description</a>.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="PropertyWriteHandler">handler</var>, implementations <em class="rfc2119">MUST</em> run the
        following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-12"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exist</a>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[writeHandlers]]" href="#dfn-writehandlers" class="internalDFN" id="ref-for-dfn-writehandlers-1"><code>[[writeHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="PropertyWriteHandler">handler</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-requests-for-writing-a-property"><div class="header-wrapper"><h3 id="x9-16-handling-requests-for-writing-a-property"><bdi class="secno">9.16 </bdi>Handling requests for writing a Property</h3><a class="self-link" href="#handling-requests-for-writing-a-property" aria-label="Permalink for Section 9.16"></a></div> 
      <div>
        When a network request for writing a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-80">Property</a> <var data-type="string">name</var>
        with a new value <var data-type="InteractionOutput">value</var> and <var data-type="InteractionOptions">options</var>
        is received, implementations <em class="rfc2119">MUST</em> run the following
        <dfn id="dfn-update-property-steps" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">update property steps</dfn>, given <var data-type="string">name</var>, <var data-type="InteractionOutput">value</var>, <var data-type="InteractionOptions">options</var>
        and <var>mode</var> set to <code>"single"</code>:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-52">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-53">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-13"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>, return a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> in the
            reply and stop.
          </li>
          <li>
            Let <var data-type="function">handler</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[writeHandlers]]" href="#dfn-writehandlers" class="internalDFN" id="ref-for-dfn-writehandlers-2"><code>[[writeHandlers]]</code></a>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var data-type="function">handler</var> is <code>undefined</code> and if there is a default write handler provided by the implementation, let <var data-type="function">handler</var> be that.
          </li>
          <li>
            If <var data-type="function">handler</var> is <code>undefined</code>, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            with the reply and stop.
          </li>
          <li>
            Let <var>promise</var> be the result of invoking <var data-type="function">handler</var> given <var data-type="string">name</var> and
            <var data-type="InteractionOptions">options</var>. If it fails, return the error in the reply and stop.
          </li>
          <li>
            If <var>mode</var> is <code>"single"</code>, reply to the request reporting success, following the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-54">Protocol Bindings</a> and stop.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-requests-for-writing-multiple-properties"><div class="header-wrapper"><h3 id="x9-17-handling-requests-for-writing-multiple-properties"><bdi class="secno">9.17 </bdi>Handling requests for writing multiple Properties</h3><a class="self-link" href="#handling-requests-for-writing-multiple-properties" aria-label="Permalink for Section 9.17"></a></div> 
      <div>
        When a network request for writing multiple <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-81">Properties</a> given in an object <var>propertyNames</var> is received with <var data-type="InteractionOptions">options</var>,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-55">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-56">Protocol Bindings</a> and stop.
          </li>
          <li>
            For each property with key <var>name</var> and value <var>value</var> defined in <var>propertyNames</var>, run the <a href="#dfn-update-property-steps" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-update-property-steps-1">update property steps</a> with <var>name</var>, <var>value</var>, <var data-type="InteractionOptions">options</var> and <var>mode</var> set to <code>"multiple"</code>.
            If that fails, reply to the request with that error and stop.
          </li>
          <li>
            Reply to the request by sending a single reply according to the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-57">Protocol Bindings</a>.
          </li>
        </ol>
      </div>
    </section>

    <section data-dfn-for="ActionHandler" id="the-actionhandler-callback"><div class="header-wrapper"><h3 id="x9-18-the-actionhandler-callback"><bdi class="secno">9.18 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-actionhandler" data-idl="callback" data-title="ActionHandler" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ActionHandler</code></dfn> callback</h3><a class="self-link" href="#the-actionhandler-callback" aria-label="Permalink for Section 9.18"></a></div>
      
      <p>
        A function that is called when an external request for invoking an
        <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-19">Action</a> is received and defines what to do with such requests.
        It is invoked given <var data-type="InteractionOutput">params</var> and optionally
        with an <var data-type="InteractionOptions">options</var> object.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that rejects with an error or resolves with
        the value returned by the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-20">Action</a> as <a data-link-type="idl" data-lt="InteractionInput" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-16"><code>InteractionInput</code></a>.
      </p>
      <div class="note" role="note" id="issue-container-generatedID-28"><div role="heading" class="note-title marker" id="h-note-10" aria-level="4"><span>Note</span></div><p class="">
        Application scripts <em class="rfc2119">MAY</em> return a <a data-link-type="idl" data-lt="ReadableStream" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream"><code>ReadableStream</code></a> object from an
        <a data-link-type="idl" data-lt="ActionHandler" href="#dom-actionhandler" class="internalDFN" id="ref-for-dom-actionhandler-4"><code>ActionHandler</code></a>. Implementations will then use the stream for
        constructing the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-21">Action</a>'s response.
      </p></div>
    </section>

    <section id="the-setactionhandler-method"><div class="header-wrapper"><h3 id="x9-19-the-setactionhandler-method"><bdi class="secno">9.19 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-setactionhandler" data-idl="operation" data-title="setActionHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setActionHandler()|setActionHandler(name, action)" data-local-lt="ExposedThing.setActionHandler|ExposedThing.setActionHandler()|setActionHandler" tabindex="0" aria-haspopup="dialog"><code>setActionHandler()</code></dfn> method</h3><a class="self-link" href="#the-setactionhandler-method" aria-label="Permalink for Section 9.19"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="ActionHandler">action</var>.
        Sets the handler function that defines what to do when a request is
        received to invoke the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-22">Action</a> matched by <var data-type="string">name</var>.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <p>
         The <var data-type="ActionHandler">action</var> callback function will implement an <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-23">Action</a> and <em class="rfc2119">SHOULD</em> be called by implementations when a request for invoking the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-24">Action</a> is received from the underlying platform.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one handler for any given <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-25">Action</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and <var data-type="ActionHandler">action</var>,
        run the following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-14"><code>[[td]]</code></a>.<var>actions</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[actionHandlers]]" href="#dfn-actionhandlers" class="internalDFN" id="ref-for-dfn-actionhandlers-1"><code>[[actionHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="ActionHandler">action</var>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-action-requests"><div class="header-wrapper"><h3 id="x9-20-handling-action-requests"><bdi class="secno">9.20 </bdi>Handling <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-26">Action</a> requests</h3><a class="self-link" href="#handling-action-requests" aria-label="Permalink for Section 9.20"></a></div> 
      <div>
        When a network request for invoking the <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-27">Action</a> identified by <var data-type="string">name</var> is received given <var>inputs</var> and optionally <var data-type="InteractionOptions">options</var>, run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-58">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-59">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-15"><code>[[td]]</code></a>.<var>properties</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>, return a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> in the reply and stop.
          </li>
          <li>
            Let <var data-type="function">handler</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[actionHandlers]]" href="#dfn-actionhandlers" class="internalDFN" id="ref-for-dfn-actionhandlers-2"><code>[[actionHandlers]]</code></a>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var data-type="function">handler</var> is <code>undefined</code>, return a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> with the reply
            created by following the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-60">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>promise</var> be the result of invoking <var data-type="function">handler</var> given <var data-type="string">name</var>, <var>inputs</var> and <var data-type="InteractionOptions">options</var>.
          </li>
          <li>
            If <var>promise</var> rejects, send the error with the reply and stop.
          </li>
          <li>
            When <var>promise</var> resolves with <var data-type="InteractionInput">data</var>, use <var data-type="InteractionInput">data</var> to
            create and send the reply according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-61">Protocol Bindings</a>.
          </li>
        </ol>
      </div>
    </section>

    <section data-dfn-for="EventSubscriptionHandler" id="the-eventsubscriptionhandler-callback"><div class="header-wrapper"><h3 id="x9-21-the-eventsubscriptionhandler-callback"><bdi class="secno">9.21 </bdi>The <dfn data-export="" data-dfn-type="callback" id="dom-eventsubscriptionhandler" data-idl="callback" data-title="EventSubscriptionHandler" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>EventSubscriptionHandler</code></dfn> callback</h3><a class="self-link" href="#the-eventsubscriptionhandler-callback" aria-label="Permalink for Section 9.21"></a></div>
      
      <p>
        A function that is called when an external request for subscribing to an
        <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-24">Event</a> is received and defines what to do with such requests.
        It is invoked given an <var data-type="InteractionOptions">options</var> object provided by the implementation and coming from subscribers.
        It returns a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> that rejects with an error or resolves when
        the subscription is accepted.
      </p>
    </section>

    <section id="the-seteventsubscribehandler-method"><div class="header-wrapper"><h3 id="x9-22-the-seteventsubscribehandler-method"><bdi class="secno">9.22 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-seteventsubscribehandler" data-idl="operation" data-title="setEventSubscribeHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setEventSubscribeHandler()|setEventSubscribeHandler(name, handler)" data-local-lt="ExposedThing.setEventSubscribeHandler|ExposedThing.setEventSubscribeHandler()|setEventSubscribeHandler" tabindex="0" aria-haspopup="dialog"><code>setEventSubscribeHandler()</code></dfn> method</h3><a class="self-link" href="#the-seteventsubscribehandler-method" aria-label="Permalink for Section 9.22"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="EventSubscriptionHandler">handler</var>.
        Sets the handler function that defines what to do when a subscription
        request is received for the specified <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-25">Event</a> matched by <var data-type="string">name</var>.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <p>
         The <var data-type="EventSubscriptionHandler">handler</var> callback function <em class="rfc2119">SHOULD</em> implement what to do when an
         subscribe request is received, for instance necessary initializations.
         Note that the handler for emitting <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-26">Events</a> is set separately.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one event subscribe handler for any given
        <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-27">Event</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="EventSubscriptionHandler">handler</var>, run the following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-16"><code>[[td]]</code></a>.<var>events</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[subscribeHandlers]]" href="#dfn-subscribehandlers" class="internalDFN" id="ref-for-dfn-subscribehandlers-1"><code>[[subscribeHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="EventSubscriptionHandler">handler</var>.
          </li>
          <li>
            Return <code>this</code>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-event-subscribe-requests"><div class="header-wrapper"><h3 id="x9-23-handling-event-subscribe-requests"><bdi class="secno">9.23 </bdi>Handling <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-28">Event</a> subscribe requests</h3><a class="self-link" href="#handling-event-subscribe-requests" aria-label="Permalink for Section 9.23"></a></div> 
      <div>
        When an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-29">Event</a> subscription request for <var>name</var> is received by the
        underlying platform with optional <var data-type="InteractionOptions">options</var>,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-62">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-63">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-17"><code>[[td]]</code></a>.<var>events</var>[<var>name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>, send back a
            <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[subscribeHandlers]]" href="#dfn-subscribehandlers" class="internalDFN" id="ref-for-dfn-subscribehandlers-2"><code>[[subscribeHandlers]]</code></a>[<var>name</var>] is a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>,
            invoke it given <var data-type="InteractionOptions">options</var> and stop.
          </li>
          <li>
            Otherwise implement the default subscriber mechanism:
            <ol>
              <li>
                Let <var>subscriber</var> be a tuple formed of <var data-type="InteractionOptions">options</var> (from which
                <var>uriVariables</var> and <var>data</var> may be used) and the
                subscriber information needed to create an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-30">Event</a>
                notification response.
              </li>
              <li>
                Set <var>this</var>.<a data-link-type="attribute" data-lt="[[eventListeners]]" href="#dfn-eventlisteners" class="internalDFN" id="ref-for-dfn-eventlisteners-1"><code>[[eventListeners]]</code></a>[<var>name</var>] to <var>subscriber</var>.
              </li>
            </ol>
          </li>
        </ol>
      </div>
    </section>

    <section id="the-seteventunsubscribehandler-method"><div class="header-wrapper"><h3 id="x9-24-the-seteventunsubscribehandler-method"><bdi class="secno">9.24 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-seteventunsubscribehandler" data-idl="operation" data-title="setEventUnsubscribeHandler()" data-dfn-for="ExposedThing" data-type="ExposedThing" data-lt="setEventUnsubscribeHandler()|setEventUnsubscribeHandler(name, handler)" data-local-lt="ExposedThing.setEventUnsubscribeHandler|ExposedThing.setEventUnsubscribeHandler()|setEventUnsubscribeHandler" tabindex="0" aria-haspopup="dialog"><code>setEventUnsubscribeHandler()</code></dfn> method</h3><a class="self-link" href="#the-seteventunsubscribehandler-method" aria-label="Permalink for Section 9.24"></a></div> 
      <p>
        Takes as arguments <var data-type="string">name</var> and <var data-type="EventSubscriptionHandler">handler</var>.
        Sets the handler function that defines what to do when the specified
        <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-31">Event</a> matched by <var data-type="string">name</var> is unsubscribed from.
        Throws on error.
        Returns a reference to <var>this</var> object for supporting chaining.
      </p>
      <p>
         The <var data-type="EventSubscriptionHandler">handler</var> callback function <em class="rfc2119">SHOULD</em> implement what to do when an
         unsubscribe request is received.
      </p>
      <p>
        There <em class="rfc2119">MUST</em> be at most one handler for any given <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-32">Event</a>, so newly added handlers <em class="rfc2119">MUST</em> replace the previous handlers.
      </p>
      <div>
        When the method is invoked given <var data-type="string">name</var> and
        <var data-type="EventSubscriptionHandler">handler</var>, run the following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-18"><code>[[td]]</code></a>.<var>events</var>[<var data-type="string">name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Set <var>this</var>.<a data-link-type="attribute" data-lt="[[unsubscribeHandlers]]" href="#dfn-unsubscribehandlers" class="internalDFN" id="ref-for-dfn-unsubscribehandlers-1"><code>[[unsubscribeHandlers]]</code></a>[<var data-type="string">name</var>] to <var data-type="EventSubscriptionHandler">handler</var>.
          </li>
          <li>
            Return <code>this</code>.
          </li>
        </ol>
      </div>
    </section>

    <section id="handling-event-unsubscribe-requests"><div class="header-wrapper"><h3 id="x9-25-handling-event-unsubscribe-requests"><bdi class="secno">9.25 </bdi>Handling <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-33">Event</a> unsubscribe requests</h3><a class="self-link" href="#handling-event-unsubscribe-requests" aria-label="Permalink for Section 9.25"></a></div> 
      <div>
        When an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-34">Event</a> unsubscribe request for <var>name</var> is received by the
        underlying platform optionally with <var data-type="InteractionOptions">options</var>,
        run the following steps:
        <ol>
          <li>
            If this operation is not supported, send back a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-64">Protocol Bindings</a> and stop.
          </li>
          <li>
            If this operation is not allowed, send back a <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
            according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-65">Protocol Bindings</a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-19"><code>[[td]]</code></a>.<var>events</var>[<var>name</var>].
          </li>
          <li>
            If <var>interaction</var> is <code>undefined</code>, send back a
            <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            If <var>this</var>.<a data-link-type="attribute" data-lt="[[unsubscribeHandlers]]" href="#dfn-unsubscribehandlers" class="internalDFN" id="ref-for-dfn-unsubscribehandlers-2"><code>[[unsubscribeHandlers]]</code></a>[<var>name</var>]
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exists</a> and is a <a data-link-type="idl" data-lt="Function" data-type="callback" href="https://webidl.spec.whatwg.org/#Function"><code>Function</code></a>, invoke it given <var data-type="InteractionOptions">options</var> and stop.
          </li>
          <li>
            Otherwise <var>name</var> [=map/exists] in <var>this</var>.<a data-link-type="attribute" data-lt="[[eventListeners]]" href="#dfn-eventlisteners" class="internalDFN" id="ref-for-dfn-eventlisteners-2"><code>[[eventListeners]]</code></a>,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-remove">remove</a> <var>name</var>.
          </li>
          <li>
            Return <code>this</code>.
          </li>
        </ol>
      </div>
    </section>
    
    <section id="handling-events"><div class="header-wrapper"><h3 id="x9-26-handling-events"><bdi class="secno">9.26 </bdi>Handling <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-35">Events</a></h3><a class="self-link" href="#handling-events" aria-label="Permalink for Section 9.26"></a></div> 
      <div>
        When an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-36">Event</a> with name <var>name</var> is emitted with
        <var data-type="InteractionInput">data</var> by the
        <a href="#the-emitevent-method">emitEvent()</a> method, run the
        following steps:
        <ol>
          <li>
            Let <var>listeners</var> be <a data-link-type="attribute" data-lt="[[eventListeners]]" href="#dfn-eventlisteners" class="internalDFN" id="ref-for-dfn-eventlisteners-3"><code>[[eventListeners]]</code></a>.<var>name</var>.
          </li>
          <li>
            For each <var>subscriber</var> in <var>listeners</var>, run the following sub-steps:
            <ol>
              <li>
                Create an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-37">Event</a> notification <var>response</var> according to the
                <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-66">Protocol Bindings</a> from <var data-type="InteractionInput">data</var> and <var>subscriber</var>, including
                its <var>options</var>.
              </li>
              <li>
                  If <var data-type="InteractionInput">data</var> is <code>undefined</code>, assume that the notification <var>response</var> 
                  will contain an empty data payload as specified by <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-67">Protocol Bindings</a>. 
              </li>
              <li>
                If the underlying protocol stack permits conveying event errors and
                if an error condition has been detected by the UA, create <var>response</var>
                as an error notification according to the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-68">Protocol Bindings</a>,
                using <var data-type="InteractionInput">data</var>, <var>subscriber</var> and its <var>options</var>.
                <div class="note" role="note" id="issue-container-generatedID-29"><div role="heading" class="note-title marker" id="h-note-11" aria-level="4"><span>Note</span></div><p class="">
                  The error reporting is protocol specific and it is encapsulated by
                  implementations. On the client end, the error listener passed with
                  the subscription will be invoked if the client UA detects the error.
                </p></div>
              </li>
              <li>
                Send <var>response</var> to the subscriber identified by <var>subscriber</var>.
              </li>
            </ol>
          </li>
        </ol>
      </div>
    </section>

    <section id="the-emitevent-method"><div class="header-wrapper"><h3 id="x9-27-the-emitevent-method"><bdi class="secno">9.27 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-emitevent" data-idl="operation" data-title="emitEvent()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="emitEvent()|emitEvent(name)|emitEvent(name, data)" data-local-lt="ExposedThing.emitEvent|ExposedThing.emitEvent()|emitEvent" tabindex="0" aria-haspopup="dialog"><code>emitEvent()</code></dfn> method</h3><a class="self-link" href="#the-emitevent-method" aria-label="Permalink for Section 9.27"></a></div> 
      <div>
        Takes as arguments <var data-type="string">name</var> denoting an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-38">Event</a> name and
        optionally <var data-type="InteractionInput">data</var>.
        Triggers emitting the <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-39">Event</a> with the optional data.
        The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Let <var>interaction</var> be <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-20"><code>[[td]]</code></a>.<var>events</var>.<var data-type="string">name</var>.
          </li>
          <li>
            If an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-40">Event</a> with the name <var data-type="string">name</var> is not found,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and stop.
          </li>
          <li>
            Make a request to the underlying platform to emit an <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-41">Event</a>
            with optional <var data-type="InteractionInput">data</var>. Call the <a href="#handling-events">handling events</a>
            steps.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-expose-method"><div class="header-wrapper"><h3 id="x9-28-the-expose-method"><bdi class="secno">9.28 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-expose" data-idl="operation" data-title="expose()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="expose()" data-local-lt="ExposedThing.expose|ExposedThing.expose()|expose" tabindex="0" aria-haspopup="dialog"><code>expose()</code></dfn> method</h3><a class="self-link" href="#the-expose-method" aria-label="Permalink for Section 9.28"></a></div> 
      <div>
        Start serving external requests for the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-40">Thing</a>, so that <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-19">WoT Interactions</a> using <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-82">Properties</a>, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-28">Action</a>s and <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-42">Event</a>s will be possible. The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Run the <a href="#dfn-expand-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-expand-a-td-3">expand a TD</a> steps on the <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-21"><code>[[td]]</code></a>.
          </li>
          <li>
            Run the <a href="#dfn-validate-a-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-validate-a-td-3">validate a TD</a> on <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-22"><code>[[td]]</code></a>. If that fails,
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            For each <var>key</var> in <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-23"><code>[[td]]</code></a>.<var>properties</var> initialize
            <var>this</var>.<a data-link-type="attribute" data-lt="[[propertyObservers]]" href="#dfn-propertyobservers" class="internalDFN" id="ref-for-dfn-propertyobservers-5"><code>[[propertyObservers]]</code></a>.<var>key</var> to an empty <a data-link-type="idl" data-lt="Array" data-type="interface" href="https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects"><code>Array</code></a>
            in order to store observe request data needed to notify the observers on value changes.
          </li>
          <li>
            For each <var>key</var> in <var>this</var>.<a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-24"><code>[[td]]</code></a>.<var>events</var> initialize
            <var>this</var>.<a data-link-type="attribute" data-lt="[[eventListeners]]" href="#dfn-eventlisteners" class="internalDFN" id="ref-for-dfn-eventlisteners-4"><code>[[eventListeners]]</code></a>.<var>key</var> to an empty <a data-link-type="idl" data-lt="Array" data-type="interface" href="https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects"><code>Array</code></a>
            in order to store subscribe request data needed to notify the subscribers on event emission.
          </li>
          <li>
            Set up the <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-20">WoT Interactions</a> based on introspecting <a data-link-type="attribute" data-lt="[[td]]" href="#dfn-td-1" class="internalDFN" id="ref-for-dfn-td-1-25"><code>[[td]]</code></a>
            as explained in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-td" title="Web of Things (WoT) Thing Description 1.1">WOT-TD</a></cite>] and [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-protocol-bindings" title="Web of Things (WoT) Binding Templates">WOT-PROTOCOL-BINDINGS</a></cite>].
            Make a request to the underlying platform to initialize the
            <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-69">Protocol Bindings</a> and then start serving external requests
            for <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-21">WoT Interactions</a> (read, write and observe <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-83">Properties</a>,
            invoke <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-29">Action</a>s and manage <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-43">Event</a> subscriptions),
            based on the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-70">Protocol Bindings</a>.
            Implementations <em class="rfc2119">MAY</em> reject this step for any reason (e.g. if they
            want to enforce further checks and constraints on interaction forms).
          </li>
          <li>
            If there was an error during the request, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with an <a data-link-type="idl" data-lt="Error" href="https://tc39.es/ecma262/multipage/#sec-error-objects"><code>Error</code></a> object <var>error</var> with <var>error</var>.<var>message</var> set to the error code seen by the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-71">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var> and stop.
          </li>
        </ol>
      </div>
    </section>

    <section id="the-destroy-method"><div class="header-wrapper"><h3 id="x9-29-the-destroy-method"><bdi class="secno">9.29 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-exposedthing-destroy" data-idl="operation" data-title="destroy()" data-dfn-for="ExposedThing" data-type="Promise" data-lt="destroy()" data-local-lt="ExposedThing.destroy|ExposedThing.destroy()|destroy" tabindex="0" aria-haspopup="dialog"><code>destroy()</code></dfn> method</h3><a class="self-link" href="#the-destroy-method" aria-label="Permalink for Section 9.29"></a></div> 
      <div>
        Stop serving external requests for the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-41">Thing</a> and destroy the object. Note that eventual unregistering should be done before invoking this method. The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            Return a <a data-link-type="idl" data-lt="Promise" href="https://tc39.es/ecma262/multipage/#sec-promise-objects"><code><code>Promise</code></code></a> <var data-type="Promise">promise</var> and execute the next steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
          </li>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Make a request to the underlying platform to stop serving external requests for <a href="#dfn-wot-interaction" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-interaction-22">WoT Interactions</a>, based on the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-72">Protocol Bindings</a>.
          </li>
          <li>
            If there was an error during the request, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#reject">reject</a> <var data-type="Promise">promise</var> with an <a data-link-type="idl" data-lt="Error" href="https://tc39.es/ecma262/multipage/#sec-error-objects"><code>Error</code></a> object <var>error</var> with its <var>message</var> set to the error code seen by the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-73">Protocol Bindings</a> and stop.
          </li>
          <li>
            Otherwise <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">resolve</a> <var data-type="Promise">promise</var> and stop.
          </li>
        </ol>
      </div>
    </section>

    <section id="exposedthing-examples"><div class="header-wrapper"><h3 id="x9-30-exposedthing-examples"><bdi class="secno">9.30 </bdi>ExposedThing Examples</h3><a class="self-link" href="#exposedthing-examples" aria-label="Permalink for Section 9.30"></a></div>
      
      <p>
        The next example illustrates how to create an <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-30"><code>ExposedThing</code></a> based on a partial <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-16">TD</a> object constructed beforehand.
      </p>
      <div class="example" id="example-create-exposedthing-with-a-simple-property">
        <div class="marker">
    <a class="self-link" href="#example-create-exposedthing-with-a-simple-property">Example<bdi> 6</bdi></a><span class="example-title">: Create ExposedThing with a simple Property</span>
  </div> <pre class="highlight" aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">let</span> temperaturePropertyDefinition = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>,
    <span class="hljs-attr">minimum</span>: -<span class="hljs-number">50</span>,
    <span class="hljs-attr">maximum</span>: <span class="hljs-number">10000</span>
  };
  <span class="hljs-keyword">let</span> tdFragment = {
    <span class="hljs-attr">properties</span>: {
      <span class="hljs-attr">temperature</span>: temperaturePropertyDefinition
    },
    <span class="hljs-attr">actions</span>: {
      <span class="hljs-attr">reset</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Reset the temperature sensor"</span>,
        <span class="hljs-attr">input</span>: {
          <span class="hljs-attr">temperature</span>: temperatureValueDefinition
        },
        <span class="hljs-attr">output</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">forms</span>: []
      },
    },
    <span class="hljs-attr">events</span>: {
      <span class="hljs-attr">onchange</span>: temperatureValueDefinition
    }
  };
  <span class="hljs-keyword">let</span> thing1 = <span class="hljs-keyword">await</span> WOT.produce(tdFragment);
  <span class="hljs-comment">// initialize Properties</span>
  <span class="hljs-keyword">await</span> thing1.writeProperty(<span class="hljs-string">"temperature"</span>, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// add service handlers</span>
  thing1.setPropertyReadHandler(<span class="hljs-string">"temperature"</span>, <span class="hljs-function">() =&gt;</span> {
     <span class="hljs-keyword">return</span> readLocalTemperatureSensor();  <span class="hljs-comment">// Promise</span>
  });
  <span class="hljs-comment">// start serving requests</span>
  <span class="hljs-keyword">await</span> thing1.expose();
} <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Error creating ExposedThing: "</span> + err);
}</code></pre>
      </div>

      <p>
        The next example illustrates how to add or modify a <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-84">Property</a> definition on an existing <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-31"><code>ExposedThing</code></a>: take its <var>td</var> property, add or modify it, then create another <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-32"><code>ExposedThing</code></a> with that.
      </p>
      <div class="example" id="example-add-an-object-property">
        <div class="marker">
    <a class="self-link" href="#example-add-an-object-property">Example<bdi> 7</bdi></a><span class="example-title">: Add an object Property</span>
  </div> <pre class="highlight" aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// create a deep copy of thing1's TD</span>
  <span class="hljs-keyword">let</span> instance = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">JSON</span>.stringify(thing1.td));
  <span class="hljs-keyword">const</span> statusValueDefinition = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"object"</span>,
    <span class="hljs-attr">properties</span>: {
      <span class="hljs-attr">brightness</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>,
        <span class="hljs-attr">minimum</span>: <span class="hljs-number">0.0</span>,
        <span class="hljs-attr">maximum</span>: <span class="hljs-number">100.0</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      <span class="hljs-attr">rgb</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"array"</span>,
        <span class="hljs-string">"minItems"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-string">"maxItems"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">items</span> : {
            <span class="hljs-string">"type"</span> : <span class="hljs-string">"number"</span>,
            <span class="hljs-string">"minimum"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"maximum"</span>: <span class="hljs-number">255</span>
        }
      }
  };
  instance[<span class="hljs-string">"name"</span>] = <span class="hljs-string">"mySensor"</span>;
  instance.properties[<span class="hljs-string">"brightness"</span>] = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>,
    <span class="hljs-attr">minimum</span>: <span class="hljs-number">0.0</span>,
    <span class="hljs-attr">maximum</span>: <span class="hljs-number">100.0</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  };
  instance.properties[<span class="hljs-string">"status"</span>] = statusValueDefinition;
  instance.actions[<span class="hljs-string">"getStatus"</span>] = {
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Get status object"</span>,
    <span class="hljs-attr">input</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">status</span> : statusValueDefinition;
    },
    <span class="hljs-attr">forms</span>: [...]
  };
  instance.events[<span class="hljs-string">"onstatuschange"</span>] = statusValueDefinition;
  instance.forms = [...];  <span class="hljs-comment">// update</span>
  <span class="hljs-keyword">var</span> thing2 = <span class="hljs-keyword">new</span> ExposedThing(instance);
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> add service handlers</span>
  <span class="hljs-keyword">await</span> thing2.expose();
  });
} <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Error creating ExposedThing: "</span> + err);
}</code></pre>
      </div>
      <p>
        The following will cover a set of examples for the generation of a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-33">Thing Description</a> from
        an <a href="#dom-exposedthinginit" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthinginit-5"><code>ExposedThingInit</code></a> using <a href="#dfn-expand-an-exposedthinginit" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-expand-an-exposedthinginit-2">expand an ExposedThingInit</a> steps. As hypothesis the runtime
        supports HTTP and COAP protocol bindings and it is hosted at 192.168.0.1.
      </p>
      <p>
        The next example shows how to exploit a <a href="#dom-exposedthinginit" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthinginit-6"><code>ExposedThingInit</code></a> to create a simple <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-34">Thing Description</a>
        with one <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-85">Property</a> with the default values.
      </p>
      <aside class="example ds-selector-tabs" id="example-create-a-thing-description-with-one-property-affordance"><div class="marker">
    <a class="self-link" href="#example-create-a-thing-description-with-one-property-affordance">Example<bdi> 8</bdi></a><span class="example-title">: Create a Thing Description with one Property affordance</span>
  </div>
        <div class="selectors">
          <button class="selected" data-selects="init">ExposedThingInit</button>
          <button data-selects="td">ThingDescription</button>
        </div>

        <pre class="selected init" title="An instance of the ExposedThingInit type" aria-busy="false"><code class="hljs">{
  "properties" : {
    "temperature":{}
  }
}</code></pre>
        <pre class="td" aria-busy="false"><code class="hljs">{
  "@context": [
    "https://www.w3.org/2019/wot/td/v1"
  ],
  "title": "Thing-123",
  "securityDefinitions": {
    "no_sec": {
      "scheme": "nosec"
    }
  },
  "security": "no_sec",
  "properties": {
    "temperature": {
      "forms": [{
        "href": "http://192.168.0.1:8080/properties/temperature",
        "contentType": "application/json"
      },
      {
      "href": "coap://192.168.0.1:9090/properties/temperature",
      "contentType": "application/json"
      }]
    }
  }
}</code></pre>
      </aside>
     <div class="note" id="issue-container-generatedID-30"><div role="heading" class="ednote-title marker" id="h-ednote-17" aria-level="4"><span>Editor's note</span></div><p class="">
       TODO: add more examples where the <a href="#dom-exposedthinginit" class="internalDFN" data-link-type="idl" id="ref-for-dom-exposedthinginit-7"><code>ExposedThingInit</code></a> contains suggested values that are replaced by the algorithm.
     </p></div>
    </section> 
  </section> 

  <section data-cite="webidl" data-dfn-for="ThingDiscoveryProcess" id="the-thingdiscoveryprocess-interface"><div class="header-wrapper"><h2 id="x10-the-thingdiscoveryprocess-interface"><bdi class="secno">10. </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-thingdiscoveryprocess" data-idl="interface" data-title="ThingDiscoveryProcess" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ThingDiscoveryProcess</code></dfn> interface</h2><a class="self-link" href="#the-thingdiscoveryprocess-interface" aria-label="Permalink for Section 10."></a></div>
    
    <p>
      Discovery is a distributed application that requires provisioning and support from participating network nodes (clients, servers, directory services). This API models the client side of typical discovery schemes supported by various IoT deployments.
    </p>
    <p>
      The <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-6"><code>ThingDiscoveryProcess</code></a> object provides the properties and methods
      controlling the discovery process and returning the results.
    </p>
    <pre class="idl def" id="webidl-180964908"><span class="idlHeader"><a class="self-link" href="#webidl-180964908">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-thingdiscoveryprocess" data-title="ThingDiscoveryProcess">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-thingdiscoveryprocess" id="ref-for-dom-thingdiscoveryprocess-7"><code>ThingDiscoveryProcess</code></a> {<span data-idl="" class="idlConstructor" id="idl-def-thingdiscoveryprocess-constructor-filter" data-title="constructor" data-dfn-for="ThingDiscoveryProcess">
  <dfn data-export="" data-dfn-type="constructor" id="dom-thingdiscoveryprocess-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="ThingDiscoveryProcess" data-lt="constructor()|constructor(filter)" data-local-lt="ThingDiscoveryProcess.constructor|ThingDiscoveryProcess.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-5"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-thingdiscoveryprocess-done" data-title="done" data-dfn-for="ThingDiscoveryProcess">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-thingdiscoveryprocess-done" id="ref-for-dom-thingdiscoveryprocess-done-1"><code>done</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-thingdiscoveryprocess-error" data-title="error" data-dfn-for="ThingDiscoveryProcess">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="https://tc39.es/ecma262/multipage/#sec-error-objects">Error</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-thingdiscoveryprocess-error" id="ref-for-dom-thingdiscoveryprocess-error-2"><code>error</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-thingdiscoveryprocess-stop" data-title="stop" data-dfn-for="ThingDiscoveryProcess"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-thingdiscoveryprocess-stop" id="ref-for-dom-thingdiscoveryprocess-stop-1"><code>stop</code></a>();</span><span data-idl="" class="idlIterable" id="idl-def-thingdiscoveryprocess-iterable" data-title="iterable" data-dfn-for="ThingDiscoveryProcess">
  async <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a>&lt;<a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-13"><code>ThingDescription</code></a>&gt;;</span>
};</span></code></pre>
    <p>
      The <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-8"><code>ThingDiscoveryProcess</code></a> object has the following <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal slot</a>s.
    </p>
    <table class="simple">
      <thead>
       <tr>
        <th>Internal Slot</th>
        <th>Initial value</th>
        <th>Description (<em>non-normative</em>)</th>
       </tr>
      </thead>
      <tbody data-link-for="ThingDiscoveryProcess">
       <tr>
        <td><dfn data-idl="" data-dfn-for="ThingDiscoveryProcess" data-noexport="" data-dfn-type="attribute" id="dfn-filter" tabindex="0" aria-haspopup="dialog">[[filter]]</dfn></td>
        <td><code>undefined</code></td>
        <td>The <a data-link-type="idl" data-lt="ThingFilter" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-6"><code>ThingFilter</code></a> object used in discovery.</td>
       </tr>
      <tr>
        <td><dfn data-idl="" data-dfn-for="ThingDiscoveryProcess" data-noexport="" data-dfn-type="attribute" id="dfn-url" tabindex="0" aria-haspopup="dialog">[[url]]</dfn></td>
        <td><code>undefined</code></td>
        <td>A <a data-link-type="idl" data-lt="URL" data-type="interface" href="https://url.spec.whatwg.org/#url"><code>URL</code></a> representing the <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-5">TD Directory</a> in a discovery.</td>
      </tr>
      </tbody>
    </table>
    <p>
      The <dfn data-export="" data-dfn-type="attribute" id="dom-thingdiscoveryprocess-done" data-idl="attribute" data-title="done" data-dfn-for="ThingDiscoveryProcess" data-type="boolean" data-lt="done" data-local-lt="ThingDiscoveryProcess.done" tabindex="0" aria-haspopup="dialog"><code>done</code></dfn> property is <code>true</code> if the discovery has been stopped
      or completed with no more results to report.
    </p>
    <p>
      The <dfn data-export="" data-dfn-type="attribute" id="dom-thingdiscoveryprocess-error" data-idl="attribute" data-title="error" data-dfn-for="ThingDiscoveryProcess" data-type="Error" data-lt="error" data-local-lt="ThingDiscoveryProcess.error" tabindex="0" aria-haspopup="dialog"><code>error</code></dfn> property represents the last error that occurred during the discovery process. Typically used for critical errors that stop discovery.
    </p>
    <p>
      The <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-9"><code>ThingDiscoveryProcess</code></a> object implements the
      <a href="https://tc39.es/ecma262/multipage/#sec-symbol.asynciterator">async iterator</a>
      concept.
    </p>

    <section id="constructing-thingdiscoveryprocess"><div class="header-wrapper"><h3 id="x10-1-constructing-thingdiscoveryprocess"><bdi class="secno">10.1 </bdi>Constructing <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-10"><code>ThingDiscoveryProcess</code></a></h3><a class="self-link" href="#constructing-thingdiscoveryprocess" aria-label="Permalink for Section 10.1"></a></div>
      <div>
        To create <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-11"><code>ThingDiscoveryProcess</code></a> with a <var data-type="ThingFilter">filter</var>, run the following steps:
        <ol>
          <li>
            If <var data-type="ThingFilter">filter</var> is not an object or <code>null</code>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> and stop.
          </li>
          <li>
            Let <var data-type="ThingDiscoveryProcess">discovery</var> be a new <a data-link-type="idl" data-lt="ThingDiscoveryProcess" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-12"><code>ThingDiscoveryProcess</code></a> object.
          </li>
          <li>
            Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[filter]]" href="#dfn-filter" class="internalDFN" id="ref-for-dfn-filter-3"><code>[[filter]]</code></a> to <var data-type="ThingFilter">filter</var>.
          </li>
          <li>
            Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="idl" href="#dom-thingdiscoveryprocess-done" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-done-2"><code>done</code></a> to <code>false</code>.
          </li>
          <li>
            Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="idl" href="#dom-thingdiscoveryprocess-error" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-error-3"><code>error</code></a> to <code>null</code>.
          </li>
          <li>
            Return <var data-type="ThingDiscoveryProcess">discovery</var>.
          </li>
        </ol>
      </div>
    </section>

    <section data-dfn-for="ThingFilter" id="the-thingfilter-dictionary"><div class="header-wrapper"><h3 id="x10-2-the-thingfilter-dictionary"><bdi class="secno">10.2 </bdi>The <dfn data-export="" data-dfn-type="dictionary" id="dom-thingfilter" data-idl="dictionary" data-title="ThingFilter" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>ThingFilter</code></dfn> dictionary</h3><a class="self-link" href="#the-thingfilter-dictionary" aria-label="Permalink for Section 10.2"></a></div>
      
      <p>
        Represents an object containing the constraints for discovering <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-42">Thing</a>s as key-value pairs.
      </p>
      <pre class="idl def" id="webidl-91611324"><span class="idlHeader"><a class="self-link" href="#webidl-91611324">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-thingfilter" data-title="ThingFilter">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-thingfilter" id="ref-for-dom-thingfilter-7"><code>ThingFilter</code></a> {<span data-idl="" class="idlMember" id="idl-def-thingfilter-fragment" data-title="fragment" data-dfn-for="ThingFilter"><span class="idlType">
  <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-thingfilter-fragment" id="ref-for-dom-thingfilter-fragment-1"><code>fragment</code></a>;</span>
  
};</span></code></pre>
      <p>
        The <dfn data-export="" data-dfn-type="dict-member" id="dom-thingfilter-fragment" data-idl="field" data-title="fragment" data-dfn-for="ThingFilter" data-type="object" tabindex="0" aria-haspopup="dialog"><code>fragment</code></dfn> property represents a template object used for matching property by property against discovered <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-43">Thing</a>s.
      </p>
      <div class="note" id="issue-container-generatedID-31"><div role="heading" class="ednote-title marker" id="h-ednote-18" aria-level="4"><span>Editor's note</span></div><p class="">
        The <var data-type="DOMString">query</var> property was temporarily removed from
        <a href="#dom-thingfilter" class="internalDFN" data-link-type="idl" id="ref-for-dom-thingfilter-8"><code>ThingFilter</code></a>, until it is standardized in the WoT Discovery
        task force. It represented a query string accepted by the implementation,
        for instance a SPARQL or JSON query. Support was to be implemented locally
        in the <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-5">WoT Runtime</a> or remotely as a service in a <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-6">TD Directory</a>.
      </p></div>
      <div class="note" id="issue-container-generatedID-32"><div role="heading" class="ednote-title marker" id="h-ednote-19" aria-level="4"><span>Editor's note</span></div><p class="">
        The <var data-type="USVString">url</var> property was removed. It used to represent the target
        entity serving the discovery request, for instance the URL of a
        <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-7">TD Directory</a>, or the URL of a directly targeted <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-44">Thing</a>,
        but these are implemented by dedicated methods now.
      </p></div>
    </section>

    <section id="the-discovery-process-algorithm"><div class="header-wrapper"><h3 id="x10-3-the-discovery-process-algorithm"><bdi class="secno">10.3 </bdi>The <dfn data-lt="discovery-process|discovery process" id="dfn-discovery-process" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">discovery process</dfn> algorithm</h3><a class="self-link" href="#the-discovery-process-algorithm" aria-label="Permalink for Section 10.3"></a></div>
      
      <div>
        Describes what to do during a discovery process that has already started.
        The algorithm, given <var data-type="ThingDiscoveryProcess">discovery</var>, runs the following steps:
        <ol>
          <li>
            Whenever a new <var>link</var> to a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-35">Thing Description</a>
            is discovered and provided by the underlying platform, run the following
            sub-steps:
            <ol>
              <li>
                Retrieve <var data-type="ThingDescription">td</var> as a JSON object, using the <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-74">Protocol Binding</a>
                used by the underlying discovery process (as specified by <var>link</var>).
                In the case of an HTTP(S) Binding, this process could use the
                <a href="https://fetch.spec.whatwg.org/#fetch-api">Fetch API</a>
                for the <var data-type="ThingDescription">td</var>'s retrieval.
              </li>
              <li>
                If that fails, set the <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="idl" href="#dom-thingdiscoveryprocess-error" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-error-4"><code>error</code></a>
                property to <a data-link-type="idl" data-lt="SyntaxError" data-type="exception" href="https://webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a>, discard <var data-type="ThingDescription">td</var> and continue the discovery process.
              </li>
            </ol>
          </li>
          <li>
            Whenever a <a href="#dfn-thing-descriptions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-descriptions-36">Thing Description</a> <var data-type="ThingDescription">td</var> is discovered and provided
            by the underlying platform or by the previous step, run the following
            sub-steps:
            <div class="note" role="note" id="issue-container-generatedID-33"><div role="heading" class="note-title marker" id="h-note-12" aria-level="4"><span>Note</span></div><p class="">
              At this point implementations <em class="rfc2119">MAY</em> control the flow of the discovery
              process (depending on memory constraints, for instance queue the
              results, or temporarily stop discovery if the queue is getting too
              large, or resume discovery when the queue is emptied sufficiently).
              These steps are run for each discovered/fetched <var data-type="ThingDescription">td</var>.
            </p></div>
            <ol>
              
              <li>
                Let <var>fragment</var> be <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="attribute" data-lt="[[filter]]" href="#dfn-filter" class="internalDFN" id="ref-for-dfn-filter-4"><code>[[filter]]</code></a>.<a data-link-type="idl" href="#dom-thingfilter-fragment" class="internalDFN" id="ref-for-dom-thingfilter-fragment-2"><code>fragment</code></a>.
              </li>
              <li>
                If <var>fragment</var> is an <a data-link-type="idl" data-lt="object" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><code>object</code></a>, then for each <var>key</var> defined in it:
                <ol>
                  <li>
                     Check if that <var>key</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exists</a> in <var>json</var> and <var>json</var>[<var>key</var> is equal to <var>fragment</var>.<var>key</var>.
                  </li>
                  <li>
                    If this is fails in any checks, discard <var data-type="ThingDescription">td</var> and continue the discovery process.
                  </li>
                </ol>
              </li>
              <li>
                Yield <var data-type="ThingDescription">td</var> using <a data-link-type="idl" data-type="attribute" href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-symbol.asynciterator"><code>asyncIterator</code></a>.
                <div class="note" id="issue-container-generatedID-34"><div role="heading" class="ednote-title marker" id="h-ednote-20" aria-level="4"><span>Editor's note</span></div><p class="">
                  Improve this step using proper asyncIterator terminology.
                </p></div>
              </li>
            </ol>
          </li>
          <li>
            Whenever an error occurs during the discovery process, run the following
            sub-steps:
            <div class="note" role="note" id="issue-container-generatedID-35"><div role="heading" class="note-title marker" id="h-note-13" aria-level="4"><span>Note</span></div><p class="">
              The last error is retained. Implementations <em class="rfc2119">MAY</em> choose to stop the
              discovery process if they consider it should be reported.
            </p></div>
            <ol>
              <li>
                Let <var>error</var> be a new <a data-link-type="idl" data-lt="Error" href="https://tc39.es/ecma262/multipage/#sec-error-objects"><code>Error</code></a> object.
                Set <var>error</var>.<var>name</var> to <code>"DiscoveryError"</code>.
              </li>
              <li>
                 If there was an error code or message provided by the
                 <a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-protocol-bindings-75">Protocol Bindings</a>, set <var>error</var>.<var>message</var> to that value as string.
              </li>
              <li>
                Set <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="idl" href="#dom-thingdiscoveryprocess-error" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-error-5"><code>error</code></a> to <var>error</var>.
              </li>
              <li>
                If the error is irrecoverable and discovery has been stopped by
                the underlying platform, or if the implementation decided to
                stop the discovery process and report the error, set
                <var data-type="ThingDiscoveryProcess">discovery</var>.<a data-link-type="idl" href="#dom-thingdiscoveryprocess-done" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-done-3"><code>done</code></a> to <code>true</code> and
                terminate these steps.
              </li>
            </ol>
          </li>
        </ol>
      </div>
   </section>

    <section id="the-stop-method-0"><div class="header-wrapper"><h3 id="x10-4-the-stop-method"><bdi class="secno">10.4 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-thingdiscoveryprocess-stop" data-idl="operation" data-title="stop()" data-dfn-for="ThingDiscoveryProcess" data-type="undefined" data-lt="stop()" data-local-lt="ThingDiscoveryProcess.stop|ThingDiscoveryProcess.stop()|stop" tabindex="0" aria-haspopup="dialog"><code>stop()</code></dfn> method</h3><a class="self-link" href="#the-stop-method-0" aria-label="Permalink for Section 10.4"></a></div>
      
      <div>
        Stops or suppresses the discovery process. It might not be supported by all discovery methods and endpoints, however, any further discovery results or errors will be discarded and the discovery is marked as done. The method <em class="rfc2119">MUST</em> run the following steps:
        <ol>
          <li>
            If invoking this method is not allowed for the current scripting context for security reasons, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a data-link-type="idl" data-lt="SecurityError" data-type="exception" href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a> and stop.
          </li>
          <li>
            Request the underlying platform to stop the discovery process. If this returns an error, or if it is not possible, for instance when discovery is based on open ended multicast requests, the implementation <em class="rfc2119">SHOULD</em> discard subsequent discovered items.
          </li>
          <li>
            Set the <a data-link-type="idl" href="#dom-thingdiscoveryprocess-done" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-done-4"><code>done</code></a> property to <code>true</code>.
          </li>
        </ol>
      </div>
    </section>

    <section id="discovery-examples"><div class="header-wrapper"><h3 id="x10-5-discovery-examples"><bdi class="secno">10.5 </bdi>Discovery Examples</h3><a class="self-link" href="#discovery-examples" aria-label="Permalink for Section 10.5"></a></div>
      
      <p>
        The following example finds <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-14"><code>ThingDescription</code></a> objects of <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-45">Thing</a>s that are exposed by local hardware, regardless how many instances of <a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-runtime-6">WoT Runtime</a> it is running
        Using the <a data-link-type="idl" data-type="attribute" href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-symbol.asynciterator"><code>asyncIterator</code></a> provided by the Discovery object, we can iterate asynchronously over the results and perform operations with the obtained <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-15"><code>ThingDescription</code></a> objects.
      </p>
      <div class="example" id="example-fetch-the-thing-description-of-a-thing">
        <div class="marker">
    <a class="self-link" href="#example-fetch-the-thing-description-of-a-thing">Example<bdi> 9</bdi></a><span class="example-title">: Fetch the Thing Description of a Thing</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">let</span> url = <span class="hljs-string">"https://mythings.com/thing1"</span>;
<span class="hljs-keyword">let</span> td = <span class="hljs-keyword">await</span> WOT.requestThingDescription(url);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found Thing Description for "</span> + td.title);</code></pre>
      </div>
      <p>
        The next example finds <a data-link-type="idl" data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-16"><code>ThingDescription</code></a> objects of <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-46">Thing</a>s listed in a <a href="#dfn-td-directory" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-directory-8">TD Directory</a> service. We set a timeout for safety.
      </p>
      <div class="example" id="example-discover-things-via-directory">
        <div class="marker">
    <a class="self-link" href="#example-discover-things-via-directory">Example<bdi> 10</bdi></a><span class="example-title">: Discover Things via directory</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">let</span> discovery = <span class="hljs-keyword">await</span> WOT.exploreDirectory(<span class="hljs-string">"http://directory.wotservice.org"</span>);
<span class="hljs-built_in">setTimeout</span>( <span class="hljs-function">() =&gt;</span> {
    discovery.stop();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery stopped after timeout."</span>);
  },
  <span class="hljs-number">3000</span>);
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> td <span class="hljs-keyword">of</span> discovery) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found Thing Description for "</span> + td.title);
  <span class="hljs-keyword">let</span> thing = <span class="hljs-keyword">new</span> ConsumedThing(td);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Thing name: "</span> + thing.getThingDescription().title);
};
<span class="hljs-keyword">if</span> (discovery.error) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery stopped because of an error: "</span> + error.message);
}</code></pre>
      </div>
      <p>
        The next example is for a generic discovery, by any means provisioned
        to the WOT runtime, including local Things, if any is available.
      </p>
      <div class="example" id="example-discover-things-in-a-network">
        <div class="marker">
    <a class="self-link" href="#example-discover-things-in-a-network">Example<bdi> 11</bdi></a><span class="example-title">: Discover Things in a network</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">let</span> discovery = <span class="hljs-keyword">await</span> WOT.discover();
<span class="hljs-built_in">setTimeout</span>( <span class="hljs-function">() =&gt;</span> {
    discovery.stop();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Stopped open-ended discovery"</span>);
  },
  <span class="hljs-number">10000</span>);
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> td <span class="hljs-keyword">of</span> discovery) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found Thing Description for "</span> + td.title);
};
<span class="hljs-keyword">if</span> (discovery.error) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery stopped because of an error: "</span> + error.message);
}</code></pre>
      </div>
    </section> 
  </section>

  <section id="security-and-privacy"><div class="header-wrapper"><h2 id="security"><bdi class="secno">11. </bdi>Security and Privacy</h2><a class="self-link" href="#security" aria-label="Permalink for Section 11."></a></div> 
    <p>
      A detailed discussion of security and privacy considerations for the Web of Things, including a threat model that can be adapted to various circumstances, is
      presented in the informative document [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
      This section discusses only security and privacy risks and possible mitigations
      directly relevant to the scripts and WoT Scripting API.
    </p>
    <p>
      A suggested set of best practices to improve security for WoT devices and
      services has been documented in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
      That document may be updated as security measures evolve.
      Following these practices does not guarantee security,
      but it might help avoid commonly known vulnerabilities.
    </p>
    <div>
      The WoT security risks and possible mitigations are concerning the following groups:
      <ul>
        <li>
          Implementors of WoT Runtimes that do not implement a Scripting Runtime.
          The [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-architecture" title="Web of Things (WoT) Architecture 1.1">WOT-ARCHITECTURE</a></cite>] document provides generic security guidelines
          for this group.
        </li>
        <li>
          Implementors of the WoT Scripting API in a WoT Scripting Runtime. This is the main scope and is covered in the
          <a href="#sec-security-consideration-runtime">
          Scripting Runtime Security and Privacy Risks</a> sub-section that
          contains normative text regarding security.
        </li>
        <li>
          WoT script developers, covered in the
          <a href="#sec-security-consideration-script">
          Script Security and Privacy Risks</a> sub-section that contains
          informative recommendations concerning security.
        </li>
      </ul>
    </div>

    <section id="sec-security-consideration-runtime"><div class="header-wrapper"><h3 id="x11-1-scripting-runtime-security-and-privacy-risks"><bdi class="secno">11.1 </bdi>Scripting Runtime Security and Privacy Risks</h3><a class="self-link" href="#sec-security-consideration-runtime" aria-label="Permalink for Section 11.1"></a></div>
      
      <p>
        This section is normative and contains specific risks relevant for the WoT Scripting Runtime.
      </p>

      <section id="sec-security-consideration-input"><div class="header-wrapper"><h4 id="x11-1-1-corrupted-input-security-and-privacy-risk"><bdi class="secno">11.1.1 </bdi>Corrupted Input Security and Privacy Risk</h4><a class="self-link" href="#sec-security-consideration-input" aria-label="Permalink for Section 11.1.1"></a></div>
        
        <p>
          A typical way to compromise any process is to send it a corrupted input
          via one of the exposed interfaces. This can be done to a script instance
          using WoT interface it exposes.
        </p>
        <dl><dt>Mitigation:</dt><dd>
          Implementors of this API <em class="rfc2119">SHOULD</em> perform validation on all script inputs. In addition to input validation, <a href="https://en.wikipedia.org/wiki/Fuzzing">fuzzing</a> should be used to verify that the input processing is done correctly. There are many tools and techniques in existence to do such validation. More details can be found in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
        </dd></dl>
      </section>

      <section id="sec-security-consideration-device-direct-access"><div class="header-wrapper"><h4 id="x11-1-2-physical-device-direct-access-security-and-privacy-risk"><bdi class="secno">11.1.2 </bdi>Physical Device Direct Access Security and Privacy Risk</h4><a class="self-link" href="#sec-security-consideration-device-direct-access" aria-label="Permalink for Section 11.1.2"></a></div>
        
        <p>
          In case a script is compromised or misbehaving, the underlying physical device (and potentially surrounded environment) can be damaged if a script can use directly exposed native device interfaces. If such interfaces lack safety checks on their inputs, they might bring the underlying physical device (or environment) to an unsafe state (i.e. device overheats and explodes).
        </p>
        <dl><dt>Mitigation:</dt><dd>
          The WoT Scripting Runtime <em class="rfc2119">SHOULD</em> avoid directly exposing the native device interfaces to the script developers. Instead, a WoT Scripting Runtime should provide a hardware abstraction layer for accessing the native device interfaces. Such hardware abstraction layer should refuse to execute commands that might put the device (or environment) to an unsafe state.
          Additionally, in order to reduce the damage to a physical WoT device in cases a script gets compromised, it is important to minimize the number of interfaces that are exposed or accessible to a particular script based on its functionality.
        </dd></dl>
      </section>

      <section id="sec-security-consideration-update-provisioning"><div class="header-wrapper"><h4 id="x11-1-3-provisioning-and-update-security-risk"><bdi class="secno">11.1.3 </bdi>Provisioning and Update Security Risk</h4><a class="self-link" href="#sec-security-consideration-update-provisioning" aria-label="Permalink for Section 11.1.3"></a></div>
        
        <p>
          If the WoT Scripting Runtime supports post-manufacturing provisioning
          or updates of scripts, WoT Scripting Runtime or any related data
          (including security credentials), it can be a major attack vector.
          An attacker can try to modify any above described element
          during the update or provisioning process or simply
          provision attacker's code and data directly.
        </p>
        <dl><dt>Mitigation:</dt><dd>
            Post-manufacturing provisioning or update of scripts,
            WoT Scripting Runtime or any related data should be done in a secure fashion.
            A set of recommendations for secure update and post-manufacturing
            provisioning can be found in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
        </dd></dl>
      </section>

      <section id="sec-security-consideration-credentials-storage"><div class="header-wrapper"><h4 id="x11-1-4-security-credentials-storage-security-and-privacy-risk"><bdi class="secno">11.1.4 </bdi>Security Credentials Storage Security and Privacy Risk</h4><a class="self-link" href="#sec-security-consideration-credentials-storage" aria-label="Permalink for Section 11.1.4"></a></div>
        
        <p>
          Typically the WoT Scripting Runtime needs to store the security credentials that are provisioned to a WoT device to operate in WoT network. If an attacker can compromise the confidentiality or integrity of these credentials, then it can obtain access to the WoT assets, impersonate WoT things or devices or create Denial-Of-Service (DoS) attacks.
        </p>
        <dl><dt>Mitigation:</dt><dd>
          The WoT Scripting Runtime should securely store the provisioned security credentials, guaranteeing their integrity and confidentiality.
          In case there are more than one tenant on a single WoT-enabled device, a WoT Scripting Runtime should guarantee isolation of each tenant provisioned security credentials.
          Additionally, in order to minimize a risk that provisioned security credentials get compromised, the WoT Scripting Runtime should not expose any API for scripts to query the provisioned security credentials.
        </dd></dl>
      </section>
    </section>

    <section id="sec-security-consideration-script" class="informative"><div class="header-wrapper"><h3 id="x11-2-script-security-and-privacy-risks"><bdi class="secno">11.2 </bdi>Script Security and Privacy Risks</h3><a class="self-link" href="#sec-security-consideration-script" aria-label="Permalink for Section 11.2"></a></div><p><em>This section is non-normative.</em></p>
      
      <p>
        This section describes specific risks relevant for script developers.
      </p>

      <section id="sec-security-consideration-script-input"><div class="header-wrapper"><h4 id="x11-2-1-corrupted-script-input-security-and-privacy-risk"><bdi class="secno">11.2.1 </bdi>Corrupted Script Input Security and Privacy Risk</h4><a class="self-link" href="#sec-security-consideration-script-input" aria-label="Permalink for Section 11.2.1"></a></div>
        
        <p>
          A script instance may receive data formats defined by the TD, or data formats defined by the applications. While the WoT Scripting Runtime <em class="rfc2119">SHOULD</em> perform validation on all input fields defined by the TD, scripts may be still exploited by input data.
        </p>
        <dl><dt>Mitigation:</dt><dd>
          Script developers should perform validation on all application defined script inputs. In addition to input validation, <a href="https://en.wikipedia.org/wiki/Fuzzing">fuzzing</a> could be used to verify that the input processing is done correctly. There are many tools and techniques in existence to do such validation. More details can be found in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
        </dd></dl>
      </section>

      <section id="sec-security-consideration-script-processing"><div class="header-wrapper"><h4 id="x11-2-2-denial-of-service-security-risk"><bdi class="secno">11.2.2 </bdi>Denial Of Service Security Risk</h4><a class="self-link" href="#sec-security-consideration-script-processing" aria-label="Permalink for Section 11.2.2"></a></div>
        
        <p>
          If a script performs a heavy functional processing on received requests before the request is authenticated, it presents a great risk for Denial-Of-Service (DOS) attacks.
        </p>
        <dl><dt>Mitigation:</dt><dd>
          Scripts should avoid heavy functional processing without prior successful
          authentication of requestor. The set of recommended authentication mechanisms
          can be found in [<cite><a class="bibref" data-link-type="biblio" href="#bib-wot-security" title="Web of Things (WoT) Security and Privacy Guidelines">WOT-SECURITY</a></cite>].
        </dd></dl>
      </section>

    </section>
  </section>

  <section class="appendix" id="api-design-rationale"><div class="header-wrapper"><h2 id="a-api-design-rationale"><bdi class="secno">A. </bdi>API design rationale</h2><a class="self-link" href="#api-design-rationale" aria-label="Permalink for Appendix A."></a></div>
    
    <p>
      API rationale usually belongs to a separate document, but in the WoT case
      the complexity of the context justifies including basic rationale here.
    </p>
    <section id="approaches-to-wot-application-development"><div class="header-wrapper"><h3 id="a-1-approaches-to-wot-application-development"><bdi class="secno">A.1 </bdi>Approaches to WoT application development</h3><a class="self-link" href="#approaches-to-wot-application-development" aria-label="Permalink for Appendix A.1"></a></div> 
      <p>
        The WoT Interest Group and Working Group have explored different
        approaches to application development for WoT that have been all
        implemented and tested.
      </p>
      <section id="no-scripting-api"><div class="header-wrapper"><h4 id="a-1-1-no-scripting-api"><bdi class="secno">A.1.1 </bdi>No Scripting API</h4><a class="self-link" href="#no-scripting-api" aria-label="Permalink for Appendix A.1.1"></a></div> 
        <p>
          It is possible to develop WoT applications that only use the
          <a href="#dfn-wot-network-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-network-interface-1">WoT network interface</a>, typically exposed by a WoT gateway that
          presents a RESTful API towards clients and implements IoT protocol
          plugins that communicate with supported IoT deployments. One such
          implementation is the
          <a href="https://iot.mozilla.org/">Mozilla WebThings</a> platform.
        </p>
      </section>
      <section id="simple-scripting-api"><div class="header-wrapper"><h4 id="a-1-2-simple-scripting-api"><bdi class="secno">A.1.2 </bdi>Simple Scripting API</h4><a class="self-link" href="#simple-scripting-api" aria-label="Permalink for Appendix A.1.2"></a></div> 
        <p>
          WoT <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-47">Thing</a>s show good synergy with software objects, so a
          <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-48">Thing</a> can be represented as a software object, with <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-86">Properties</a> represented as object properties, <a href="#dfn-actions" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-actions-30">Action</a>s as methods, and
          <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-44">Event</a>s as events. In addition, metadata is stored in special
          properties. Consuming and exposing is done with factory methods that
          produce a software object that directly represents a remote <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-49">Thing</a>
          and its interactions. One such implementation is the
          <a href="https://github.com/draggett/arena-webhub">Arena Web Hub</a>
          project.
        </p>
        <p>
          In the next example, a <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-50">Thing</a> that represents interactions with
          a lock would look like the following: the <var>status</var> property
          and the <code>open()</code> method are directly exposed on the object.
        </p>
        <div class="example" id="example-open-a-lock-with-a-simple-api">
        <div class="marker">
    <a class="self-link" href="#example-open-a-lock-with-a-simple-api">Example<bdi> 12</bdi></a><span class="example-title">: Open a lock with a simple API</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">let</span> lock = <span class="hljs-keyword">await</span> WoT.consume(‘https:<span class="hljs-comment">//td.my.com/lock-00123’);</span>
<span class="hljs-built_in">console</span>.log(lock.status);
lock.open(<span class="hljs-string">'withThisKey'</span>);</code></pre>
      </div>
      </section>
      <section id="this-api-aligned-with-the-web-of-things-wot-thing-description-1-1-specification"><div class="header-wrapper"><h4 id="a-1-3-this-api-aligned-with-the-web-of-things-wot-thing-description-1-1-specification"><bdi class="secno">A.1.3 </bdi>This API, aligned with the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification</h4><a class="self-link" href="#this-api-aligned-with-the-web-of-things-wot-thing-description-1-1-specification" aria-label="Permalink for Appendix A.1.3"></a></div> 
        <p>
          Since the direct mapping of <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-51">Thing</a>s to software objects have had
          some challenges, this specification takes another approach that
          exposes software objects to represent the <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-52">Thing</a> metadata as
          data property and the WoT interactions as methods. One implementation
          is <a href="https://github.com/eclipse/thingweb.node-wot">node-wot</a>
          in the <a href="http://www.thingweb.io/">Eclipse ThingWeb</a> project,
          which is the current reference implementation of the API specified in
          this document.
        </p>
        <p>
          The same example now would look like the following: the
          <var>status</var> property and the <code>open()</code> method are
          represented indirectly.
        </p>
        <div class="example" id="example-open-a-lock">
        <div class="marker">
    <a class="self-link" href="#example-open-a-lock">Example<bdi> 13</bdi></a><span class="example-title">: Open a lock</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(‘https:<span class="hljs-comment">//td.my.com/lock-00123’);</span>
<span class="hljs-keyword">let</span> td = <span class="hljs-keyword">await</span> res.json();
<span class="hljs-keyword">let</span> lock = <span class="hljs-keyword">new</span> ConsumedThing(td);
<span class="hljs-built_in">console</span>.log(lock.readProperty(‘status’));
lock.invokeAction(‘open’, <span class="hljs-string">'withThisKey'</span>);</code></pre>
      </div>
      </section>
      <p>
        In conclusion, the WoT WG decided to explore the third option that
        closely follows the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification. Based on this, a simple
        API can also be implemented.
        Since Scripting is an optional module in WoT, this leaves room for
        applications that only use the <a href="#dfn-wot-network-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-network-interface-2">WoT network interface</a>.
        Therefore all three approaches above are supported by the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification.
      </p>
      <p>
        Moreover, the <a href="#dfn-wot-network-interface" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-network-interface-3">WoT network interface</a> can be implemented in many languages
        and runtimes. Consider this API an example for what needs to be taken
        into consideration when designing a Scripting API for WoT.
      </p>
    </section>
    <section id="fetching-and-validating-a-td"><div class="header-wrapper"><h3 id="a-2-fetching-and-validating-a-td"><bdi class="secno">A.2 </bdi>Fetching and validating a TD</h3><a class="self-link" href="#fetching-and-validating-a-td" aria-label="Permalink for Appendix A.2"></a></div> 
      <p>
        The <code>fetch(url)</code> method has been part of this API in earlier versions. However, now fetching a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-17">TD</a> given a URL should be done with an external method, such as the <a href="https://fetch.spec.whatwg.org/#fetch-api">Fetch API</a> or a HTTP client library, which offer already standardized options on specifying fetch details. The reason is that while simple fetch operations (covering most use cases) could be done in this API, when various fetch options were needed, there was no point in duplicating existing work to re-expose those options in this API.
      </p>
      <p>
        Since fetching a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-18">TD</a> has been scoped out, and <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-19">TD</a> validation
        is defined externally in the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification, that is scoped out, too.
        This specification expects a <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-20">TD</a> as
        <a href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">parsed JSON object</a> that has been validated according to the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification.
      </p>
    </section>
    <section id="factory-vs-constructors"><div class="header-wrapper"><h3 id="a-3-factory-vs-constructors"><bdi class="secno">A.3 </bdi>Factory vs constructors</h3><a class="self-link" href="#factory-vs-constructors" aria-label="Permalink for Appendix A.3"></a></div> 
      <p>
        The factory methods for consuming and exposing <a href="#dfn-things" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-things-53">Thing</a>s are asynchronous and fully validate the input <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-21">TD</a>. In addition, one can also construct <a data-link-type="idl" data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-26"><code>ConsumedThing</code></a> and <a data-link-type="idl" data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-33"><code>ExposedThing</code></a> by providing a parsed and validated <a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-22">TD</a>. Platform initialization is then done when needed during the WoT interactions.
      </p>
    </section>
    <section id="observers"><div class="header-wrapper"><h3 id="a-4-observers"><bdi class="secno">A.4 </bdi>Observers</h3><a class="self-link" href="#observers" aria-label="Permalink for Appendix A.4"></a></div> 
      <p>
        Earlier drafts used the
        <a href="https://github.com/tc39/proposal-observable">Observer</a>
        construct, but since it has not become standard, a new design was needed
        that was light enough for embedded implementations. Therefore observing
        <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-87">Property</a> changes and handling WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-45">Event</a>s is done with
        callback registrations.
      </p>
    </section>
    <section id="using-events"><div class="header-wrapper"><h3 id="a-5-using-events"><bdi class="secno">A.5 </bdi>Using Events</h3><a class="self-link" href="#using-events" aria-label="Permalink for Appendix A.5"></a></div> 
      <div>
        This API ended up not using software events at all, for the following
        reasons:
        <ul>
          <li>
            Subscription to WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-46">Event</a>s may be different from handling software events (subscription might need parameters, might involve security tokens etc).
          </li>
          <li>
            Most implementations are for Node.js and browser implementations will likely be libraries (because possible dependency management issues in native implementations), using Events has been challenging.
          </li>
          <li>
            Observing <a href="#dfn-properties" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-properties-88">Property</a> changes and handling WoT <a href="#dfn-events" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-events-47">Event</a>s is done with the solution above.
          </li>
        </ul>
      </div>
    </section>
    <section id="polymorphic-functions"><div class="header-wrapper"><h3 id="a-6-polymorphic-functions"><bdi class="secno">A.6 </bdi>Polymorphic functions</h3><a class="self-link" href="#polymorphic-functions" aria-label="Permalink for Appendix A.6"></a></div> 
      <p>
        The reason to use function names like <code>readProperty()</code>, <code>readMultipleProperties()</code> etc. instead of a generic polymorphic <code>read()</code> function is that the current names map exactly to the <code>"op"</code> vocabulary from the <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/#form">Form</a> definition in the <cite><a data-matched-text="[[[WOT-TD]]]" href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">Web of Things (WoT) Thing Description 1.1</a></cite> specification.
      </p>
    </section>
  </section>

  <section class="appendix" id="Changes"><div class="header-wrapper"><h2 id="b-changes"><bdi class="secno">B. </bdi>Changes</h2><a class="self-link" href="#Changes" aria-label="Permalink for Appendix B."></a></div>
    <div>
      The following is a list of major changes to the document. Major versions of this specification are the following:
      <ul>
        <li>
          First Public Working Draft <a href="https://www.w3.org/TR/2017/WD-wot-scripting-api-20170914/">September 2017</a>.
        </li>
        <li>
          Working Draft <a href="https://www.w3.org/TR/2018/WD-wot-scripting-api-20180405/">April 2018</a>.
        </li>
        <li>
          Working Draft <a href="https://www.w3.org/TR/2018/WD-wot-scripting-api-20181129/">November 2018</a>.
        </li>
        <li>
          Working draft <a href="https://www.w3.org/TR/2019/WD-wot-scripting-api-20191028/">October 2019</a>.
        </li>
        <li>
          This version, introducing the following major changes:
          <ul>
            <li>
              Added support for <code>formIndex</code>, <code>InteractionData</code> including streams.
            </li>
            <li>
              Cleaned up the specification prose, aligned terminology and
              used modern ReSpec.
            </li>
            <li>
              Improved algorithm descriptions, included illustrative figures.
            </li>
          </ul>
        </li>
      </ul>
    </div>
    <p>
      For a complete list of changes, see the <a href="https://github.com/w3c/wot-scripting-api/commits/main">github change log</a>. You can also view the <a href="https://github.com/w3c/wot-scripting-api/issues?page=1&amp;state=closed">recently closed issues</a>.
    </p>
  </section>

  <section class="appendix" id="idl-index"><div class="header-wrapper"><h2 id="c-full-web-idl"><bdi class="secno">C. </bdi>Full Web IDL</h2><a class="self-link" href="#idl-index" aria-label="Permalink for Appendix C."></a></div> 
    
  <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlTypedef" data-title="ThingDescription">typedef<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-thingdescription" id="ref-for-dom-thingdescription-17"><code>ThingDescription</code></a>;</span>

<span data-idl="" class="idlNamespace" data-title="WOT">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-7"><code>WOT</code></a> {<span class="idlSectionComment">
  // methods defined in UA conformance classes
</span>};</span>

<span data-idl="" class="idlNamespace" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-8"><code>WOT</code></a> {<span data-idl="" class="idlMethod" data-title="consume" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-consumedthing" class="internalDFN" id="ref-for-dom-consumedthing-27"><code>ConsumedThing</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-consume" id="ref-for-dom-wot-consume-2"><code>consume</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-18"><code>ThingDescription</code></a></span> <span class="idlParamName">td</span>);</span>
};</span>

<span data-idl="" class="idlTypedef" data-title="ExposedThingInit">typedef<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <dfn data-export="" data-dfn-type="typedef" data-idl="typedef" data-title="ExposedThingInit" data-dfn-for="" class="idlID"><code>ExposedThingInit</code></dfn>;</span><span data-idl="" class="idlNamespace" data-title="WOT">

partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-9"><code>WOT</code></a> {<span data-idl="" class="idlMethod" data-title="produce" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-34"><code>ExposedThing</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-produce" id="ref-for-dom-wot-produce-2"><code>produce</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-exposedthinginit" class="internalDFN" id="ref-for-dom-exposedthinginit-8"><code>ExposedThingInit</code></a></span> <span class="idlParamName">init</span>);</span>
};</span>

<span data-idl="" class="idlNamespace" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-10"><code>WOT</code></a> {<span data-idl="" class="idlMethod" data-title="discover" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-13"><code>ThingDiscoveryProcess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-discover" id="ref-for-dom-wot-discover-2"><code>discover</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-9"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span>
};</span>

<span data-idl="" class="idlNamespace" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-11"><code>WOT</code></a> {<span data-idl="" class="idlMethod" data-title="exploreDirectory" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdiscoveryprocess" class="internalDFN" id="ref-for-dom-thingdiscoveryprocess-14"><code>ThingDiscoveryProcess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-exploredirectory" id="ref-for-dom-wot-exploredirectory-2"><code>exploreDirectory</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>,
      optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-10"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span>
};</span>

<span data-idl="" class="idlNamespace" data-title="WOT">partial namespace <a class="internalDFN idlID" data-link-type="namespace" href="#dom-wot" id="ref-for-dom-wot-12"><code>WOT</code></a> {<span data-idl="" class="idlMethod" data-title="requestThingDescription" data-dfn-for="WOT"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-19"><code>ThingDescription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wot-requestthingdescription" id="ref-for-dom-wot-requestthingdescription-2"><code>requestThingDescription</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span>
};</span>

<span data-idl="" class="idlTypedef" data-title="DataSchemaValue">typedef<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-dataschemavalue" id="ref-for-dom-dataschemavalue-4"><code>DataSchemaValue</code></a>;</span><span data-idl="" class="idlTypedef" data-title="InteractionInput">
typedef<span class="idlType"> (<a data-link-type="idl" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream">ReadableStream</a> or <a data-link-type="idl" href="#dom-dataschemavalue" class="internalDFN" id="ref-for-dom-dataschemavalue-5"><code>DataSchemaValue</code></a>)</span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-interactioninput" id="ref-for-dom-interactioninput-17"><code>InteractionInput</code></a>;</span>

<span data-idl="" class="idlInterface" data-title="InteractionOutput">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-interactionoutput" id="ref-for-dom-interactionoutput-25"><code>InteractionOutput</code></a> {<span data-idl="" class="idlAttribute" data-title="data" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://streams.spec.whatwg.org/#readablestream">ReadableStream</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-data" id="ref-for-dom-interactionoutput-data-2"><code>data</code></a>;</span><span data-idl="" class="idlAttribute" data-title="dataUsed" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-dataused" id="ref-for-dom-interactionoutput-dataused-2"><code>dataUsed</code></a>;</span><span data-idl="" class="idlAttribute" data-title="form" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dfn-forms" class="internalDFN" id="ref-for-dfn-forms-26">Form</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-form" id="ref-for-dom-interactionoutput-form-2"><code>form</code></a>;</span><span data-idl="" class="idlAttribute" data-title="schema" data-dfn-for="InteractionOutput">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dfn-dataschema" class="internalDFN" id="ref-for-dfn-dataschema-14">DataSchema</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-interactionoutput-schema" id="ref-for-dom-interactionoutput-schema-2"><code>schema</code></a>;</span><span data-idl="" class="idlMethod" data-title="arrayBuffer" data-dfn-for="InteractionOutput"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-interactionoutput-arraybuffer" id="ref-for-dom-interactionoutput-arraybuffer-2"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" data-title="value" data-dfn-for="InteractionOutput"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-dataschemavalue" class="internalDFN" id="ref-for-dom-dataschemavalue-6"><code>DataSchemaValue</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-interactionoutput-value" id="ref-for-dom-interactionoutput-value-2"><code>value</code></a>();</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ConsumedThing">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-consumedthing" id="ref-for-dom-consumedthing-28"><code>ConsumedThing</code></a> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="ConsumedThing">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="ConsumedThing" data-lt="constructor()|constructor(td)" data-local-lt="ConsumedThing.constructor|ConsumedThing.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-20"><code>ThingDescription</code></a></span> <span class="idlParamName">td</span>);</span><span data-idl="" class="idlMethod" data-title="readProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-26"><code>InteractionOutput</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readproperty" id="ref-for-dom-consumedthing-readproperty-2"><code>readProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">propertyName</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-15"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="readAllProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-6"><code>PropertyReadMap</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readallproperties" id="ref-for-dom-consumedthing-readallproperties-2"><code>readAllProperties</code></a>(
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-16"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="readMultipleProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-propertyreadmap" class="internalDFN" id="ref-for-dom-propertyreadmap-7"><code>PropertyReadMap</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-readmultipleproperties" id="ref-for-dom-consumedthing-readmultipleproperties-2"><code>readMultipleProperties</code></a>(<span class="idlType">
                              <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlParamName">propertyNames</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-17"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="writeProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-writeproperty" id="ref-for-dom-consumedthing-writeproperty-2"><code>writeProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">propertyName</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-18"><code>InteractionInput</code></a></span> <span class="idlParamName">value</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-18"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="writeMultipleProperties" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-writemultipleproperties" id="ref-for-dom-consumedthing-writemultipleproperties-2"><code>writeMultipleProperties</code></a>(<span class="idlType">
                              <a data-link-type="idl" href="#dom-propertywritemap" class="internalDFN" id="ref-for-dom-propertywritemap-3"><code>PropertyWriteMap</code></a></span> <span class="idlParamName">valueMap</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-19"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="invokeAction" data-dfn-for="ConsumedThing"><span class="idlType"><span class="idlSectionComment">
  /*Promise&lt;undefined&gt; writeAllProperties(
                              PropertyWriteMap valueMap,
                              optional InteractionOptions options = {});*/
  </span><a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-27"><code>InteractionOutput</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-invokeaction" id="ref-for-dom-consumedthing-invokeaction-2"><code>invokeAction</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">actionName</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-19"><code>InteractionInput</code></a></span> <span class="idlParamName">params</span> = {},
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-20"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="observeProperty" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-18"><code>Subscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-observeproperty" id="ref-for-dom-consumedthing-observeproperty-2"><code>observeProperty</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactionlistener" class="internalDFN" id="ref-for-dom-interactionlistener-4"><code>InteractionListener</code></a></span> <span class="idlParamName">listener</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-errorlistener" class="internalDFN" id="ref-for-dom-errorlistener-4"><code>ErrorListener</code></a></span> <span class="idlParamName">onerror</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-21"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="subscribeEvent" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-subscription" class="internalDFN" id="ref-for-dom-subscription-19"><code>Subscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-subscribeevent" id="ref-for-dom-consumedthing-subscribeevent-2"><code>subscribeEvent</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
                              <a data-link-type="idl" href="#dom-interactionlistener" class="internalDFN" id="ref-for-dom-interactionlistener-5"><code>InteractionListener</code></a></span> <span class="idlParamName">listener</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-errorlistener" class="internalDFN" id="ref-for-dom-errorlistener-5"><code>ErrorListener</code></a></span> <span class="idlParamName">onerror</span>,
                              optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-22"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="getThingDescription" data-dfn-for="ConsumedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-21"><code>ThingDescription</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-consumedthing-getthingdescription" id="ref-for-dom-consumedthing-getthingdescription-2"><code>getThingDescription</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" data-title="InteractionOptions">

dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-interactionoptions" id="ref-for-dom-interactionoptions-23"><code>InteractionOptions</code></a> {<span data-idl="" class="idlMember" data-title="formIndex" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-formindex" id="ref-for-dom-interactionoptions-formindex-2"><code>formIndex</code></a>;</span><span data-idl="" class="idlMember" data-title="uriVariables" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-urivariables" id="ref-for-dom-interactionoptions-urivariables-2"><code>uriVariables</code></a>;</span><span data-idl="" class="idlMember" data-title="data" data-dfn-for="InteractionOptions"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-interactionoptions-data" id="ref-for-dom-interactionoptions-data-2"><code>data</code></a>;</span>
};</span><span data-idl="" class="idlInterface" data-title="Subscription">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-subscription" id="ref-for-dom-subscription-20"><code>Subscription</code></a> {<span data-idl="" class="idlAttribute" data-title="active" data-dfn-for="Subscription">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-subscription-active" id="ref-for-dom-subscription-active-3"><code>active</code></a>;</span><span data-idl="" class="idlMethod" data-title="stop" data-dfn-for="Subscription"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-subscription-stop" id="ref-for-dom-subscription-stop-2"><code>stop</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-24"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span>
};</span><span data-idl="" class="idlInterface" data-title="PropertyReadMap">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-propertyreadmap" id="ref-for-dom-propertyreadmap-8"><code>PropertyReadMap</code></a> {<span data-idl="" class="idlMaplike" data-title="maplike" data-dfn-for="PropertyReadMap">
  readonly <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-maplike">maplike</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-28"><code>InteractionOutput</code></a>&gt;;</span>
};</span><span data-idl="" class="idlInterface" data-title="PropertyWriteMap">

[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-propertywritemap" id="ref-for-dom-propertywritemap-4"><code>PropertyWriteMap</code></a> {<span data-idl="" class="idlMaplike" data-title="maplike" data-dfn-for="PropertyWriteMap">
  readonly <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-maplike">maplike</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-20"><code>InteractionInput</code></a>&gt;;</span>
};</span><span data-idl="" class="idlCallback" data-title="InteractionListener">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-interactionlistener" id="ref-for-dom-interactionlistener-6"><code>InteractionListener</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-29"><code>InteractionOutput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlCallback" data-title="ErrorListener">
callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-errorlistener" id="ref-for-dom-errorlistener-6"><code>ErrorListener</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/#sec-error-objects">Error</a></span> <span class="idlParamName">error</span>);</span>

<span data-idl="" class="idlInterface" data-title="ExposedThing">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-exposedthing" id="ref-for-dom-exposedthing-35"><code>ExposedThing</code></a> {<span data-idl="" class="idlMethod" data-title="setPropertyReadHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-36"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyreadhandler" id="ref-for-dom-exposedthing-setpropertyreadhandler-2"><code>setPropertyReadHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-8"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="setPropertyWriteHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-37"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertywritehandler" id="ref-for-dom-exposedthing-setpropertywritehandler-2"><code>setPropertyWriteHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertywritehandler" class="internalDFN" id="ref-for-dom-propertywritehandler-4"><code>PropertyWriteHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="setPropertyObserveHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-38"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyobservehandler" id="ref-for-dom-exposedthing-setpropertyobservehandler-2"><code>setPropertyObserveHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-9"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="setPropertyUnobserveHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-39"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setpropertyunobservehandler" id="ref-for-dom-exposedthing-setpropertyunobservehandler-2"><code>setPropertyUnobserveHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-propertyreadhandler" class="internalDFN" id="ref-for-dom-propertyreadhandler-10"><code>PropertyReadHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="emitPropertyChange" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-emitpropertychange" id="ref-for-dom-exposedthing-emitpropertychange-2"><code>emitPropertyChange</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,
          optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-21"><code>InteractionInput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlMethod" data-title="setActionHandler" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-40"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-setactionhandler" id="ref-for-dom-exposedthing-setactionhandler-2"><code>setActionHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType"> <a data-link-type="idl" href="#dom-actionhandler" class="internalDFN" id="ref-for-dom-actionhandler-5"><code>ActionHandler</code></a></span> <span class="idlParamName">action</span>);</span><span data-idl="" class="idlMethod" data-title="setEventSubscribeHandler" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-41"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-seteventsubscribehandler" id="ref-for-dom-exposedthing-seteventsubscribehandler-2"><code>setEventSubscribeHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-6"><code>EventSubscriptionHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="setEventUnsubscribeHandler" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-link-type="idl" href="#dom-exposedthing" class="internalDFN" id="ref-for-dom-exposedthing-42"><code>ExposedThing</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-seteventunsubscribehandler" id="ref-for-dom-exposedthing-seteventunsubscribehandler-2"><code>setEventUnsubscribeHandler</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,<span class="idlType">
          <a data-link-type="idl" href="#dom-eventsubscriptionhandler" class="internalDFN" id="ref-for-dom-eventsubscriptionhandler-7"><code>EventSubscriptionHandler</code></a></span> <span class="idlParamName">handler</span>);</span><span data-idl="" class="idlMethod" data-title="emitEvent" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-emitevent" id="ref-for-dom-exposedthing-emitevent-2"><code>emitEvent</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span>,
          optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-22"><code>InteractionInput</code></a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlMethod" data-title="expose" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-expose" id="ref-for-dom-exposedthing-expose-3"><code>expose</code></a>();</span><span data-idl="" class="idlMethod" data-title="destroy" data-dfn-for="ExposedThing"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-destroy" id="ref-for-dom-exposedthing-destroy-2"><code>destroy</code></a>();</span><span data-idl="" class="idlMethod" data-title="getThingDescription" data-dfn-for="ExposedThing"><span class="idlType">

  <a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-22"><code>ThingDescription</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-exposedthing-getthingdescription" id="ref-for-dom-exposedthing-getthingdescription-2"><code>getThingDescription</code></a>();</span>
};</span><span data-idl="" class="idlCallback" data-title="PropertyReadHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-propertyreadhandler" id="ref-for-dom-propertyreadhandler-11"><code>PropertyReadHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-23"><code>InteractionInput</code></a>&gt;</span>(
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-25"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" data-title="PropertyWriteHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-propertywritehandler" id="ref-for-dom-propertywritehandler-5"><code>PropertyWriteHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>(<span class="idlType">
        <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-30"><code>InteractionOutput</code></a></span> <span class="idlParamName">value</span>,
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-26"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" data-title="ActionHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-actionhandler" id="ref-for-dom-actionhandler-6"><code>ActionHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-interactioninput" class="internalDFN" id="ref-for-dom-interactioninput-24"><code>InteractionInput</code></a>&gt;</span>(<span class="idlType">
        <a data-link-type="idl" href="#dom-interactionoutput" class="internalDFN" id="ref-for-dom-interactionoutput-31"><code>InteractionOutput</code></a></span> <span class="idlParamName">params</span>,
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-27"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlCallback" data-title="EventSubscriptionHandler">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-eventsubscriptionhandler" id="ref-for-dom-eventsubscriptionhandler-8"><code>EventSubscriptionHandler</code></a> =<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>(
        optional<span class="idlType"> <a data-link-type="idl" href="#dom-interactionoptions" class="internalDFN" id="ref-for-dom-interactionoptions-28"><code>InteractionOptions</code></a></span> <span class="idlParamName">options</span> = {});</span>

<span data-idl="" class="idlInterface" data-title="ThingDiscoveryProcess">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-thingdiscoveryprocess" id="ref-for-dom-thingdiscoveryprocess-15"><code>ThingDiscoveryProcess</code></a> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="ThingDiscoveryProcess">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="ThingDiscoveryProcess" data-lt="constructor()|constructor(filter)" data-local-lt="ThingDiscoveryProcess.constructor|ThingDiscoveryProcess.constructor()|constructor"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-thingfilter" class="internalDFN" id="ref-for-dom-thingfilter-11"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span> = {});</span><span data-idl="" class="idlAttribute" data-title="done" data-dfn-for="ThingDiscoveryProcess">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-thingdiscoveryprocess-done" id="ref-for-dom-thingdiscoveryprocess-done-5"><code>done</code></a>;</span><span data-idl="" class="idlAttribute" data-title="error" data-dfn-for="ThingDiscoveryProcess">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="https://tc39.es/ecma262/multipage/#sec-error-objects">Error</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-thingdiscoveryprocess-error" id="ref-for-dom-thingdiscoveryprocess-error-6"><code>error</code></a>;</span><span data-idl="" class="idlMethod" data-title="stop" data-dfn-for="ThingDiscoveryProcess"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-thingdiscoveryprocess-stop" id="ref-for-dom-thingdiscoveryprocess-stop-2"><code>stop</code></a>();</span><span data-idl="" class="idlIterable" data-title="iterable" data-dfn-for="ThingDiscoveryProcess">
  async <a data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a>&lt;<a data-link-type="idl" href="#dom-thingdescription" class="internalDFN" id="ref-for-dom-thingdescription-23"><code>ThingDescription</code></a>&gt;;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="ThingFilter">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-thingfilter" id="ref-for-dom-thingfilter-12"><code>ThingFilter</code></a> {<span data-idl="" class="idlMember" data-title="fragment" data-dfn-for="ThingFilter"><span class="idlType">
  <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-thingfilter-fragment" id="ref-for-dom-thingfilter-fragment-3"><code>fragment</code></a>;</span>
  
};</span></code></pre></section>

  <section class="appendix" id="acknowledgements"><div class="header-wrapper"><h2 id="d-acknowledgements"><bdi class="secno">D. </bdi>Acknowledgements</h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Appendix D."></a></div> 
    <p>
      Special thanks to former editor Johannes Hund (until August 2017, when at Siemens AG) and Kazuaki Nimura (until December 2018) for developing this specification. Also, the editors would like to thank Dave Raggett, Matthias Kovatsch, Michael Koster, Elena Reshetova, Michael McCool as well as the other WoT WG members for their comments, contributions and guidance.
    </p>
  </section>

  

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="e-references"><bdi class="secno">E. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix E."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="e-1-normative-references"><bdi class="secno">E.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix E.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-ecmascript">[ECMASCRIPT]</dt><dd>
      <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
    </dd><dt id="bib-fetch">[fetch]</dt><dd>
      <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
    </dd><dt id="bib-html">[html]</dt><dd>
      <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    </dd><dt id="bib-infra">[infra]</dt><dd>
      <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd><dt id="bib-json-schema">[JSON-SCHEMA]</dt><dd>
      <a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema"><cite>JSON Schema: A Media Type for Describing JSON Documents</cite></a>. Austin Wright; Henry Andrews; Ben Hutton; Greg Dennis.  Internet Engineering Task Force (IETF). 8 December 2020. Internet-Draft. URL: <a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema">https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd><dt id="bib-streams">[streams]</dt><dd>
      <a href="https://streams.spec.whatwg.org/"><cite>Streams Standard</cite></a>. Adam Rice; Domenic Denicola; Mattias Buelens; 吉野剛史 (Takeshi Yoshino).  WHATWG. Living Standard. URL: <a href="https://streams.spec.whatwg.org/">https://streams.spec.whatwg.org/</a>
    </dd><dt id="bib-typescript">[TYPESCRIPT]</dt><dd>
      <a href="https://www.typescriptlang.org/docs/handbook/intro.html"><cite>TypeScript Language Specification</cite></a>.  Microsoft. 1 October 2012. URL: <a href="https://www.typescriptlang.org/docs/handbook/intro.html">https://www.typescriptlang.org/docs/handbook/intro.html</a>
    </dd><dt id="bib-url">[url]</dt><dd>
      <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
    </dd><dt id="bib-webidl">[WEBIDL]</dt><dd>
      <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dd><dt id="bib-wot-architecture">[WOT-ARCHITECTURE]</dt><dd>
      <a href="https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/"><cite>Web of Things (WoT) Architecture 1.1</cite></a>.  W3C. 19 January 2023. URL: <a href="https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/">https://www.w3.org/TR/2023/CR-wot-architecture11-20230119/</a>
    </dd><dt id="bib-wot-protocol-bindings">[WOT-PROTOCOL-BINDINGS]</dt><dd>
      <a href="https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/"><cite>Web of Things (WoT) Binding Templates</cite></a>.  W3C. 30 January 2020. URL: <a href="https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/">https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/</a>
    </dd><dt id="bib-wot-security">[WOT-SECURITY]</dt><dd>
      <a href="https://www.w3.org/TR/2019/NOTE-wot-security-20191106/"><cite>Web of Things (WoT) Security and Privacy Guidelines</cite></a>.  W3C. 6 November 2019. URL: <a href="https://www.w3.org/TR/2019/NOTE-wot-security-20191106/">https://www.w3.org/TR/2019/NOTE-wot-security-20191106/</a>
    </dd><dt id="bib-wot-td">[WOT-TD]</dt><dd>
      <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/"><cite>Web of Things (WoT) Thing Description 1.1</cite></a>.  W3C. 19 January 2023. URL: <a href="https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/">https://www.w3.org/TR/2023/CR-wot-thing-description11-20230119/</a>
    </dd></dl>
  </section><section id="informative-references"><div class="header-wrapper"><h3 id="e-2-informative-references"><bdi class="secno">E.2 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix E.2"></a></div>
    
    <dl class="bibliography"><dt id="bib-wot-discovery">[WOT-DISCOVERY]</dt><dd>
      <a href="https://www.w3.org/TR/2023/CR-wot-discovery-20230119/"><cite>Web of Things (WoT) Discovery</cite></a>.  W3C. 19 January 2023. URL: <a href="https://www.w3.org/TR/2023/CR-wot-discovery-20230119/">https://www.w3.org/TR/2023/CR-wot-discovery-20230119/</a>
    </dd><dt id="bib-wot-use-cases">[WOT-USE-CASES]</dt><dd>
      <a href="https://www.w3.org/TR/2022/NOTE-wot-usecases-20220307/"><cite>Web of Things (WoT): Use Cases and Requirements</cite></a>.  W3C.  7 March 2022. URL: <a href="https://www.w3.org/TR/2022/NOTE-wot-usecases-20220307/">https://www.w3.org/TR/2022/NOTE-wot-usecases-20220307/</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-ua" aria-label="Links in this document to definition: UA">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-ua" aria-label="Permalink for definition: UA. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-ua-1" title="§ 3. Conformance">§ 3. Conformance</a> <a href="#ref-for-dfn-ua-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-ua-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-ua-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-ua-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-ua-6" title="Reference 6">(6)</a> <a href="#ref-for-dfn-ua-7" title="Reference 7">(7)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-consumer" aria-label="Links in this document to definition: WoT Consumer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-consumer" aria-label="Permalink for definition: WoT Consumer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-consumer-1" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-consumer-2" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-consumer-3" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-consumer-4" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-producer" aria-label="Links in this document to definition: WoT Producer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-producer" aria-label="Permalink for definition: WoT Producer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-producer-1" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-discovery" aria-label="Links in this document to definition: WoT Discovery">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-discovery" aria-label="Permalink for definition: WoT Discovery. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-discovery-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-discovery-2" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-discovery-3" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-things" aria-label="Links in this document to definition: Thing">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-things" aria-label="Permalink for definition: Thing. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-things-1" title="§ Abstract">§ Abstract</a> <a href="#ref-for-dfn-things-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-4" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-things-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-things-7" title="Reference 4">(4)</a> <a href="#ref-for-dfn-things-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-things-9" title="Reference 6">(6)</a> <a href="#ref-for-dfn-things-10" title="Reference 7">(7)</a> <a href="#ref-for-dfn-things-11" title="Reference 8">(8)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-12" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> 
    </li><li>
      <a href="#ref-for-dfn-things-13" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-things-14" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-15" title="Reference 3">(3)</a> <a href="#ref-for-dfn-things-16" title="Reference 4">(4)</a> <a href="#ref-for-dfn-things-17" title="Reference 5">(5)</a> <a href="#ref-for-dfn-things-18" title="Reference 6">(6)</a> <a href="#ref-for-dfn-things-19" title="Reference 7">(7)</a> <a href="#ref-for-dfn-things-20" title="Reference 8">(8)</a> <a href="#ref-for-dfn-things-21" title="Reference 9">(9)</a> <a href="#ref-for-dfn-things-22" title="Reference 10">(10)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-23" title="§ 2.3 Discovery">§ 2.3 Discovery</a> <a href="#ref-for-dfn-things-24" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-25" title="Reference 3">(3)</a> <a href="#ref-for-dfn-things-26" title="Reference 4">(4)</a> <a href="#ref-for-dfn-things-27" title="Reference 5">(5)</a> <a href="#ref-for-dfn-things-28" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-29" title="§ 4. Terminology and conventions">§ 4. Terminology and conventions</a> 
    </li><li>
      <a href="#ref-for-dfn-things-30" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dfn-things-31" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dfn-things-32" title="§ 8.3 The getThingDescription() method">§ 8.3 The getThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dfn-things-33" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> <a href="#ref-for-dfn-things-34" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-35" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-things-36" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dfn-things-37" title="§ 9.3 The getThingDescription() method">§ 9.3 The getThingDescription() method</a> <a href="#ref-for-dfn-things-38" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-39" title="§ 9.8 Handling requests for reading all Properties">§ 9.8 Handling requests for reading all Properties</a> 
    </li><li>
      <a href="#ref-for-dfn-things-40" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> 
    </li><li>
      <a href="#ref-for-dfn-things-41" title="§ 9.29 The destroy() method">§ 9.29 The destroy() method</a> 
    </li><li>
      <a href="#ref-for-dfn-things-42" title="§ 10.2 The ThingFilter dictionary">§ 10.2 The ThingFilter dictionary</a> <a href="#ref-for-dfn-things-43" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-44" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-45" title="§ 10.5 Discovery Examples">§ 10.5 Discovery Examples</a> <a href="#ref-for-dfn-things-46" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-47" title="§ A.1.2 Simple Scripting API">§ A.1.2 Simple Scripting API</a> <a href="#ref-for-dfn-things-48" title="Reference 2">(2)</a> <a href="#ref-for-dfn-things-49" title="Reference 3">(3)</a> <a href="#ref-for-dfn-things-50" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-51" title="§ A.1.3 This API, aligned with the Web of Things (WoT) Thing Description 1.1 specification">§ A.1.3 This API, aligned with the Web of Things (WoT) Thing Description 1.1 specification</a> <a href="#ref-for-dfn-things-52" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-things-53" title="§ A.3 Factory vs constructors">§ A.3 Factory vs constructors</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing-descriptions" aria-label="Links in this document to definition: Thing Description">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-thing-descriptions" aria-label="Permalink for definition: Thing Description. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-thing-descriptions-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-2" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-thing-descriptions-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-4" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> <a href="#ref-for-dfn-thing-descriptions-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-6" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-thing-descriptions-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-thing-descriptions-8" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-9" title="§ 2.3 Discovery">§ 2.3 Discovery</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-10" title="§ 5. The ThingDescription type">§ 5. The ThingDescription type</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-11" title="§ 5.2 Expanding a Thing Description">§ 5.2 Expanding a Thing Description</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-12" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-13" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-14" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-15" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> <a href="#ref-for-dfn-thing-descriptions-16" title="Reference 2">(2)</a> <a href="#ref-for-dfn-thing-descriptions-17" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-18" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> <a href="#ref-for-dfn-thing-descriptions-19" title="Reference 2">(2)</a> <a href="#ref-for-dfn-thing-descriptions-20" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-21" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-22" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-23" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-24" title="§ 8.3 The getThingDescription() method">§ 8.3 The getThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-25" title="§ 8.12 The InteractionOptions dictionary">§ 8.12 The InteractionOptions dictionary</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-26" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-27" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-28" title="§ 9.3 The getThingDescription() method">§ 9.3 The getThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-29" title="§ 9.5 The setPropertyReadHandler() method">§ 9.5 The setPropertyReadHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-30" title="§ 9.9 The setPropertyObserveHandler() method">§ 9.9 The setPropertyObserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-31" title="§ 9.11 The setPropertyUnobserveHandler() method">§ 9.11 The setPropertyUnobserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-32" title="§ 9.15 The setPropertyWriteHandler() method">§ 9.15 The setPropertyWriteHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-33" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> <a href="#ref-for-dfn-thing-descriptions-34" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-descriptions-35" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> <a href="#ref-for-dfn-thing-descriptions-36" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td" aria-label="Links in this document to definition: TD">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-td" aria-label="Permalink for definition: TD. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-td-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li><li>
      <a href="#ref-for-dfn-td-2" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-td-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-4" title="§ 4. Terminology and conventions">§ 4. Terminology and conventions</a> 
    </li><li>
      <a href="#ref-for-dfn-td-5" title="§ 5. The ThingDescription type">§ 5. The ThingDescription type</a> 
    </li><li>
      <a href="#ref-for-dfn-td-6" title="§ 5.1 Fetching a Thing Description">§ 5.1 Fetching a Thing Description</a> 
    </li><li>
      <a href="#ref-for-dfn-td-7" title="§ 5.2 Expanding a Thing Description">§ 5.2 Expanding a Thing Description</a> 
    </li><li>
      <a href="#ref-for-dfn-td-8" title="§ 5.3 Validating a Thing Description">§ 5.3 Validating a Thing Description</a> <a href="#ref-for-dfn-td-9" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-10" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-11" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-12" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-13" title="§ 8.12 The InteractionOptions dictionary">§ 8.12 The InteractionOptions dictionary</a> <a href="#ref-for-dfn-td-14" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-15" title="§ 8.18 ConsumedThing Examples">§ 8.18 ConsumedThing Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-td-16" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-td-17" title="§ A.2 Fetching and validating a TD">§ A.2 Fetching and validating a TD</a> <a href="#ref-for-dfn-td-18" title="Reference 2">(2)</a> <a href="#ref-for-dfn-td-19" title="Reference 3">(3)</a> <a href="#ref-for-dfn-td-20" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-21" title="§ A.3 Factory vs constructors">§ A.3 Factory vs constructors</a> <a href="#ref-for-dfn-td-22" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-partial-td" aria-label="Links in this document to definition: Partial TD">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-partial-td" aria-label="Permalink for definition: Partial TD. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-partial-td-1" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-web-of-things" aria-label="Links in this document to definition: Web of Things">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-web-of-things" aria-label="Permalink for definition: Web of Things. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-web-of-things-1" title="§ Abstract">§ Abstract</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-interface" aria-label="Links in this document to definition: WoT Interface">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-interface" aria-label="Permalink for definition: WoT Interface. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-interface-1" title="§ Abstract">§ Abstract</a> <a href="#ref-for-dfn-wot-interface-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-interface-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interface-4" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interface-5" title="§ 4. Terminology and conventions">§ 4. Terminology and conventions</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-protocol-bindings" aria-label="Links in this document to definition: Protocol Bindings">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-protocol-bindings" aria-label="Permalink for definition: Protocol Bindings. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-protocol-bindings-1" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> <a href="#ref-for-dfn-protocol-bindings-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-3" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> <a href="#ref-for-dfn-protocol-bindings-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-protocol-bindings-6" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-7" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-8" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-9" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> <a href="#ref-for-dfn-protocol-bindings-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-11" title="§ 7.4 Error handling">§ 7.4 Error handling</a> <a href="#ref-for-dfn-protocol-bindings-12" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-13" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> <a href="#ref-for-dfn-protocol-bindings-14" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-15" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> <a href="#ref-for-dfn-protocol-bindings-16" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-17" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> <a href="#ref-for-dfn-protocol-bindings-18" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-19" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-20" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> <a href="#ref-for-dfn-protocol-bindings-21" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-22" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> <a href="#ref-for-dfn-protocol-bindings-23" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-24" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-25" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-26" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> <a href="#ref-for-dfn-protocol-bindings-27" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-28" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dfn-protocol-bindings-29" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-30" title="§ 8.16 The ErrorListener callback">§ 8.16 The ErrorListener callback</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-31" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> <a href="#ref-for-dfn-protocol-bindings-32" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-33" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-34" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> <a href="#ref-for-dfn-protocol-bindings-35" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-36" title="Reference 3">(3)</a> <a href="#ref-for-dfn-protocol-bindings-37" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-38" title="§ 9.7 Handling requests for reading multiple Properties">§ 9.7 Handling requests for reading multiple Properties</a> <a href="#ref-for-dfn-protocol-bindings-39" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-40" title="Reference 3">(3)</a> <a href="#ref-for-dfn-protocol-bindings-41" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-42" title="§ 9.8 Handling requests for reading all Properties">§ 9.8 Handling requests for reading all Properties</a> <a href="#ref-for-dfn-protocol-bindings-43" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-44" title="§ 9.10 Handling Property observe requests">§ 9.10 Handling Property observe requests</a> <a href="#ref-for-dfn-protocol-bindings-45" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-46" title="§ 9.12 Handling Property unobserve requests">§ 9.12 Handling Property unobserve requests</a> <a href="#ref-for-dfn-protocol-bindings-47" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-48" title="Reference 3">(3)</a> <a href="#ref-for-dfn-protocol-bindings-49" title="Reference 4">(4)</a> <a href="#ref-for-dfn-protocol-bindings-50" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-51" title="§ 9.13 The emitPropertyChange() method">§ 9.13 The emitPropertyChange() method</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-52" title="§ 9.16 Handling requests for writing a Property">§ 9.16 Handling requests for writing a Property</a> <a href="#ref-for-dfn-protocol-bindings-53" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-54" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-55" title="§ 9.17 Handling requests for writing multiple Properties">§ 9.17 Handling requests for writing multiple Properties</a> <a href="#ref-for-dfn-protocol-bindings-56" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-57" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-58" title="§ 9.20 Handling Action requests">§ 9.20 Handling Action requests</a> <a href="#ref-for-dfn-protocol-bindings-59" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-60" title="Reference 3">(3)</a> <a href="#ref-for-dfn-protocol-bindings-61" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-62" title="§ 9.23 Handling Event subscribe requests">§ 9.23 Handling Event subscribe requests</a> <a href="#ref-for-dfn-protocol-bindings-63" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-64" title="§ 9.25 Handling Event unsubscribe requests">§ 9.25 Handling Event unsubscribe requests</a> <a href="#ref-for-dfn-protocol-bindings-65" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-66" title="§ 9.26 Handling Events">§ 9.26 Handling Events</a> <a href="#ref-for-dfn-protocol-bindings-67" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-68" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-69" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-protocol-bindings-70" title="Reference 2">(2)</a> <a href="#ref-for-dfn-protocol-bindings-71" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-72" title="§ 9.29 The destroy() method">§ 9.29 The destroy() method</a> <a href="#ref-for-dfn-protocol-bindings-73" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-protocol-bindings-74" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> <a href="#ref-for-dfn-protocol-bindings-75" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-runtime" aria-label="Links in this document to definition: WoT Runtime">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-runtime" aria-label="Permalink for definition: WoT Runtime. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-runtime-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-runtime-2" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-runtime-3" title="§ 2.3 Discovery">§ 2.3 Discovery</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-runtime-4" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-runtime-5" title="§ 10.2 The ThingFilter dictionary">§ 10.2 The ThingFilter dictionary</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-runtime-6" title="§ 10.5 Discovery Examples">§ 10.5 Discovery Examples</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-consume" aria-label="Links in this document to definition: Consuming a Thing Description">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-consume" aria-label="Permalink for definition: Consuming a Thing Description. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-consume-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li><li>
      <a href="#ref-for-dfn-consume-2" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td-directory" aria-label="Links in this document to definition: TD Directory">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-td-directory" aria-label="Permalink for definition: TD Directory. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-td-directory-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li><li>
      <a href="#ref-for-dfn-td-directory-2" title="§ 2.3 Discovery">§ 2.3 Discovery</a> 
    </li><li>
      <a href="#ref-for-dfn-td-directory-3" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> <a href="#ref-for-dfn-td-directory-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-directory-5" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> 
    </li><li>
      <a href="#ref-for-dfn-td-directory-6" title="§ 10.2 The ThingFilter dictionary">§ 10.2 The ThingFilter dictionary</a> <a href="#ref-for-dfn-td-directory-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-directory-8" title="§ 10.5 Discovery Examples">§ 10.5 Discovery Examples</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-properties" aria-label="Links in this document to definition: Property">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-properties" aria-label="Permalink for definition: Property. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-properties-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-2" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-properties-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-4" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> <a href="#ref-for-dfn-properties-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-6" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-7" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-properties-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-9" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-10" title="Reference 4">(4)</a> <a href="#ref-for-dfn-properties-11" title="Reference 5">(5)</a> <a href="#ref-for-dfn-properties-12" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-13" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-14" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> <a href="#ref-for-dfn-properties-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-16" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-17" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> <a href="#ref-for-dfn-properties-18" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-19" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> <a href="#ref-for-dfn-properties-20" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-21" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> <a href="#ref-for-dfn-properties-22" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-23" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-24" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-25" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> <a href="#ref-for-dfn-properties-26" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-27" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-28" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-29" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> <a href="#ref-for-dfn-properties-30" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-31" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-32" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-33" title="§ 8.13 The PropertyReadMap type">§ 8.13 The PropertyReadMap type</a> <a href="#ref-for-dfn-properties-34" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-35" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-36" title="§ 8.14 The PropertyWriteMap type">§ 8.14 The PropertyWriteMap type</a> <a href="#ref-for-dfn-properties-37" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-38" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-39" title="§ 8.15 The InteractionListener callback">§ 8.15 The InteractionListener callback</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-40" title="§ 8.17 The Subscription interface">§ 8.17 The Subscription interface</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-41" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-42" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-43" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-44" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> <a href="#ref-for-dfn-properties-45" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-46" title="§ 9.4 The PropertyReadHandler callback">§ 9.4 The PropertyReadHandler callback</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-47" title="§ 9.5 The setPropertyReadHandler() method">§ 9.5 The setPropertyReadHandler() method</a> <a href="#ref-for-dfn-properties-48" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-49" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-50" title="Reference 4">(4)</a> <a href="#ref-for-dfn-properties-51" title="Reference 5">(5)</a> <a href="#ref-for-dfn-properties-52" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-53" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> <a href="#ref-for-dfn-properties-54" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-55" title="§ 9.7 Handling requests for reading multiple Properties">§ 9.7 Handling requests for reading multiple Properties</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-56" title="§ 9.8 Handling requests for reading all Properties">§ 9.8 Handling requests for reading all Properties</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-57" title="§ 9.9 The setPropertyObserveHandler() method">§ 9.9 The setPropertyObserveHandler() method</a> <a href="#ref-for-dfn-properties-58" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-59" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-60" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-61" title="§ 9.10 Handling Property observe requests">§ 9.10 Handling Property observe requests</a> <a href="#ref-for-dfn-properties-62" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-63" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-64" title="§ 9.11 The setPropertyUnobserveHandler() method">§ 9.11 The setPropertyUnobserveHandler() method</a> <a href="#ref-for-dfn-properties-65" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-66" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-67" title="§ 9.12 Handling Property unobserve requests">§ 9.12 Handling Property unobserve requests</a> <a href="#ref-for-dfn-properties-68" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-69" title="§ 9.13 The emitPropertyChange() method">§ 9.13 The emitPropertyChange() method</a> <a href="#ref-for-dfn-properties-70" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-71" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-72" title="§ 9.14 The PropertyWriteHandler callback">§ 9.14 The PropertyWriteHandler callback</a> <a href="#ref-for-dfn-properties-73" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-74" title="§ 9.15 The setPropertyWriteHandler() method">§ 9.15 The setPropertyWriteHandler() method</a> <a href="#ref-for-dfn-properties-75" title="Reference 2">(2)</a> <a href="#ref-for-dfn-properties-76" title="Reference 3">(3)</a> <a href="#ref-for-dfn-properties-77" title="Reference 4">(4)</a> <a href="#ref-for-dfn-properties-78" title="Reference 5">(5)</a> <a href="#ref-for-dfn-properties-79" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-80" title="§ 9.16 Handling requests for writing a Property">§ 9.16 Handling requests for writing a Property</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-81" title="§ 9.17 Handling requests for writing multiple Properties">§ 9.17 Handling requests for writing multiple Properties</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-82" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-properties-83" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-84" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> <a href="#ref-for-dfn-properties-85" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-86" title="§ A.1.2 Simple Scripting API">§ A.1.2 Simple Scripting API</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-87" title="§ A.4 Observers">§ A.4 Observers</a> 
    </li><li>
      <a href="#ref-for-dfn-properties-88" title="§ A.5 Using Events">§ A.5 Using Events</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-actions" aria-label="Links in this document to definition: Action">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-actions" aria-label="Permalink for definition: Action. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-actions-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-2" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-actions-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-4" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-5" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-6" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-actions-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-8" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-9" title="§ 7.3 Using InteractionInput and InteractionOutput">§ 7.3 Using InteractionInput and InteractionOutput</a> <a href="#ref-for-dfn-actions-10" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-11" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-12" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-13" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> <a href="#ref-for-dfn-actions-14" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-15" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-16" title="§ 8.12 The InteractionOptions dictionary">§ 8.12 The InteractionOptions dictionary</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-17" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-18" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-19" title="§ 9.18 The ActionHandler callback">§ 9.18 The ActionHandler callback</a> <a href="#ref-for-dfn-actions-20" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-21" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-22" title="§ 9.19 The setActionHandler() method">§ 9.19 The setActionHandler() method</a> <a href="#ref-for-dfn-actions-23" title="Reference 2">(2)</a> <a href="#ref-for-dfn-actions-24" title="Reference 3">(3)</a> <a href="#ref-for-dfn-actions-25" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-26" title="§ 9.20 Handling Action requests">§ 9.20 Handling Action requests</a> <a href="#ref-for-dfn-actions-27" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-28" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-actions-29" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-actions-30" title="§ A.1.2 Simple Scripting API">§ A.1.2 Simple Scripting API</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-events" aria-label="Links in this document to definition: Event">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-events" aria-label="Permalink for definition: Event. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-events-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-events-2" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-events-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-4" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> 
    </li><li>
      <a href="#ref-for-dfn-events-5" title="§ 2.2 Exposing a Thing">§ 2.2 Exposing a Thing</a> <a href="#ref-for-dfn-events-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-events-8" title="Reference 4">(4)</a> <a href="#ref-for-dfn-events-9" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-10" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-events-11" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dfn-events-12" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-13" title="Reference 3">(3)</a> <a href="#ref-for-dfn-events-14" title="Reference 4">(4)</a> <a href="#ref-for-dfn-events-15" title="Reference 5">(5)</a> <a href="#ref-for-dfn-events-16" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-17" title="§ 8.15 The InteractionListener callback">§ 8.15 The InteractionListener callback</a> <a href="#ref-for-dfn-events-18" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-19" title="§ 8.17 The Subscription interface">§ 8.17 The Subscription interface</a> 
    </li><li>
      <a href="#ref-for-dfn-events-20" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> 
    </li><li>
      <a href="#ref-for-dfn-events-21" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dfn-events-22" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dfn-events-23" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-events-24" title="§ 9.21 The EventSubscriptionHandler callback">§ 9.21 The EventSubscriptionHandler callback</a> 
    </li><li>
      <a href="#ref-for-dfn-events-25" title="§ 9.22 The setEventSubscribeHandler() method">§ 9.22 The setEventSubscribeHandler() method</a> <a href="#ref-for-dfn-events-26" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-27" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-28" title="§ 9.23 Handling Event subscribe requests">§ 9.23 Handling Event subscribe requests</a> <a href="#ref-for-dfn-events-29" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-30" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-31" title="§ 9.24 The setEventUnsubscribeHandler() method">§ 9.24 The setEventUnsubscribeHandler() method</a> <a href="#ref-for-dfn-events-32" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-33" title="§ 9.25 Handling Event unsubscribe requests">§ 9.25 Handling Event unsubscribe requests</a> <a href="#ref-for-dfn-events-34" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-35" title="§ 9.26 Handling Events">§ 9.26 Handling Events</a> <a href="#ref-for-dfn-events-36" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-37" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-38" title="§ 9.27 The emitEvent() method">§ 9.27 The emitEvent() method</a> <a href="#ref-for-dfn-events-39" title="Reference 2">(2)</a> <a href="#ref-for-dfn-events-40" title="Reference 3">(3)</a> <a href="#ref-for-dfn-events-41" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-42" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-events-43" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-events-44" title="§ A.1.2 Simple Scripting API">§ A.1.2 Simple Scripting API</a> 
    </li><li>
      <a href="#ref-for-dfn-events-45" title="§ A.4 Observers">§ A.4 Observers</a> 
    </li><li>
      <a href="#ref-for-dfn-events-46" title="§ A.5 Using Events">§ A.5 Using Events</a> <a href="#ref-for-dfn-events-47" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-dataschema" aria-label="Links in this document to definition: DataSchema">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-dataschema" aria-label="Permalink for definition: DataSchema. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-dataschema-1" title="§ 7. Handling interaction data">§ 7. Handling interaction data</a> <a href="#ref-for-dfn-dataschema-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-3" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> <a href="#ref-for-dfn-dataschema-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-dataschema-5" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-6" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> <a href="#ref-for-dfn-dataschema-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-dataschema-8" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-9" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-10" title="§ 8.18 ConsumedThing Examples">§ 8.18 ConsumedThing Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-11" title="§ 9.4 The PropertyReadHandler callback">§ 9.4 The PropertyReadHandler callback</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-12" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-13" title="§ 9.14 The PropertyWriteHandler callback">§ 9.14 The PropertyWriteHandler callback</a> 
    </li><li>
      <a href="#ref-for-dfn-dataschema-14" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-forms" aria-label="Links in this document to definition: Form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-forms" aria-label="Permalink for definition: Form. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-forms-1" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> <a href="#ref-for-dfn-forms-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-3" title="§ 7. Handling interaction data">§ 7. Handling interaction data</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-4" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> <a href="#ref-for-dfn-forms-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-6" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> <a href="#ref-for-dfn-forms-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-8" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-9" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> <a href="#ref-for-dfn-forms-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-11" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> <a href="#ref-for-dfn-forms-12" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-13" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-14" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> <a href="#ref-for-dfn-forms-15" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-16" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> <a href="#ref-for-dfn-forms-17" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-18" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-19" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-20" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-21" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-22" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-23" title="§ 8.17.3 Finding an unsubscribe Form">§ 8.17.3 Finding an unsubscribe Form</a> <a href="#ref-for-dfn-forms-24" title="Reference 2">(2)</a> <a href="#ref-for-dfn-forms-25" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-forms-26" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-securityscheme" aria-label="Links in this document to definition: SecurityScheme">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-securityscheme" aria-label="Permalink for definition: SecurityScheme. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-securityscheme-1" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> <a href="#ref-for-dfn-securityscheme-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-nosecurityscheme" aria-label="Links in this document to definition: NoSecurityScheme">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-nosecurityscheme" aria-label="Permalink for definition: NoSecurityScheme. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-nosecurityscheme-1" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-interaction" aria-label="Links in this document to definition: WoT Interaction">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-interaction" aria-label="Permalink for definition: WoT Interaction. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-interaction-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-2" title="§ 2.1 Consuming a Thing">§ 2.1 Consuming a Thing</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-3" title="§ 4. Terminology and conventions">§ 4. Terminology and conventions</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-4" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> <a href="#ref-for-dfn-wot-interaction-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-interaction-6" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-7" title="§ 7. Handling interaction data">§ 7. Handling interaction data</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-8" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> <a href="#ref-for-dfn-wot-interaction-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-interaction-10" title="Reference 3">(3)</a> <a href="#ref-for-dfn-wot-interaction-11" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-12" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> <a href="#ref-for-dfn-wot-interaction-13" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-interaction-14" title="Reference 3">(3)</a> <a href="#ref-for-dfn-wot-interaction-15" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-16" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-17" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> <a href="#ref-for-dfn-wot-interaction-18" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-19" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-wot-interaction-20" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-interaction-21" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-interaction-22" title="§ 9.29 The destroy() method">§ 9.29 The destroy() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-interaction-affordance" aria-label="Links in this document to definition: Interaction Affordance">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-interaction-affordance" aria-label="Permalink for definition: Interaction Affordance. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-interaction-affordance-1" title="§ 4. Terminology and conventions">§ 4. Terminology and conventions</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-network-interface" aria-label="Links in this document to definition: WoT network interface">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-network-interface" aria-label="Permalink for definition: WoT network interface. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-network-interface-1" title="§ A.1.1 No Scripting API">§ A.1.1 No Scripting API</a> 
    </li><li>
      <a href="#ref-for-dfn-wot-network-interface-2" title="§ A.1 Approaches to WoT application development">§ A.1 Approaches to WoT application development</a> <a href="#ref-for-dfn-wot-network-interface-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-json-schema" aria-label="Links in this document to definition: JSON Schema">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-schema" aria-label="Permalink for definition: JSON Schema. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-json-schema-1" title="§ 7. Handling interaction data">§ 7. Handling interaction data</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdescription" aria-label="Links in this document to definition: ThingDescription">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdescription" aria-label="Permalink for definition: ThingDescription. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1625777409">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingdescription-1" title="§ 5. The ThingDescription type">§ 5. The ThingDescription type</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-2" title="§ 5.3 Validating a Thing Description">§ 5.3 Validating a Thing Description</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-3" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-4" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-5" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-6" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-7" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-thingdescription-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-9" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-10" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-11" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> <a href="#ref-for-dom-thingdescription-12" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-13" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-14" title="§ 10.5 Discovery Examples">§ 10.5 Discovery Examples</a> <a href="#ref-for-dom-thingdescription-15" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingdescription-16" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdescription-17" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-thingdescription-18" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingdescription-19" title="Reference 3">(3)</a> <a href="#ref-for-dom-thingdescription-20" title="Reference 4">(4)</a> <a href="#ref-for-dom-thingdescription-21" title="Reference 5">(5)</a> <a href="#ref-for-dom-thingdescription-22" title="Reference 6">(6)</a> <a href="#ref-for-dom-thingdescription-23" title="Reference 7">(7)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-expand-a-td" aria-label="Links in this document to definition: expand a TD">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-expand-a-td" aria-label="Permalink for definition: expand a TD. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-expand-a-td-1" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-expand-a-td-2" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-expand-a-td-3" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-a-td" aria-label="Links in this document to definition: validate a TD">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validate-a-td" aria-label="Permalink for definition: validate a TD. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-validate-a-td-1" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> 
    </li><li>
      <a href="#ref-for-dfn-validate-a-td-2" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-validate-a-td-3" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot" aria-label="Links in this document to definition: WOT">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot" aria-label="Permalink for definition: WOT. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1274931079">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-1" title="§ 6. The WOT namespace">§ 6. The WOT namespace</a> 
    </li><li>
      <a href="#ref-for-dom-wot-2" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-3" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-4" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-5" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-6" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-7" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-wot-8" title="Reference 2">(2)</a> <a href="#ref-for-dom-wot-9" title="Reference 3">(3)</a> <a href="#ref-for-dom-wot-10" title="Reference 4">(4)</a> <a href="#ref-for-dom-wot-11" title="Reference 5">(5)</a> <a href="#ref-for-dom-wot-12" title="Reference 6">(6)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-api-object" aria-label="Links in this document to definition: WoT API object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-wot-api-object" aria-label="Permalink for definition: WoT API object. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-wot-api-object-1" title="§ 3. Conformance">§ 3. Conformance</a> <a href="#ref-for-dfn-wot-api-object-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-wot-api-object-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-wot-api-object-4" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot-consume" aria-label="Links in this document to definition: consume()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot-consume" aria-label="Permalink for definition: consume(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-584946864">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-consume-1" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-consume-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot-produce" aria-label="Links in this document to definition: produce()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot-produce" aria-label="Permalink for definition: produce(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-631108207">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-produce-1" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-produce-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthinginit" aria-label="Links in this document to definition: ExposedThingInit">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthinginit" aria-label="Permalink for definition: ExposedThingInit. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthinginit-1" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> <a href="#ref-for-dom-exposedthinginit-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthinginit-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthinginit-4" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthinginit-5" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> <a href="#ref-for-dom-exposedthinginit-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthinginit-7" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthinginit-8" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-expand-an-exposedthinginit" aria-label="Links in this document to definition: expand an ExposedThingInit">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-expand-an-exposedthinginit" aria-label="Permalink for definition: expand an ExposedThingInit. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-expand-an-exposedthinginit-1" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-expand-an-exposedthinginit-2" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-an-exposedthinginit" aria-label="Links in this document to definition: validate an ExposedThingInit">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validate-an-exposedthinginit" aria-label="Permalink for definition: validate an ExposedThingInit. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-validate-an-exposedthinginit-1" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validating-an-object-with-json-schema" aria-label="Links in this document to definition: validating an object with JSON Schema">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validating-an-object-with-json-schema" aria-label="Permalink for definition: validating an object with JSON Schema. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-validating-an-object-with-json-schema-1" title="§ 6.2.2 Validating an ExposedThingInit">§ 6.2.2 Validating an ExposedThingInit</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot-discover" aria-label="Links in this document to definition: discover()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot-discover" aria-label="Permalink for definition: discover(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1851924891">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-discover-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-discover-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot-exploredirectory" aria-label="Links in this document to definition: exploreDirectory()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot-exploredirectory" aria-label="Permalink for definition: exploreDirectory(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1505638310">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-exploredirectory-1" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-exploredirectory-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wot-requestthingdescription" aria-label="Links in this document to definition: requestThingDescription()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-wot-requestthingdescription" aria-label="Permalink for definition: requestThingDescription(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1379080419">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-wot-requestthingdescription-1" title="§ 6.5 The requestThingDescription() method">§ 6.5 The requestThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dom-wot-requestthingdescription-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactioninput" aria-label="Links in this document to definition: InteractionInput">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactioninput" aria-label="Permalink for definition: InteractionInput. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1492583996">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactioninput-1" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-2" title="§ 7.3 Using InteractionInput and InteractionOutput">§ 7.3 Using InteractionInput and InteractionOutput</a> <a href="#ref-for-dom-interactioninput-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactioninput-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactioninput-5" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactioninput-6" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactioninput-7" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-8" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-interactioninput-9" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactioninput-10" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-11" title="§ 8.14 The PropertyWriteMap type">§ 8.14 The PropertyWriteMap type</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-12" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-interactioninput-13" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactioninput-14" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactioninput-15" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-16" title="§ 9.18 The ActionHandler callback">§ 9.18 The ActionHandler callback</a> 
    </li><li>
      <a href="#ref-for-dom-interactioninput-17" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-interactioninput-18" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactioninput-19" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactioninput-20" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactioninput-21" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactioninput-22" title="Reference 6">(6)</a> <a href="#ref-for-dom-interactioninput-23" title="Reference 7">(7)</a> <a href="#ref-for-dom-interactioninput-24" title="Reference 8">(8)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-dataschemavalue" aria-label="Links in this document to definition: DataSchemaValue">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-dataschemavalue" aria-label="Permalink for definition: DataSchemaValue. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1492583996">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-dataschemavalue-1" title="§ 7.1 The InteractionInput type">§ 7.1 The InteractionInput type</a> <a href="#ref-for-dom-dataschemavalue-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-dataschemavalue-3" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-dataschemavalue-4" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-dataschemavalue-5" title="Reference 2">(2)</a> <a href="#ref-for-dom-dataschemavalue-6" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput" aria-label="Links in this document to definition: InteractionOutput">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput" aria-label="Permalink for definition: InteractionOutput. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> <a href="#ref-for-dom-interactionoutput-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-3" title="§ 7.2.4 The create interaction request algorithm">§ 7.2.4 The create interaction request algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-4" title="§ 7.2.5 The parse interaction response algorithm">§ 7.2.5 The parse interaction response algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-5" title="§ 7.3 Using InteractionInput and InteractionOutput">§ 7.3 Using InteractionInput and InteractionOutput</a> <a href="#ref-for-dom-interactionoutput-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoutput-7" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoutput-8" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactionoutput-9" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactionoutput-10" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-11" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-interactionoutput-12" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoutput-13" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoutput-14" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-15" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-16" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-17" title="§ 8.13 The PropertyReadMap type">§ 8.13 The PropertyReadMap type</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-18" title="§ 8.15 The InteractionListener callback">§ 8.15 The InteractionListener callback</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-19" title="§ 8.18 ConsumedThing Examples">§ 8.18 ConsumedThing Examples</a> <a href="#ref-for-dom-interactionoutput-20" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-21" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-interactionoutput-22" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-23" title="§ 9.9 The setPropertyObserveHandler() method">§ 9.9 The setPropertyObserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-24" title="§ 9.14 The PropertyWriteHandler callback">§ 9.14 The PropertyWriteHandler callback</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-25" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-interactionoutput-26" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoutput-27" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoutput-28" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactionoutput-29" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactionoutput-30" title="Reference 6">(6)</a> <a href="#ref-for-dom-interactionoutput-31" title="Reference 7">(7)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-data" aria-label="Links in this document to definition: data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-data" aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-data-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-data-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-dataused" aria-label="Links in this document to definition: dataUsed">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-dataused" aria-label="Permalink for definition: dataUsed. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-dataused-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-dataused-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-form" aria-label="Links in this document to definition: form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-form" aria-label="Permalink for definition: form. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-form-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-form-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-schema" aria-label="Links in this document to definition: schema">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-schema" aria-label="Permalink for definition: schema. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-schema-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-schema-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-value" aria-label="Links in this document to definition: [[value]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-value" aria-label="Permalink for definition: [[value]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-value-1" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> <a href="#ref-for-dfn-value-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-value-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-value-4" title="§ 7.2.4 The create interaction request algorithm">§ 7.2.4 The create interaction request algorithm</a> <a href="#ref-for-dfn-value-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-value-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-value-7" title="Reference 4">(4)</a> <a href="#ref-for-dfn-value-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-value-9" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-value-10" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> <a href="#ref-for-dfn-value-11" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-value" aria-label="Links in this document to definition: value()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-value" aria-label="Permalink for definition: value(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-value-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-value-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoutput-arraybuffer" aria-label="Links in this document to definition: arrayBuffer()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoutput-arraybuffer" aria-label="Permalink for definition: arrayBuffer(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1620335296">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoutput-arraybuffer-1" title="§ 7.2 The InteractionOutput interface">§ 7.2 The InteractionOutput interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoutput-arraybuffer-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-check-data-schema" aria-label="Links in this document to definition: check data schema">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-check-data-schema" aria-label="Permalink for definition: check data schema. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-check-data-schema-1" title="§ 7.2.1 The value() function">§ 7.2.1 The value() function</a> 
    </li><li>
      <a href="#ref-for-dfn-check-data-schema-2" title="§ 7.2.3 The check data schema algorithm">§ 7.2.3 The check data schema algorithm</a> <a href="#ref-for-dfn-check-data-schema-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-check-data-schema-4" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-create-interaction-request" aria-label="Links in this document to definition: create interaction request">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-create-interaction-request" aria-label="Permalink for definition: create interaction request. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-create-interaction-request-1" title="§ 7.2.4 The create interaction request algorithm">§ 7.2.4 The create interaction request algorithm</a> <a href="#ref-for-dfn-create-interaction-request-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-create-interaction-request-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-create-interaction-request-4" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-create-interaction-request-5" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-create-interaction-request-6" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-parse-interaction-response" aria-label="Links in this document to definition: parse interaction response">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-parse-interaction-response" aria-label="Permalink for definition: parse interaction response. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-parse-interaction-response-1" title="§ 7.2.5 The parse interaction response algorithm">§ 7.2.5 The parse interaction response algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-2" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-3" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-4" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-5" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-6" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li><li>
      <a href="#ref-for-dfn-parse-interaction-response-7" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing" aria-label="Links in this document to definition: ConsumedThing">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing" aria-label="Permalink for definition: ConsumedThing. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-1" title="§ 3. Conformance">§ 3. Conformance</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-2" title="§ 6.1 The consume() method">§ 6.1 The consume() method</a> <a href="#ref-for-dom-consumedthing-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-consumedthing-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-consumedthing-5" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-6" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-7" title="§ 7.2.4 The create interaction request algorithm">§ 7.2.4 The create interaction request algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-8" title="§ 7.2.5 The parse interaction response algorithm">§ 7.2.5 The parse interaction response algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-9" title="§ 7.3 Using InteractionInput and InteractionOutput">§ 7.3 Using InteractionInput and InteractionOutput</a> <a href="#ref-for-dom-consumedthing-10" title="Reference 2">(2)</a> <a href="#ref-for-dom-consumedthing-11" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-12" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-13" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> <a href="#ref-for-dom-consumedthing-14" title="Reference 2">(2)</a> <a href="#ref-for-dom-consumedthing-15" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-16" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> <a href="#ref-for-dom-consumedthing-17" title="Reference 2">(2)</a> <a href="#ref-for-dom-consumedthing-18" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-19" title="§ 8.3 The getThingDescription() method">§ 8.3 The getThingDescription() method</a> <a href="#ref-for-dom-consumedthing-20" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-21" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-22" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-23" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-24" title="§ 8.18 ConsumedThing Examples">§ 8.18 ConsumedThing Examples</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-25" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-26" title="§ A.3 Factory vs constructors">§ A.3 Factory vs constructors</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-27" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-consumedthing-28" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-constructor" aria-label="Links in this document to definition: constructor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-constructor" aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td-0" aria-label="Links in this document to definition: [[td]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-td-0" aria-label="Permalink for definition: [[td]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-td-0-1" title="§ 8.2 Constructing ConsumedThing">§ 8.2 Constructing ConsumedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-2" title="§ 8.3 The getThingDescription() method">§ 8.3 The getThingDescription() method</a> <a href="#ref-for-dfn-td-0-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-4" title="§ 8.4 The readProperty() method">§ 8.4 The readProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-5" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> <a href="#ref-for-dfn-td-0-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-td-0-7" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-8" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-9" title="§ 8.7 The writeProperty() method">§ 8.7 The writeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-10" title="§ 8.8 The writeMultipleProperties() method">§ 8.8 The writeMultipleProperties() method</a> <a href="#ref-for-dfn-td-0-11" title="Reference 2">(2)</a> <a href="#ref-for-dfn-td-0-12" title="Reference 3">(3)</a> <a href="#ref-for-dfn-td-0-13" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-14" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-15" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-0-16" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-activesubscriptions" aria-label="Links in this document to definition: [[activeSubscriptions]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-activesubscriptions" aria-label="Permalink for definition: [[activeSubscriptions]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-activesubscriptions-1" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dfn-activesubscriptions-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-activesubscriptions-3" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-activeobservations" aria-label="Links in this document to definition: [[activeObservations]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-activeobservations" aria-label="Permalink for definition: [[activeObservations]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-activeobservations-1" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> <a href="#ref-for-dfn-activeobservations-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-activeobservations-3" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-getthingdescription" aria-label="Links in this document to definition: getThingDescription()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-getthingdescription" aria-label="Permalink for definition: getThingDescription(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-getthingdescription-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-getthingdescription-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-readproperty" aria-label="Links in this document to definition: readProperty()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-readproperty" aria-label="Permalink for definition: readProperty(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-readproperty-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-readproperty-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-readmultipleproperties" aria-label="Links in this document to definition: readMultipleProperties()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-readmultipleproperties" aria-label="Permalink for definition: readMultipleProperties(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-readmultipleproperties-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-readmultipleproperties-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-readallproperties" aria-label="Links in this document to definition: readAllProperties()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-readallproperties" aria-label="Permalink for definition: readAllProperties(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-readallproperties-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-readallproperties-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-writeproperty" aria-label="Links in this document to definition: writeProperty()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-writeproperty" aria-label="Permalink for definition: writeProperty(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-writeproperty-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-writeproperty-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-writemultipleproperties" aria-label="Links in this document to definition: writeMultipleProperties()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-writemultipleproperties" aria-label="Permalink for definition: writeMultipleProperties(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-writemultipleproperties-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-writemultipleproperties-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-observeproperty" aria-label="Links in this document to definition: observeProperty()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-observeproperty" aria-label="Permalink for definition: observeProperty(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-observeproperty-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-observeproperty-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-invokeaction" aria-label="Links in this document to definition: invokeAction()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-invokeaction" aria-label="Permalink for definition: invokeAction(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-invokeaction-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-invokeaction-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-consumedthing-subscribeevent" aria-label="Links in this document to definition: subscribeEvent()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-consumedthing-subscribeevent" aria-label="Permalink for definition: subscribeEvent(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-consumedthing-subscribeevent-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-consumedthing-subscribeevent-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoptions" aria-label="Links in this document to definition: InteractionOptions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoptions" aria-label="Permalink for definition: InteractionOptions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoptions-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-interactionoptions-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoptions-3" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoptions-4" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactionoptions-5" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactionoptions-6" title="Reference 6">(6)</a> <a href="#ref-for-dom-interactionoptions-7" title="Reference 7">(7)</a> <a href="#ref-for-dom-interactionoptions-8" title="Reference 8">(8)</a> <a href="#ref-for-dom-interactionoptions-9" title="Reference 9">(9)</a> <a href="#ref-for-dom-interactionoptions-10" title="Reference 10">(10)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoptions-11" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-interactionoptions-12" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoptions-13" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoptions-14" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoptions-15" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-interactionoptions-16" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionoptions-17" title="Reference 3">(3)</a> <a href="#ref-for-dom-interactionoptions-18" title="Reference 4">(4)</a> <a href="#ref-for-dom-interactionoptions-19" title="Reference 5">(5)</a> <a href="#ref-for-dom-interactionoptions-20" title="Reference 6">(6)</a> <a href="#ref-for-dom-interactionoptions-21" title="Reference 7">(7)</a> <a href="#ref-for-dom-interactionoptions-22" title="Reference 8">(8)</a> <a href="#ref-for-dom-interactionoptions-23" title="Reference 9">(9)</a> <a href="#ref-for-dom-interactionoptions-24" title="Reference 10">(10)</a> <a href="#ref-for-dom-interactionoptions-25" title="Reference 11">(11)</a> <a href="#ref-for-dom-interactionoptions-26" title="Reference 12">(12)</a> <a href="#ref-for-dom-interactionoptions-27" title="Reference 13">(13)</a> <a href="#ref-for-dom-interactionoptions-28" title="Reference 14">(14)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoptions-formindex" aria-label="Links in this document to definition: formIndex">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoptions-formindex" aria-label="Permalink for definition: formIndex. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoptions-formindex-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoptions-formindex-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoptions-urivariables" aria-label="Links in this document to definition: uriVariables">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoptions-urivariables" aria-label="Permalink for definition: uriVariables. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoptions-urivariables-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoptions-urivariables-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionoptions-data" aria-label="Links in this document to definition: data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionoptions-data" aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionoptions-data-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-interactionoptions-data-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-propertyreadmap" aria-label="Links in this document to definition: PropertyReadMap">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-propertyreadmap" aria-label="Permalink for definition: PropertyReadMap. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-propertyreadmap-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-propertyreadmap-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-propertyreadmap-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadmap-4" title="§ 8.5 The readMultipleProperties() method">§ 8.5 The readMultipleProperties() method</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadmap-5" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadmap-6" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-propertyreadmap-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-propertyreadmap-8" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-propertywritemap" aria-label="Links in this document to definition: PropertyWriteMap">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-propertywritemap" aria-label="Permalink for definition: PropertyWriteMap. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-propertywritemap-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-propertywritemap-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-propertywritemap-3" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-propertywritemap-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-interactionlistener" aria-label="Links in this document to definition: InteractionListener">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-interactionlistener" aria-label="Permalink for definition: InteractionListener. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-interactionlistener-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-interactionlistener-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionlistener-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-interactionlistener-4" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-interactionlistener-5" title="Reference 2">(2)</a> <a href="#ref-for-dom-interactionlistener-6" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-errorlistener" aria-label="Links in this document to definition: ErrorListener">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-errorlistener" aria-label="Permalink for definition: ErrorListener. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-errorlistener-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-errorlistener-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-errorlistener-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-errorlistener-4" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-errorlistener-5" title="Reference 2">(2)</a> <a href="#ref-for-dom-errorlistener-6" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-subscription" aria-label="Links in this document to definition: Subscription">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-subscription" aria-label="Permalink for definition: Subscription. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-subscription-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> <a href="#ref-for-dom-subscription-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-subscription-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-4" title="§ 8.1 Internal slots for ConsumedThing">§ 8.1 Internal slots for ConsumedThing</a> <a href="#ref-for-dom-subscription-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-6" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> <a href="#ref-for-dom-subscription-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-subscription-8" title="Reference 3">(3)</a> <a href="#ref-for-dom-subscription-9" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-10" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dom-subscription-11" title="Reference 2">(2)</a> <a href="#ref-for-dom-subscription-12" title="Reference 3">(3)</a> <a href="#ref-for-dom-subscription-13" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-14" title="§ 8.17.1 Internal slots for Subscription">§ 8.17.1 Internal slots for Subscription</a> <a href="#ref-for-dom-subscription-15" title="Reference 2">(2)</a> <a href="#ref-for-dom-subscription-16" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-17" title="§ 8.17.3 Finding an unsubscribe Form">§ 8.17.3 Finding an unsubscribe Form</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-18" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-subscription-19" title="Reference 2">(2)</a> <a href="#ref-for-dom-subscription-20" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-subscription-active" aria-label="Links in this document to definition: active">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-subscription-active" aria-label="Permalink for definition: active. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-subscription-active-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-active-2" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-active-3" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-type" aria-label="Links in this document to definition: [[type]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-type" aria-label="Permalink for definition: [[type]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-type-1" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-type-2" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li><li>
      <a href="#ref-for-dfn-type-3" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> <a href="#ref-for-dfn-type-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-type-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-type-6" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-type-7" title="§ 8.17.3 Finding an unsubscribe Form">§ 8.17.3 Finding an unsubscribe Form</a> <a href="#ref-for-dfn-type-8" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-name" aria-label="Links in this document to definition: [[name]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-name" aria-label="Permalink for definition: [[name]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-name-1" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-name-2" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li><li>
      <a href="#ref-for-dfn-name-3" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> <a href="#ref-for-dfn-name-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-name-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-name-6" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-interaction" aria-label="Links in this document to definition: [[interaction]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-interaction" aria-label="Permalink for definition: [[interaction]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-interaction-1" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> 
    </li><li>
      <a href="#ref-for-dfn-interaction-2" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> <a href="#ref-for-dfn-interaction-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-interaction-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-interaction-5" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-interaction-6" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> 
    </li><li>
      <a href="#ref-for-dfn-interaction-7" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dfn-interaction-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-interaction-9" title="Reference 3">(3)</a> <a href="#ref-for-dfn-interaction-10" title="Reference 4">(4)</a> <a href="#ref-for-dfn-interaction-11" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-interaction-12" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dfn-interaction-13" title="§ 8.17.3 Finding an unsubscribe Form">§ 8.17.3 Finding an unsubscribe Form</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-form" aria-label="Links in this document to definition: [[form]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-form" aria-label="Permalink for definition: [[form]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-form-1" title="§ 8.6 The readAllProperties() method">§ 8.6 The readAllProperties() method</a> <a href="#ref-for-dfn-form-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-form-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-form-4" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> <a href="#ref-for-dfn-form-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-form-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-form-7" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-form-8" title="§ 8.10 The invokeAction() method">§ 8.10 The invokeAction() method</a> <a href="#ref-for-dfn-form-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-form-10" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-form-11" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> <a href="#ref-for-dfn-form-12" title="Reference 2">(2)</a> <a href="#ref-for-dfn-form-13" title="Reference 3">(3)</a> <a href="#ref-for-dfn-form-14" title="Reference 4">(4)</a> <a href="#ref-for-dfn-form-15" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-form-16" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing" aria-label="Links in this document to definition: [[thing]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-thing" aria-label="Permalink for definition: [[thing]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-thing-1" title="§ 8.9 The observeProperty() method">§ 8.9 The observeProperty() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-2" title="§ 8.11 The subscribeEvent() method">§ 8.11 The subscribeEvent() method</a> 
    </li><li>
      <a href="#ref-for-dfn-thing-3" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> <a href="#ref-for-dfn-thing-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-subscription-stop" aria-label="Links in this document to definition: stop()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-subscription-stop" aria-label="Permalink for definition: stop(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1958208747">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-subscription-stop-1" title="§ 8. The ConsumedThing interface">§ 8. The ConsumedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-subscription-stop-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-find-a-matching-unsubscribe-form" aria-label="Links in this document to definition: find a matching unsubscribe form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-find-a-matching-unsubscribe-form" aria-label="Permalink for definition: find a matching unsubscribe form. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-find-a-matching-unsubscribe-form-1" title="§ 8.17.2 The stop() method">§ 8.17.2 The stop() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing" aria-label="Links in this document to definition: ExposedThing">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing" aria-label="Permalink for definition: ExposedThing. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-1" title="§ 3. Conformance">§ 3. Conformance</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-2" title="§ 6.2 The produce() method">§ 6.2 The produce() method</a> <a href="#ref-for-dom-exposedthing-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-exposedthing-5" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-6" title="§ 6.2.1 Expand an ExposedThingInit">§ 6.2.1 Expand an ExposedThingInit</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-7" title="§ 7.3 Using InteractionInput and InteractionOutput">§ 7.3 Using InteractionInput and InteractionOutput</a> <a href="#ref-for-dom-exposedthing-8" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-10" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-exposedthing-11" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-12" title="Reference 3">(3)</a> <a href="#ref-for-dom-exposedthing-13" title="Reference 4">(4)</a> <a href="#ref-for-dom-exposedthing-14" title="Reference 5">(5)</a> <a href="#ref-for-dom-exposedthing-15" title="Reference 6">(6)</a> <a href="#ref-for-dom-exposedthing-16" title="Reference 7">(7)</a> <a href="#ref-for-dom-exposedthing-17" title="Reference 8">(8)</a> <a href="#ref-for-dom-exposedthing-18" title="Reference 9">(9)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-19" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> <a href="#ref-for-dom-exposedthing-20" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-21" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> <a href="#ref-for-dom-exposedthing-22" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-23" title="Reference 3">(3)</a> <a href="#ref-for-dom-exposedthing-24" title="Reference 4">(4)</a> <a href="#ref-for-dom-exposedthing-25" title="Reference 5">(5)</a> <a href="#ref-for-dom-exposedthing-26" title="Reference 6">(6)</a> <a href="#ref-for-dom-exposedthing-27" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-28" title="§ 9.3 The getThingDescription() method">§ 9.3 The getThingDescription() method</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-29" title="§ 9.5 The setPropertyReadHandler() method">§ 9.5 The setPropertyReadHandler() method</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-30" title="§ 9.30 ExposedThing Examples">§ 9.30 ExposedThing Examples</a> <a href="#ref-for-dom-exposedthing-31" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-32" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-33" title="§ A.3 Factory vs constructors">§ A.3 Factory vs constructors</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-34" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-exposedthing-35" title="Reference 2">(2)</a> <a href="#ref-for-dom-exposedthing-36" title="Reference 3">(3)</a> <a href="#ref-for-dom-exposedthing-37" title="Reference 4">(4)</a> <a href="#ref-for-dom-exposedthing-38" title="Reference 5">(5)</a> <a href="#ref-for-dom-exposedthing-39" title="Reference 6">(6)</a> <a href="#ref-for-dom-exposedthing-40" title="Reference 7">(7)</a> <a href="#ref-for-dom-exposedthing-41" title="Reference 8">(8)</a> <a href="#ref-for-dom-exposedthing-42" title="Reference 9">(9)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td-1" aria-label="Links in this document to definition: [[td]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-td-1" aria-label="Permalink for definition: [[td]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-td-1-1" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-2" title="§ 9.3 The getThingDescription() method">§ 9.3 The getThingDescription() method</a> <a href="#ref-for-dfn-td-1-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-4" title="§ 9.5 The setPropertyReadHandler() method">§ 9.5 The setPropertyReadHandler() method</a> <a href="#ref-for-dfn-td-1-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-6" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-7" title="§ 9.9 The setPropertyObserveHandler() method">§ 9.9 The setPropertyObserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-8" title="§ 9.10 Handling Property observe requests">§ 9.10 Handling Property observe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-9" title="§ 9.11 The setPropertyUnobserveHandler() method">§ 9.11 The setPropertyUnobserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-10" title="§ 9.12 Handling Property unobserve requests">§ 9.12 Handling Property unobserve requests</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-11" title="§ 9.13 The emitPropertyChange() method">§ 9.13 The emitPropertyChange() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-12" title="§ 9.15 The setPropertyWriteHandler() method">§ 9.15 The setPropertyWriteHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-13" title="§ 9.16 Handling requests for writing a Property">§ 9.16 Handling requests for writing a Property</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-14" title="§ 9.19 The setActionHandler() method">§ 9.19 The setActionHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-15" title="§ 9.20 Handling Action requests">§ 9.20 Handling Action requests</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-16" title="§ 9.22 The setEventSubscribeHandler() method">§ 9.22 The setEventSubscribeHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-17" title="§ 9.23 Handling Event subscribe requests">§ 9.23 Handling Event subscribe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-18" title="§ 9.24 The setEventUnsubscribeHandler() method">§ 9.24 The setEventUnsubscribeHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-19" title="§ 9.25 Handling Event unsubscribe requests">§ 9.25 Handling Event unsubscribe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-20" title="§ 9.27 The emitEvent() method">§ 9.27 The emitEvent() method</a> 
    </li><li>
      <a href="#ref-for-dfn-td-1-21" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> <a href="#ref-for-dfn-td-1-22" title="Reference 2">(2)</a> <a href="#ref-for-dfn-td-1-23" title="Reference 3">(3)</a> <a href="#ref-for-dfn-td-1-24" title="Reference 4">(4)</a> <a href="#ref-for-dfn-td-1-25" title="Reference 5">(5)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-readhandlers" aria-label="Links in this document to definition: [[readHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-readhandlers" aria-label="Permalink for definition: [[readHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-readhandlers-1" title="§ 9.5 The setPropertyReadHandler() method">§ 9.5 The setPropertyReadHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-readhandlers-2" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> 
    </li><li>
      <a href="#ref-for-dfn-readhandlers-3" title="§ 9.13 The emitPropertyChange() method">§ 9.13 The emitPropertyChange() method</a> <a href="#ref-for-dfn-readhandlers-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-writehandlers" aria-label="Links in this document to definition: [[writeHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-writehandlers" aria-label="Permalink for definition: [[writeHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-writehandlers-1" title="§ 9.15 The setPropertyWriteHandler() method">§ 9.15 The setPropertyWriteHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-writehandlers-2" title="§ 9.16 Handling requests for writing a Property">§ 9.16 Handling requests for writing a Property</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-observehandlers" aria-label="Links in this document to definition: [[observeHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-observehandlers" aria-label="Permalink for definition: [[observeHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-observehandlers-1" title="§ 9.9 The setPropertyObserveHandler() method">§ 9.9 The setPropertyObserveHandler() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-unobservehandlers" aria-label="Links in this document to definition: [[unobserveHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-unobservehandlers" aria-label="Permalink for definition: [[unobserveHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-unobservehandlers-1" title="§ 9.11 The setPropertyUnobserveHandler() method">§ 9.11 The setPropertyUnobserveHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-unobservehandlers-2" title="§ 9.12 Handling Property unobserve requests">§ 9.12 Handling Property unobserve requests</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-actionhandlers" aria-label="Links in this document to definition: [[actionHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-actionhandlers" aria-label="Permalink for definition: [[actionHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-actionhandlers-1" title="§ 9.19 The setActionHandler() method">§ 9.19 The setActionHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-actionhandlers-2" title="§ 9.20 Handling Action requests">§ 9.20 Handling Action requests</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-subscribehandlers" aria-label="Links in this document to definition: [[subscribeHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-subscribehandlers" aria-label="Permalink for definition: [[subscribeHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-subscribehandlers-1" title="§ 9.22 The setEventSubscribeHandler() method">§ 9.22 The setEventSubscribeHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-subscribehandlers-2" title="§ 9.23 Handling Event subscribe requests">§ 9.23 Handling Event subscribe requests</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-unsubscribehandlers" aria-label="Links in this document to definition: [[unsubscribeHandlers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-unsubscribehandlers" aria-label="Permalink for definition: [[unsubscribeHandlers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-unsubscribehandlers-1" title="§ 9.24 The setEventUnsubscribeHandler() method">§ 9.24 The setEventUnsubscribeHandler() method</a> 
    </li><li>
      <a href="#ref-for-dfn-unsubscribehandlers-2" title="§ 9.25 Handling Event unsubscribe requests">§ 9.25 Handling Event unsubscribe requests</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-propertyobservers" aria-label="Links in this document to definition: [[propertyObservers]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-propertyobservers" aria-label="Permalink for definition: [[propertyObservers]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-propertyobservers-1" title="§ 9.10 Handling Property observe requests">§ 9.10 Handling Property observe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-propertyobservers-2" title="§ 9.12 Handling Property unobserve requests">§ 9.12 Handling Property unobserve requests</a> <a href="#ref-for-dfn-propertyobservers-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-propertyobservers-4" title="§ 9.13 The emitPropertyChange() method">§ 9.13 The emitPropertyChange() method</a> 
    </li><li>
      <a href="#ref-for-dfn-propertyobservers-5" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-eventlisteners" aria-label="Links in this document to definition: [[eventListeners]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-eventlisteners" aria-label="Permalink for definition: [[eventListeners]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-eventlisteners-1" title="§ 9.23 Handling Event subscribe requests">§ 9.23 Handling Event subscribe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-eventlisteners-2" title="§ 9.25 Handling Event unsubscribe requests">§ 9.25 Handling Event unsubscribe requests</a> 
    </li><li>
      <a href="#ref-for-dfn-eventlisteners-3" title="§ 9.26 Handling Events">§ 9.26 Handling Events</a> 
    </li><li>
      <a href="#ref-for-dfn-eventlisteners-4" title="§ 9.28 The expose() method">§ 9.28 The expose() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-getthingdescription" aria-label="Links in this document to definition: getThingDescription()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-getthingdescription" aria-label="Permalink for definition: getThingDescription(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-getthingdescription-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-getthingdescription-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-propertyreadhandler" aria-label="Links in this document to definition: PropertyReadHandler">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-propertyreadhandler" aria-label="Permalink for definition: PropertyReadHandler. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-propertyreadhandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-propertyreadhandler-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-propertyreadhandler-3" title="Reference 3">(3)</a> <a href="#ref-for-dom-propertyreadhandler-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadhandler-5" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> <a href="#ref-for-dom-propertyreadhandler-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadhandler-7" title="§ 9.6 Handling requests for reading a Property">§ 9.6 Handling requests for reading a Property</a> 
    </li><li>
      <a href="#ref-for-dom-propertyreadhandler-8" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-propertyreadhandler-9" title="Reference 2">(2)</a> <a href="#ref-for-dom-propertyreadhandler-10" title="Reference 3">(3)</a> <a href="#ref-for-dom-propertyreadhandler-11" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-setpropertyreadhandler" aria-label="Links in this document to definition: setPropertyReadHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-setpropertyreadhandler" aria-label="Permalink for definition: setPropertyReadHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-setpropertyreadhandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-setpropertyreadhandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-read-server-property" aria-label="Links in this document to definition: read server property">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-read-server-property" aria-label="Permalink for definition: read server property. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-read-server-property-1" title="§ 9.7 Handling requests for reading multiple Properties">§ 9.7 Handling requests for reading multiple Properties</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-read-multiple-properties" aria-label="Links in this document to definition: read multiple properties">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-read-multiple-properties" aria-label="Permalink for definition: read multiple properties. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-read-multiple-properties-1" title="§ 9.8 Handling requests for reading all Properties">§ 9.8 Handling requests for reading all Properties</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-setpropertyobservehandler" aria-label="Links in this document to definition: setPropertyObserveHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-setpropertyobservehandler" aria-label="Permalink for definition: setPropertyObserveHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-setpropertyobservehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-setpropertyobservehandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-setpropertyunobservehandler" aria-label="Links in this document to definition: setPropertyUnobserveHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-setpropertyunobservehandler" aria-label="Permalink for definition: setPropertyUnobserveHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-setpropertyunobservehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-setpropertyunobservehandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-emitpropertychange" aria-label="Links in this document to definition: emitPropertyChange()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-emitpropertychange" aria-label="Permalink for definition: emitPropertyChange(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-emitpropertychange-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-emitpropertychange-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-propertywritehandler" aria-label="Links in this document to definition: PropertyWriteHandler">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-propertywritehandler" aria-label="Permalink for definition: PropertyWriteHandler. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-propertywritehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-propertywritehandler-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-propertywritehandler-3" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dom-propertywritehandler-4" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-propertywritehandler-5" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-setpropertywritehandler" aria-label="Links in this document to definition: setPropertyWriteHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-setpropertywritehandler" aria-label="Permalink for definition: setPropertyWriteHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-setpropertywritehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-setpropertywritehandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-property-steps" aria-label="Links in this document to definition: update property steps">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-update-property-steps" aria-label="Permalink for definition: update property steps. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-update-property-steps-1" title="§ 9.17 Handling requests for writing multiple Properties">§ 9.17 Handling requests for writing multiple Properties</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-actionhandler" aria-label="Links in this document to definition: ActionHandler">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-actionhandler" aria-label="Permalink for definition: ActionHandler. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-actionhandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-actionhandler-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-actionhandler-3" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dom-actionhandler-4" title="§ 9.18 The ActionHandler callback">§ 9.18 The ActionHandler callback</a> 
    </li><li>
      <a href="#ref-for-dom-actionhandler-5" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-actionhandler-6" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-setactionhandler" aria-label="Links in this document to definition: setActionHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-setactionhandler" aria-label="Permalink for definition: setActionHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-setactionhandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-setactionhandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-eventsubscriptionhandler" aria-label="Links in this document to definition: EventSubscriptionHandler">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-eventsubscriptionhandler" aria-label="Permalink for definition: EventSubscriptionHandler. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-eventsubscriptionhandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> <a href="#ref-for-dom-eventsubscriptionhandler-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-eventsubscriptionhandler-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-eventsubscriptionhandler-4" title="§ 9.1 Internal slots for ExposedThing">§ 9.1 Internal slots for ExposedThing</a> <a href="#ref-for-dom-eventsubscriptionhandler-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-eventsubscriptionhandler-6" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-eventsubscriptionhandler-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-eventsubscriptionhandler-8" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-seteventsubscribehandler" aria-label="Links in this document to definition: setEventSubscribeHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-seteventsubscribehandler" aria-label="Permalink for definition: setEventSubscribeHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-seteventsubscribehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-seteventsubscribehandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-seteventunsubscribehandler" aria-label="Links in this document to definition: setEventUnsubscribeHandler()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-seteventunsubscribehandler" aria-label="Permalink for definition: setEventUnsubscribeHandler(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-seteventunsubscribehandler-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-seteventunsubscribehandler-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-emitevent" aria-label="Links in this document to definition: emitEvent()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-emitevent" aria-label="Permalink for definition: emitEvent(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-emitevent-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-emitevent-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-expose" aria-label="Links in this document to definition: expose()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-expose" aria-label="Permalink for definition: expose(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-expose-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-expose-2" title="§ 9.2 Constructing ExposedThing">§ 9.2 Constructing ExposedThing</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-expose-3" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-exposedthing-destroy" aria-label="Links in this document to definition: destroy()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-exposedthing-destroy" aria-label="Permalink for definition: destroy(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1354481242">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-exposedthing-destroy-1" title="§ 9. The ExposedThing interface">§ 9. The ExposedThing interface</a> 
    </li><li>
      <a href="#ref-for-dom-exposedthing-destroy-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdiscoveryprocess" aria-label="Links in this document to definition: ThingDiscoveryProcess">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdiscoveryprocess" aria-label="Permalink for definition: ThingDiscoveryProcess. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-180964908">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingdiscoveryprocess-1" title="§ 3. Conformance">§ 3. Conformance</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-2" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> <a href="#ref-for-dom-thingdiscoveryprocess-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-4" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> <a href="#ref-for-dom-thingdiscoveryprocess-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-6" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> <a href="#ref-for-dom-thingdiscoveryprocess-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingdiscoveryprocess-8" title="Reference 3">(3)</a> <a href="#ref-for-dom-thingdiscoveryprocess-9" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-10" title="§ 10.1 Constructing ThingDiscoveryProcess">§ 10.1 Constructing ThingDiscoveryProcess</a> <a href="#ref-for-dom-thingdiscoveryprocess-11" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingdiscoveryprocess-12" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-13" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-thingdiscoveryprocess-14" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingdiscoveryprocess-15" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdiscoveryprocess-constructor" aria-label="Links in this document to definition: constructor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdiscoveryprocess-constructor" aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-filter" aria-label="Links in this document to definition: [[filter]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-filter" aria-label="Permalink for definition: [[filter]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-filter-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-filter-2" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dfn-filter-3" title="§ 10.1 Constructing ThingDiscoveryProcess">§ 10.1 Constructing ThingDiscoveryProcess</a> 
    </li><li>
      <a href="#ref-for-dfn-filter-4" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-url" aria-label="Links in this document to definition: [[url]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-url" aria-label="Permalink for definition: [[url]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-url-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-url-2" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdiscoveryprocess-done" aria-label="Links in this document to definition: done">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdiscoveryprocess-done" aria-label="Permalink for definition: done. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-180964908">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingdiscoveryprocess-done-1" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-done-2" title="§ 10.1 Constructing ThingDiscoveryProcess">§ 10.1 Constructing ThingDiscoveryProcess</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-done-3" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-done-4" title="§ 10.4 The stop() method">§ 10.4 The stop() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-done-5" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdiscoveryprocess-error" aria-label="Links in this document to definition: error">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdiscoveryprocess-error" aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-180964908">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingdiscoveryprocess-error-1" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-error-2" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-error-3" title="§ 10.1 Constructing ThingDiscoveryProcess">§ 10.1 Constructing ThingDiscoveryProcess</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-error-4" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> <a href="#ref-for-dom-thingdiscoveryprocess-error-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-error-6" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingfilter" aria-label="Links in this document to definition: ThingFilter">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingfilter" aria-label="Permalink for definition: ThingFilter. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-91611324">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingfilter-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> <a href="#ref-for-dom-thingfilter-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-3" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> <a href="#ref-for-dom-thingfilter-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-5" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> <a href="#ref-for-dom-thingfilter-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-7" title="§ 10.2 The ThingFilter dictionary">§ 10.2 The ThingFilter dictionary</a> <a href="#ref-for-dom-thingfilter-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-9" title="§ C. Full Web IDL">§ C. Full Web IDL</a> <a href="#ref-for-dom-thingfilter-10" title="Reference 2">(2)</a> <a href="#ref-for-dom-thingfilter-11" title="Reference 3">(3)</a> <a href="#ref-for-dom-thingfilter-12" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingfilter-fragment" aria-label="Links in this document to definition: fragment">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingfilter-fragment" aria-label="Permalink for definition: fragment. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-91611324">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingfilter-fragment-1" title="§ 10.2 The ThingFilter dictionary">§ 10.2 The ThingFilter dictionary</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-fragment-2" title="§ 10.3 The discovery process algorithm">§ 10.3 The discovery process algorithm</a> 
    </li><li>
      <a href="#ref-for-dom-thingfilter-fragment-3" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-discovery-process" aria-label="Links in this document to definition: discovery process">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-discovery-process" aria-label="Permalink for definition: discovery process. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-discovery-process-1" title="§ 6.3 The discover() method">§ 6.3 The discover() method</a> 
    </li><li>
      <a href="#ref-for-dfn-discovery-process-2" title="§ 6.4 The exploreDirectory() method">§ 6.4 The exploreDirectory() method</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-thingdiscoveryprocess-stop" aria-label="Links in this document to definition: stop()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-thingdiscoveryprocess-stop" aria-label="Permalink for definition: stop(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-180964908">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-thingdiscoveryprocess-stop-1" title="§ 10. The ThingDiscoveryProcess interface">§ 10. The ThingDiscoveryProcess interface</a> 
    </li><li>
      <a href="#ref-for-dom-thingdiscoveryprocess-stop-2" title="§ C. Full Web IDL">§ C. Full Web IDL</a> 
    </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>